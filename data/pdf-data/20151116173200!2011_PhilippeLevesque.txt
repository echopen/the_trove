UNIVERSITÉ DE MONTRÉAL
ARCHITECTURE D’UN PROCESSEUR DÉDIÉ AUX TRAITEMENTS DE
SIGNAUX ULTRASONIQUES EN TEMPS RÉEL EN VUE D’UNE
INTÉGRATION SUR PUCE
PHILIPPE LÉVESQUE
DÉPARTEMENT DE GÉNIE ÉLECTRIQUE
ÉCOLE POLYTECHNIQUE DE MONTRÉAL
THÈSE PRÉSENTÉE EN VUE DE L’OBTENTION
DU DIPLÔME DE PHILOSOPHIAE DOCTOR (PH.D.)
(GÉNIE ÉLECTRIQUE)
JANVIER 2011
© Philippe Lévesque, 2011.
UNIVERSITÉ DE MONTRÉAL
ÉCOLE POLYTECHNIQUE DE MONTRÉAL
Cette thèse intitulée:
ARCHITECTURE D’UN PROCESSEUR DÉDIÉ AUX TRAITEMENTS DE SIGNAUX
ULTRASONIQUES EN TEMPS RÉEL EN VUE D’UNE INTÉGRATION SUR PUCE
présentée par: LÉVESQUE Philippe
en vue de l'obtention du diplôme de: Philosophiae Doctor
a été dûment acceptée par le jury d'examen constitué de:
M. SAVARIA Yvon, Ph.D., président
M. SAWAN Mohamad, Ph.D., membre et directeur de recherche
M. GUARDO Robert, Ph.D., membre
M. FONTAINE Réjean, Ph.D., membre externe
iii
DÉDICACE
À ma mère, mon père,
Mes sœurs et mon frère
iv
REMERCIEMENTS
En premier lieu, je tiens à remercier le professeur Mohamad Sawan pour ses conseils et ses
encouragements au cours des travaux de cette thèse ainsi que pour m’avoir introduit à ce domaine
passionnant qu’est l’imagerie médicale par ultrasons.
Je remercie les membres du jury qui ont accepté d’investir de leur temps pour l’évaluation de
cette thèse.
J’adresse également mes remerciements à Virginie Simard pour son support, ses critiques et ses
précieux conseils.
Je désire exprimer ma sincère reconnaissance à tous ceux et celles qui, grâce à leur grande
générosité, m’ont permis de compléter cette thèse ainsi qu’entreprendre bien d’autres projets
présents et futurs.
Finalement, je tiens à remercier ma famille et mes amis pour leur compréhension et leurs
encouragements tout au long de cette histoire sans fin...
v
RÉSUMÉ
Cette thèse se rapporte à la conception d’une nouvelle architecture d’un système d’appareils
d’imagerie médicale par ultrasons (IMU); nous proposons une architecture matérielle d’un
processeur dédié au prétraitement de signaux ultrasoniques en temps réel, qui intègre un cœur
(core) de traitement, un module d’interpolation et un module d’assignation de priorités qui permet
de partager le bus de données d’une mémoire à faible consommation d’énergie. Ce processeur
dédié représente une contribution importante aux efforts visant à l’intégration complète d’un
système de prétraitement de signaux ultrasoniques à l’intérieur d’une sonde qui fait partie des
appareillages ultrasoniques conventionnels ainsi qu’à la mise en œuvre d’un nouveau type
d’appareil d’IMU sans fil.
La littérature des deux dernières décennies présente diverses approches visant à miniaturiser la
technologie de l’IMU. Plusieurs auteurs proposent des solutions en matière d’intégration des
circuits frontaux ou de matérialisation de nouveaux algorithmes de traitement des signaux
ultrasoniques. Les efforts de recherche dans ce domaine sont propulsés par l’intérêt grandissant
des marchés et par le développement de nouvelles applications qui bénéficient de la
miniaturisation de cette technologie. De plus, les performances grandissantes des circuits intégrés
programmables tels que les FPGA offrent les caractéristiques appropriées pour la mise en œuvre
de nouveaux systèmes d’IMU.
La plupart des architectures des systèmes d’IMU répertoriés dans la littérature reposent en totalité
ou en partie sur une implémentation logicielle qui utilise un processeur classique (Central
vi
Processor Unit - CPU) ou un autre processeur dédié au traitement de signal (Digital Signal
Processor - DSP). Cette approche logicielle procure une grande flexibilité et facilite
l’implémentation d’algorithmes de traitement de plus en plus performants et complexes.
Toutefois, pour fournir une vitesse d’exécution en temps réel, ces systèmes requièrent beaucoup
d’énergie ou ont des dimensions dépassant largement celles requises pour une intégration
complète sur une seule puce (SoC, System on Chip). De plus, les systèmes qui reposent
complètement sur une implémentation matérielle sont dédiés à l’exploration d’algorithmes de
traitement des signaux ultrasonores. Par conséquent, ces plateformes de développement sont de
taille considérable et consomment beaucoup trop d’énergie pour envisager leur intégration à
l’intérieur d’une sonde d’un système d’IMU. Par ailleurs, les architectures matérielles
d’algorithmes de traitement des signaux ultrasoniques en temps-réel donnent lieu à quelques
pistes à suivre pour l’intégration complète d’un tel système à l’intérieur de la sonde. Par contre, il
n’existe pas, au meilleur de nos connaissances, un système complet qui offre la possibilité d’être
intégré à l’intérieur de la dite sonde et de transmettre les données résultantes du prétraitement sur
un lien sans fil qui requièrt un débit acceptable pour les dispositifs portatifs fonctionnant à
batteries.
Afin de valider l’approche matérielle proposée ainsi que l’implémentation d’une unité de
prétraitement dédiée, nous avons effectué le travail en deux principales phases. La première
permet de valider l’approche matérielle en analysant la flexibilité de configuration, les capacités
de traitement en temps réel, la précision ainsi que la complexité de l’implémentation du détecteur
d’enveloppe. Il est à noter que ce dernier est basé sur un des algorithmes de traitement principaux
du système d’IMU puisque le détecteur d’enveloppe permet d’extraire l’information contenue
vii
dans les signaux ultrasoniques. D’un autre côté, la seconde phase permet de valider l’ensemble de
l’architecture du processeur dédié au traitement de signaux ultrasoniques et de comparer le ratio
performance/consommation de la solution proposée avec des implémentations logicielles
potentielles.
Le détecteur d’enveloppe que nous proposons est basé sur un démodulateur en quadrature à large
bande se servant d’un transformateur de Hilbert. L’architecture matérielle de ce dernier repose
sur deux filtres à réponse impulsionnelle finie (RIF). Afin d’obtenir la valeur des coefficients de
ces deux filtres RIF, la méthode proposée consiste à moduler les coefficients d’un filtre RIF
passe-bas par une exponentielle complexe; ce qui permet d’effectuer une translation dans le
domaine fréquentiel et d’obtenir un filtre RIF passe-bande à coefficients complexes. Aussi, la
partie imaginaire des coefficients permet de construire un filtre RIF de Hilbert qui effectue un
déphasage linéaire de 90 degrés dans la bande passante. D’un autre côté, la partie réelle des
coefficients permet de construire un filtre RIF passe-bande qui produit des données synchrones
avec le RIF de Hilbert. Finalement, pour compléter le démodulateur, l’architecture matérielle de
la fonction racine carrée proposée est basée sur une approximation linéaire par morceaux.
Pendant la deuxième phase de nos travaux, nous nous sommes concentrés à la réalisation du cœur
de traitement qui est basé sur une architecture matérielle et constitue une alternative intéressante
par rapport aux systèmes conventionnels. En effet, en plus d’offrir un excellent ratio
performance/consommation, cette unité permet de traiter les signaux ultrasoniques en temps réel
en utilisant une fréquence d’échantillonnage égale à la fréquence maximale de 100 MHz permise
par le FPGA. De plus, le module de décimation adaptatif, qui fusionne les données provenant des
viii
deux canaux parallèles (démodulateur et convertisseur de balayage) du cœur de traitement, réduit
le niveau de bruit et offre la possibilité d’effectuer des zooms en temps réel tout en éliminant les
interpolations. En effet, il est possible de sélectionner une portion minimale de 1 cm sur toute la
profondeur échographiée et de l’afficher en utilisant la résolution maximale de l’afficheur.
Également, en utilisant tous les échantillons disponibles, il n’y pas d’interpolation à effectuer sur
les lignes balayées puisqu’il n’y a aucune valeur manquante sur une même ligne. Il est donc
seulement nécessaire d’effectuer des interpolations pour déterminer les valeurs manquantes entre
les lignes balayées. Finalement, les modules d’interpolation et d’assignation de priorités
complètent l’architecture du processeur dédié proposé et offrent la possibilité de transmettre une
image échographique complète possédant une résolution de 320x240x8bits sur un lien sans fil
selon un taux de rafraichissement de 15 images par seconde, ce qui correspond à un débit utile de
8,8 Mb/s si aucune compression de données n’est effectuée.
En plus d’appuyer nos résultats à l’aide d’un prototype fonctionnel du système, l’ensemble des
algorithmes de traitement furent analysés et comparés par simulations. Puisque les principaux
critères à considérer pour rencontrer les objectifs sont le ratio performance/consommation, les
dimensions ainsi que la capacité de traitement en temps réel, les choix architecturaux de
l’implémentation matérielle de chaque module de traitement ont été évalués en fonction des
ressources matérielles, des performances d’exécution, de la flexibilité et de la précision. De plus,
une discussion portant sur le ratio performance/consommation compare l’implémentation
matérielle proposée avec des implémentations logicielles reposant sur différentes architectures de
processeur conventionnel.
ix
Finalement, les contributions qui découlent des travaux présentés dans cette thèse sont :
 Une méthode qui permet d’adapter les filtres à réponse impulsionnelle finie pour la
démodulation en quadrature des signaux ultrasoniques.
 Une architecture matérielle performante requérant une quantité minime de ressources pour
réaliser la fonction racine-carrée qui repose sur une approximation linéaire par morceaux.
 Une méthode de décimation adaptative qui réduit le niveau de bruit en effectuant la
moyenne arithmétique des échantillons et qui permet d’effectuer des zooms en temps réel
en adaptant la décimation en fonction du nombre d’échantillons requis et de la zone
d’image à présenter.
 Une architecture matérielle du cœur de traitement flexible et configurable pouvant opérer
à la fréquence d’horloge maximale du composant programmable.
 Une architecture matérielle d’un processeur dédié au prétraitement de signaux
ultrasoniques en temps réel qui intègre un cœur de traitement, une mémoire à faible
consommation, un module d’interpolation et un module d’assignation de priorités qui
permet de partager une mémoire à faible consommation.
 Un prototype fonctionnel qui a été utilité pour l’intégration du système et pour la
validation expérimentale ainsi que les leçons qui furent tirées lors de sa réalisation.
x
ABSTRACT
This Ph.D. thesis is related to the design of a new architecture of ultrasound medical imaging
(UMI) system. We propose a fully hardware-based processor dedicated to real-time ultrasonic
signal processing, which incorporates a preprocessing core, a low-power memory, an
interpolation unit, and a priority assignment unit. This Ph.D. thesis represents an important
contribution towards the complete integration of an ultrasound preprocessing system within the
probe and the implementation of a new type of wireless UMI device.
During the last two decades, several UMI system miniaturization approaches have been presented
in the literature. Some Authors proposed their front-end circuit integration and introduced
hardware-based ultrasound signal processing units based on new algorithms. Research efforts in
this area are driven by the increasing industrial interest on miniaturized UMI devices and by the
development of new applications that benefit from the miniaturization of this technology.
Moreover, the increasing performance of programmable circuits, such as FPGA, offers
appropriate characteristics for the implementation of new UMI systems.
Most UMI system architectures found in the literature are based in whole or in part on a software
implementation that uses a central processing unit (CPU) or a digital signal processor (DSP). This
software approach provides flexibility and facilitates the implementation of processing algorithms
which are becoming ever more effective and complex. However, to provide real-time ultrasound
image processing, these systems require high-power consumption or are too large for a complete
system integration on a single chip (SoC). On the other hand, systems that rely completely on a
xi
hardware implementation are mainly dedicated to the exploration of algorithms. Therefore, these
development platforms have large dimensions and consume too much energy to consider their
integration within the probe. Some proposed architectures of real-time ultrasound signal
processing algorithms are targeting the full integration of UMI systems. However, to our best
knowledge, no currently available system offers the possibility to be integrated inside the probe
and allows to transmit the resulting data preprocessing on a wireless link at a rate acceptable for
battery operated portable devices.
In order to provide a solution and validate the hardware approach as well as corresponding
different concepts, the research conducted during this Ph.D. thesis is divided into two main
phases. The first phase validates the proposed approach by analyzing the hardware configuration
flexibility, the ability of real-time processing, and the accuracy and complexity of the envelope
detector hardware implementation. It is important to notice that the envelope detector is one of
the main processing units of the IMU system since it allows extracting the information from the
ultrasonic signals. The second phase validates the complete architecture of the dedicated
ultrasound processor and compares the performance/power ratio of the proposed solution with
equivalent software implementations.
The proposed envelope detector used to process ultrasound signals is a fully hardware-based real-
time digital wideband quadrature demodulator based on the Hilbert transform. The presented
architecture combines two finite impulse response (FIR) filters to process in phase and quadrature
signals and includes a piecewise linear approximation architecture that performs the required
square-root operations. To obtain the coefficients of these two FIR filters, the proposed method
xii
modulates the coefficients of a lowpass FIR filter by a complex exponential, which performs a
translation in the frequency domain and produces an ultrasound adapted complex coefficient
bandpass FIR filter. The imaginary part of the complex coefficients is used to construct the
Hilbert FIR filter and produces a linear phase shift of 90 degrees in the bandwidth (quadrature
data). On the other hand, the real part of the complex coefficients is used to construct a bandpass
FIR filter that synchronizes in phase data with quadrature data. Finally, the hardware architecture
of the square-root function based on a piecewise linear approximation completes the demodulator
presentation.
Following our second research phase, a complete hardware-based ultrasound preprocessing unit
is presented as an alternative to available power hungry devices. Intended to expand the range of
ultrasonic applications, the proposed unit allows the replacement of the ultrasonic probe cable by
a wireless link to transfer data from the probe to a remote monitor. In addition to providing an
excellent performance/power ratio, this unit can process the ultrasonic signals in real-time using a
sampling frequency equal to the maximum frequency of 100 MHz allowed by the FPGA.
Moreover, the adaptive decimation unit that merges data from two parallel channels (demodulator
and scan convertor) in the preprocessing core reduces noise and offers real-time zooming while
minimizing interpolation requirements. Finally, interpolation and priority assignment units are
proposed to complete the architecture of the dedicated processor. The overall architecture offers
the ability of transmitting an ultrasound image, with a resolution of 320×240×8 bits, on a wireless
link with a refresh rate of 15 frames per second (corresponding to a bit rate of 8.8 Mb/s if no data
compression is performed).
xiii
In addition to supporting our results with a system prototype, all algorithms were analyzed and
compared by simulations. The main objectives to meet are the performance/power ratio,
dimensions, and the ability of real-time processing. Therefore, the hardware architecture
implementation of each processing unit has been evaluated based on physical resources,
performance, flexibility and precision. Furthermore, a comparison of the performance/power ratio
between the proposed hardware implementation and available software-based solutions
implemented with various processor architectures is presented.
Finally, the contributions resulting from this Ph.D. thesis are:
 A method to adapt the FIR filters for ultrasound signals quadrature demodulation.
 An efficient hardware-based architecture requiring little resources to achieve the square-
root function based on a piecewise linear approximation.
 A method of adaptive decimation to reduce the noise level by calculating the arithmetic
average of samples and to allow real-time zooming by adjusting the decimation of the
required number of samples and the displayed image zone.
 A hardware-based architecture of a flexible and configurable preprocessing core that
operates at the maximum clock frequency of the FPGA.
 A hardware-based architecture of a processor dedicated to real-time ultrasound signals
processing that incorporates a preprocessing core, a low-power memory, an interpolation
unit and a priority assignment unit for low-power memory sharing.
 A working prototype which has been used for system integration and experimental
validation, and lessons learned from its realization.
xiv
TABLE DES MATIÈRES
DÉDICACE................................................................................................................................... iii 
REMERCIEMENTS.....................................................................................................................iv 
RÉSUMÉ.........................................................................................................................................v 
ABSTRACT ....................................................................................................................................x 
TABLE DES MATIÈRES ..........................................................................................................xiv 
LISTE DES TABLEAUX ...........................................................................................................xix 
LISTE DES FIGURES.................................................................................................................xx 
LISTE DES SIGLES ET DES ABRÉVIATIONS.................................................................xxvii 
CHAPITRE 1 INTRODUCTION.................................................................................................1 
1.1  Motivation..........................................................................................................................2 
1.2  Objectifs de recherche .......................................................................................................3 
1.3  Contributions .....................................................................................................................5 
1.4  Organisation de la thèse.....................................................................................................7 
CHAPITRE 2 IMAGERIE MÉDICALE PAR ULTRASONS..................................................9 
2.1  Imagerie médicale..............................................................................................................9 
2.1.1  Les rayons X...............................................................................................................9 
2.1.2  La résonnance magnétique .......................................................................................10 
2.1.3  Les ultrasons.............................................................................................................10 
2.1.4  L’optique ..................................................................................................................10 
2.1.5  La médecine nucléaire..............................................................................................11 
2.1.6  L’électrophysiologie.................................................................................................11 
2.1.7  La thermographie .....................................................................................................11 
2.2  Principes de bases de l’ultrason.......................................................................................12 
xv
2.2.1  Signaux ultrasoniques...............................................................................................12 
2.2.2  Propagation des ondes de pression...........................................................................16 
2.2.3  Atténuation des ondes de pression ...........................................................................19 
2.2.4  Paramètres pour l’imagerie médicale par ultrasons .................................................23 
2.2.5  Imagerie médicale par ultrasons...............................................................................25 
2.2.6  Modes d’imagerie médicale par ultrasons................................................................28 
2.3  Les dangers des ultrasons et les critères de performance ................................................32 
2.3.1  Les risques associés aux ultrasons............................................................................32 
2.3.2  Les critères de performance .....................................................................................32 
2.4  Conclusion.......................................................................................................................33 
CHAPITRE 3 TRAVAUX DE POINTE DANS LE DOMAINE.............................................34 
3.1  Systèmes échographiques portatifs à faible coût.............................................................34 
3.1.1  Intégration avec la technologie CMUT....................................................................36 
3.1.2  Intégration avec la technologie piézoélectrique céramique .....................................36 
3.1.3  Intégration avec la technologie PVDF .....................................................................37 
3.2  Miniaturisation des systèmes échographiques.................................................................38 
3.2.1  Terminaux de soins aux patients ..............................................................................38 
3.2.2  Système échographique Mode-C à faible coût.........................................................39 
3.3  Implémentation matérielle des algorithmes de traitement...............................................41 
3.3.1  Plateforme de développement ..................................................................................42 
3.3.2  Formateur de faisceau ..............................................................................................43 
3.3.3  Détecteur d’enveloppe..............................................................................................48 
3.4  Réalisations du laboratoire de neurotechnologie Polystim..............................................52 
3.4.1  Application : alarme de conditionnement ultrasonore reconfigurable .....................52 
xvi
3.4.2  Technologie : balayeur micro électromécanique......................................................53 
3.4.3  Intégration : système sur circuit intégré ...................................................................54 
3.5  Conclusion.......................................................................................................................57 
CHAPITRE 4 ARCHITECTURE D’UN SYSTÈME ÉCHOGRAPHIQUE SANS FIL ET
DE SA PLATEFORME DE VALIDATION..............................................................................59 
4.1  Nouvelle architecture d’un système échographique........................................................59 
4.2  Architecture de la plateforme de validation.....................................................................62 
4.2.1  Section analogique et mixte .....................................................................................63 
4.2.2  Section numérique....................................................................................................65 
4.2.3  Sources d’alimentation et réseaux de distribution....................................................71 
4.3  Implémentation du système échographique miniaturisé..................................................71 
4.3.1  Implémentation : sources d’alimentation et réseaux de distribution........................72 
4.3.2  Implémentation : section analogique et mixte..........................................................74 
4.3.3  Implémentation : section numérique ........................................................................75 
4.4  Validation du système échographique miniaturisé..........................................................76 
4.4.1  Validation des sources d’alimentation .....................................................................77 
4.4.2  Validation du circuit analogique ..............................................................................79 
4.4.3  Validation de la section numérique..........................................................................81 
4.5  Conclusion.......................................................................................................................82 
CHAPITRE 5 CONCEPTION ET VALIDATION D’UN DÉMODULATEUR EN
QUADRATURE ...........................................................................................................................85 
5.1  Base mathématique de la Transformée de Hilbert...........................................................85 
5.2  Architecture du démodulateur en quadrature ..................................................................88 
5.3  Implémentation matérielle du démodulateur en quadrature ............................................92 
5.3.1  Le transformateur de Hilbert ....................................................................................92 
xvii
5.3.2  La fonction racine carrée..........................................................................................97 
5.4  Validation du démodulateur en quadrature......................................................................99 
5.4.1  Résultats de simulation.............................................................................................99 
5.4.2  Résultats de l’implémentation matérielle...............................................................102 
5.4.3  Résultats expérimentaux.........................................................................................103 
5.5  Conclusion.....................................................................................................................106 
CHAPITRE 6 CONCEPTION ET VALIDATION D’UN PROCESSEUR DÉDIÉ AU
PRÉTRAITEMENT DE SIGNAUX ULTRASONIQUES.....................................................108 
6.1  Unité de prétraitement numérique .................................................................................108 
6.1.1  Cœur de traitement .................................................................................................108 
6.1.2  Gestionnaire de la mémoire partagée .....................................................................114 
6.1.3  Unité d’interpolation ..............................................................................................115 
6.2  Implémentation matérielle de l’architecture proposée ..................................................115 
6.2.1  Implémentation du cœur de traitement...................................................................116 
6.2.2  Implémentation de l’unité de contrôle de la mémoire............................................119 
6.2.3  Implémentation de l’unité d’interpolation..............................................................122 
6.3  Résultats expérimentaux................................................................................................123 
6.3.1  Résultats de l’implémentation et validation du système ........................................123 
6.3.2  Validation du transfert de données sans fil ............................................................128 
6.3.3  Ratio performance/consommation .........................................................................129 
6.4  Conclusion.....................................................................................................................133 
CHAPITRE 7 CONCLUSION..................................................................................................135 
7.1  Retour sur les objectifs ..................................................................................................135 
7.2  Discussion......................................................................................................................140 
xviii
7.3  Contributions .................................................................................................................143 
7.4  Travaux futurs et recommandations ..............................................................................145 
7.4.1  Amélioration du processeur de prétraitement numérique ......................................145 
7.4.2  Avancement du système échographique sans fil....................................................146 
BIBLIOGRAPHIE.....................................................................................................................147 
xix
LISTE DES TABLEAUX
Tableau 2.1 : Exemples d’impédances acoustiques, de vélocités et de densité [7], [10], [25], [26].
........................................................................................................................................................18 
Tableau 2.2 : Exemple de coefficient d’atténuation pour différents tissus organiques [7], [10],
[25], [26].........................................................................................................................................22 
Tableau 2.3 : Fréquences et longueurs d’onde utilisées pour l’imagerie médicale par ultrasons ..26 
Tableau 3.1 : Sommaire des différents systèmes répertoriés .........................................................58 
Tableau 4.1 : Sommaire de l’utilisation des ressources du FPGA 3s1500lfg320-4 de XILINX par
les unités de contrôle de base .........................................................................................................76 
Tableau 4.2 : Efficacité des sources d’alimentation.......................................................................78 
Tableau 5.1 : Sommaire de l’utilisation des ressources du FPGA 3s1500lfg320-4 de XILINX .103 
Tableau 6.1 : Débit minimal utile requis du bus de la mémoire ..................................................115 
Tableau 6.2 : Complexité matérielle des différentes équations de pseudo-moyenne arithmétique
......................................................................................................................................................118 
Tableau 6.3 : Taux d’utilisation projeté du bus de la mémoire en mode asynchrone..................120 
Tableau 6.4 : Sommaire de l’utilisation des ressources du FPGA 3s1500lfg320-4 de XILINX par
l’ensemble du système proposé....................................................................................................124 
Tableau 6.5 : Sommaire de l’utilisation des ressources du FPGA 3s1500lfg320-4 de XILINX par
l’unité de compression de données...............................................................................................125 
Tableau 6.6 : Puissance consommée par l’ensemble du système échographique miniaturisé.....130 
Tableau 6.7 : Performances et consommation des DSP...............................................................132 
Tableau 6.8 : Performances et consommation de différentes architectures .................................134 
Tableau 7.1 : Atteinte des objectifs..............................................................................................140 
Tableau 7.2 : Comparaison du système échographique miniaturisé ............................................142 
xx
LISTE DES FIGURES
Figure 1.1: Radiographie prise le 22 décembre 1895 par le Professeur Röntgen de la main de sa
femme Bertha ...................................................................................................................................1 
Figure 1.2 : Représentation du concept du système échographique portatif sans fil .......................3 
Figure 2.1: Vitesse de propagation des ondes ultrasoniques pour différents milieux (tiré de [7]) 14 
Figure 2.2: Vitesse de propagation des ondes ultrasoniques pour différentes températures et
différents tissus organiques (tiré de [7]).........................................................................................16 
Figure 2.3: Propagation des signaux ultrasoniques : a) Réflexion spéculaire; b) Réflexion diffuse
causée par une interface irrégulière; c) Réflexion diffuse causée par un milieu hétérogène .........19 
Figure 2.4 : Coefficient d’atténuation de différents tissus en fonction de la fréquence (tiré de [7])
........................................................................................................................................................22 
Figure 2.5 : Effet de l’atténuation selon le milieu : a) Milieu moins absorbant; b) Milieu plus
absorbant ........................................................................................................................................23 
Figure 2.6 : Effet de l’atténuation selon la fréquence : a) Fréquence basse (onde longue); b)
Fréquence élevée (onde courte)......................................................................................................23 
Figure 2.7 : Solutions de Fraunhofer et de Fresnel pour l’amplitude à la position x d’une onde de
pression plane circulaire provenant d’une source de rayon a qui émet une onde continue
sinusoïdale (tiré de [5])...................................................................................................................24 
Figure 2.8 : Résolutions : a) Axiale; b) Latérale ............................................................................25 
Figure 2.9 : Modes de transmission des signaux ultrasonique : a) Pulsé; b) Continu....................25 
Figure 2.10 : Résolution latérale : a) Lentille focale; b) Mise au point dynamique.......................27 
Figure 2.11 : Types de balayages : a) Linéaire mécanique; b) Linéaire électronique; c) Sectoriel
mécanique; d) Sectoriel électronique sans contrôle de phase; e) Sectoriel électronique avec
contrôle de phase............................................................................................................................28 
Figure 2.12 : Imagerie médicale par ultrasons en Mode-A : a) Schéma de la disposition du
système; b) Image Mode-A obtenue à partir des échos reçus de cette disposition ........................29 
xxi
Figure 2.13 : Imagerie médicale par ultrasons en Mode-B : a) Schéma de la disposition du
système; b) Image Mode-B pour une seule ligne (ligne centrale); c) Image Mode-B avec un
balayage..........................................................................................................................................29 
Figure 2.14 : Imagerie médicale par ultrasons en Mode-M / Mode-TM : a) Schéma de la
disposition du système; b) Image Mode-M / Mode-TM. ...............................................................30 
Figure 2.15 : Imagerie médicale par ultrasons en Mode-F : a) Schéma de la disposition du
système; b) Image Mode-F.............................................................................................................31 
Figure 3.1 : Architecture typique d’un système échographique.....................................................35 
Figure 3.2 : Intégration d’un transducteur CMUT et des circuits frontaux : a) Schéma bloc (tiré
de [32]); b) Implémentation matérielle (© 2009 IEEE, tiré de [33]) .............................................36 
Figure 3.3 : Intégration d’élément piézoélectrique céramique à un cathéter : a) Cathéter veineux
de type Broviac - Cook; b) Réseau de 54 éléments autour du cathéter veineux; c) Réseau de 108
éléments autour du cathéter veineux (© 2008 IEEE, tiré de [34]) .................................................37 
Figure 3.4 : Sonde linéaire à 128 éléments PVDF : a) Tête de la sonde; b) Circuits de la sonde (©
2009 IEEE, tiré de [36]) .................................................................................................................38 
Figure 3.5 : Schéma bloc de l’architecture du terminal de soins aux patients (© 2008 IEEE, tiré de
[38])................................................................................................................................................39 
Figure 3.6 : Modules du terminal de soins aux patients : a) Analogique; b) Numérique; c)
Bluetooth; d) Alimentation; e) Boitier et sonde (© 2008 IEEE, tiré de [38])................................40 
Figure 3.7 : Système échographique Mode-C à faible coût : a) Représentation du concept ; b)
Schéma bloc du système (© 2008 IEEE, tiré de [41]) ...................................................................41 
Figure 3.8 : Système échographique Mode-C à faible coût : a) Schéma bloc; b) Implémentation
matériel sur PCB et composants intégrés dédiés (© 2008 IEEE, tiré de [41])...............................41 
Figure 3.9 : Plateforme de développement ULA-OP: a) Prototype matériel; b) Illustration de la
flexibilité de configuration et d’utilisation (© 2009 IEEE, tiré de [46]).......................................43 
Figure 3.10 : Architecture du module de traitement en temps-réel du formateur de faisceau à
ouverture synthétique pour quatre canaux (© 2006 IEEE, tiré de [51]) ........................................44 
xxii
Figure 3.11 : Architecture du formateur de faisceau à ouverture synthétique : a) Architecture des
cartes numériques DAUP; b) Système SARUS (© 2005 IEEE, tiré de [52])................................45 
Figure 3.12 : Principe de construction des images avec un formateur de faisceau à ouverture
synthétique (tiré de [47])................................................................................................................45 
Figure 3.13 : Faisceau obtenu par des additionneurs de 24 bits ou de 16 bits (© 2008 IEEE, tiré
de [50]) ...........................................................................................................................................46 
Figure 3.14 : Formateur de faisceau dédié implémenté sur FPGA: a) Analyse de la résolution à
utiliser; b) Analyse du nombre d’interpolations linéaires à effectuer entre les échantillons; c)
Résultat obtenu pour un échantillonnage à 200 MHz et une résolution sur 12 bits; d) Prototype
matériel utilisé (© 2007 IEEE, tiré de [53])...................................................................................47 
Figure 3.15 : Faisceau du formateur de faisceau basé sur un CAN à 1 bit obtenu en simulation
pour une profondeur de 7 cm, une sonde de 3 MHz et une fréquence d’échantillonnage de 140
MHz (© 2005 IEEE, tiré de [55])...................................................................................................48 
Figure 3.16 : Démodulateur en quadrature à large bande pour FPGA : a) Méthode traditionnelle;
b) Méthode de sous-échantillonnage; c) Forme transposée d’un filtre RIF d’ordre impair (© 1999
IEEE, tiré de [56]) ..........................................................................................................................50 
Figure 3.17 : Algorithme de démodulation en quadrature : a) méthode conventionnelle; b)
méthode qui incorpore la compression logarithmique (© 2007 IEEE, tiré de [57]) ......................51 
Figure 3.18 : Démodulation d’une ligne composée de 2048 échantillons représentée en divers
formats (© 2007 IEEE, tiré de [57])...............................................................................................51 
Figure 3.19 : Schéma bloc d’un système d’imagerie par ultrasons Mode-B implémenté sur FPGA
(© 2009 IEEE, tiré de [58])............................................................................................................52 
Figure 3.20 : Architecture de l’alarme de conditionnement ultrasonore reconfigurable (tiré de
[59])................................................................................................................................................53 
Figure 3.21 : Représentation du balayeur micro électromécanique (tiré de [60])..........................54 
Figure 3.22 : Étages du circuit frontal RX (tiré de [61])................................................................54 
Figure 3.23 : Schéma bloc du convertisseur DC-DC (tiré de [65])................................................55 
xxiii
Figure 3.24 : Architecture globale de l’unité de traitement numérique (tiré de [66])....................56 
Figure 3.25 : Environnement de simulation (tiré de [67])..............................................................57 
Figure 4.1 : Architecture proposée d’un système échographique sans fil : a) Éléments composants
le système, b) Exemple d’un système possédant plusieurs AIM et TPU......................................60 
Figure 4.2 : Partitionnement logiciel-matériel proposé d’un système échographique...................62 
Figure 4.3 : Schéma bloc de la plateforme de validation...............................................................63 
Figure 4.4 : Architecture de l’unité de prétraitement analogique et mixte.....................................64 
Figure 4.5 : Modules de support pour la gestion du système.........................................................67 
Figure 4.6 : Fonction sinusoïdale utilisée pour déterminer l’angle entre chaque ligne balayée ....67 
Figure 4.7 : Méthode utilisée pour superposer les deux images (aller-retour) : a) Images
superposées sans calibration, b) Images superposées avec repositionnement du centre du balayage
pour chaque image..........................................................................................................................68 
Figure 4.8 : Convertisseur de balayage: a) Position de l’élément piézoélectrique et du centre de
rotation dans la sonde, b) Construction des images .......................................................................70 
Figure 4.9 : Photographie du système échographique miniaturisé son ensemble montrant la sonde
et le clavier matriciel 4x4 ...............................................................................................................72 
Figure 4.10 : Photographie du circuit imprimé du système échographique miniaturisé : a) Dessus
du PCB montrant les diverses alimentations, le FPGA et la PSRAM; b) Dessous du PCB
montrant l’ACL..............................................................................................................................72 
Figure 4.11 : Topologie de la distribution des alimentations pour l’ACL .....................................73 
Figure 4.12 : Topologie de la distribution des alimentations pour le système échographique ......74 
Figure 4.13 : Impulsion de -100 V aux bornes du piézoélectrique : a) impulsion de 50 ns, b) deux
impulsions de 50 ns séparées de 50 ns, c) impulsion de 150 ns, d) impulsion de 600 ns ..............79 
Figure 4.14 : Rampes de tension de l’amplificateur à compensateur temporel de gain : a) gain nul
et pente moyenne ; b) gain faible et pente moyenne ; c) gain moyen et pente faible ; d) gain élevé
et pente nulle ..................................................................................................................................80 
xxiv
Figure 4.15 : Signaux ultrasoniques à l’entrée et à la sortie de l’amplificateur à compensateur
temporel de gain ; a) Signal à l’entrée; b) Signal différentiel à la sortie........................................81 
Figure 4.16 : Résultats du convertisseur de balayage pour différentes profondeurs sur une
résolution de 320 x 240 pixels : a) simulation de 0 à 15 cm ; b) expérimental de 0 à 15 cm ; c)
simulation de 0 à 1 cm; d) expérimental de 0 à 1 cm expérimental; e) simulation de 0 à 4 cm; f)
expérimental de 0 à 4 cm................................................................................................................83 
Figure 4.17 : Résultats du convertisseur de balayage pour des zooms sur une résolution de 320 x
240 pixels : a) simulation 8 cm à 16 cm ; b) expérimental 8 cm à 16 cm ; c) simulation 4 cm à 11
cm ; d) expérimental 4 cm à 11 cm ................................................................................................84 
Figure 5.1 : Représentation de l’expression y=sgn(x)....................................................................86 
Figure 5.2 : Architecture du démodulateur en quadrature..............................................................89 
Figure 5.3 : Méthode utilisée pour la construction des filtres RIF de type Hilbert : a) Méthode de
Reilly pour des sondes de 3 à 7,5 MHz ; b) Méthode proposée adaptée pour une sonde à 5 MHz ;
c) Méthode proposée adaptée pour une sonde à 2 MHz ; d) Méthode proposée adaptée pour une
sonde à 7,5 MHz.............................................................................................................................93 
Figure 5.4 : Architecture proposée du transformateur de Hilbert pour des filtres RIF d’ordre N .95 
Figure 5.5 : Somme des résidus au carré normalisée : a) N=8 à 64 et p=16, b) N=16 et p=5 à 1696 
Figure 5.6 : Gain et phase des filtres RIF pour N=32, p=10: a) Filtre RIF passe-bande
conventionnel, b) Filtre RIF HT conventionnel, c) Filtre RIF complexe large bande selon la
méthode de Reilly, d) Filtre RIF complexe à bande étroite adapté selon la méthode proposée ....97 
Figure 5.7 : Démodulation avec une configuration N=16 et p=16 d’une impulsion gaussienne
possédant une fréquence centrale de 5 MHz et une bande passante de 40 % selon la méthode: a)
Référence Matlab, b) Conventionnelle, c) Reilly, d) Adaptée .......................................................98 
Figure 5.8 : Architecture de la fonction racine carrée basée sur une approximation linéaire par
morceau ..........................................................................................................................................99 
Figure 5.9 : Démodulation d’un signal RF possédant différents niveaux de bruit avec une
configuration N=32 et p=12: a) SNR=22 dB, b) SNR=12.5 dB, c) SNR=6.5 dB, d) SNR=0.5 dB
......................................................................................................................................................100 
xxv
Figure 5.10 : Démodulation d’un signal RF possédant un SNR=6.5 dB avec différents paramètres
de configuration : a) N=4, p=6, b) N=16, p=14, c) N=64, p=10, d) N=128, p=16......................101 
Figure 5.11 : Analyse de la robustesse au bruit des différentes méthodes...................................102 
Figure 5.12 : Résultats de l’approximation linéaire par morceau de la fonction racine carrée : a)
Approximation, b) Erreur.............................................................................................................102 
Figure 5.13 : Architecture du fantôme de référence Model 040 de CIRS....................................104 
Figure 5.14 : Images échographiques en Mode-B : a) Système matériel avec N=64 et p=10; b)
Système matériel avec N=32 et p=12; c) Système matériel avec N=16 et p=14; d) Système
logiciel (post-traitement désactivé) ..............................................................................................105 
Figure 5.15 : Profil de la ligne centrale passant par les cibles du fantôme des images
échographiques: a) Système matériel avec N=64 et p=10; b) Système matériel avec N=32 et
p=12; c) Système matériel avec N=16 et p=14; d) Système logiciel (post-traitement désactivé)106 
Figure 6.1 : Architecture proposée de l’unité de prétraitement numérique..................................109 
Figure 6.2 : Architecture proposée du cœur de traitement de l’unité de prétraitement numérique
......................................................................................................................................................110 
Figure 6.3 : Exemple de fonction de calibration de l’intensité ....................................................111 
Figure 6.4 : Exemple de fonction de compression de tons de gris...............................................112 
Figure 6.5 : Schéma bloc de l’implémentation du système..........................................................116 
Figure 6.6 : Implémentation de l’unité de compression de pixels basée sur l’équation (6.1)......118 
Figure 6.7 : Simulation de la somme des résidus au carré normalisée des différents algorithmes de
pseudo-moyenne proposés ...........................................................................................................119 
Figure 6.8 : unité de contrôle de la mémoire................................................................................121 
Figure 6.9 : Exemple de la méthode utilisée pour effectuer l’interpolation.................................123 
Figure 6.10 : Images expérimentales Mode-B de 0 à 10 cm obtenues par l’architecture proposée
en utilisant l’algorithme de compression basé sur l’équation : a) (6.1), b) (6.5), c) (6.2) et d) (6.6)
......................................................................................................................................................126 
xxvi
Figure 6.11 : Images expérimentales Mode-B obtenues par l’architecture proposée en utilisant
l’algorithme de compression basé sur l’équation (6.1) : a) de 1 à 4 cm et b) de 2 à 10 cm.........127 
Figure 6.12 : Images expérimentales Mode-B avec interpolation obtenues par l’architecture
proposée en utilisant l’algorithme de compression basé sur l’équation (6.1) : a) de 0 à 10 cm et b)
de 2 à 10 cm..................................................................................................................................127 
Figure 6.13 : Profil de la ligne centrale passant par les cibles du fantôme des images
échographiques de 0 à 10 cm obtenues par l’architecture proposée en utilisant l’algorithme de
compression basé sur l’équation : a) (6.1), b) (6.5), c) (6.2) et d) (6.6).......................................128 
Figure 7.1 : Évolution du système : a) première image obtenue, b) premier fantôme artisanal, c)
image de 0 à 10 cm avec interpolation, d) fantôme de référence et e) composants du système
échographique miniaturisé. ..........................................................................................................136 
xxvii
LISTE DES SIGLES ET DES ABRÉVIATIONS
ACL Afficheur à cristaux liquides (Liquid Cristal Display, LCD)
ADN Acide désoxyribonucléique
AIM Afficheur d’imagerie médicale
AIUM American Institute of Ultrasound in Medicine
ASIC Application Specific Integrated Circuit
CAN Convertisseur Analogique – Numérique
CMUT Transducteurs ultrasoniques capacitifs micromachinés (Capacitive Micromachined
Ultrasonic Transducer)
CNA Convertisseur Numérique - Analogique
CPU Unités centrales de traitement de données génériques, processeur classique
(Central Processor Unit)
CSD Représentation numérique canonique signé (Canonic Signed Digit)
DAUP Digital Acquisition and Ultrasound Processing
DC Courant continu (Direct Curent)
DC-DC Conversion de puissance continu-continu (Direct-Curent to Direct-Curent power
conversion)
DEXA Dual Energy X-ray Absortiometry
DMIPS Dhrystones 2.1 MIPS
DSP Processeur dédié au traitement de signal (Digital Signal Processor)
ECG Électrocardiogramme
EDF Plus court délai en premier (Earliest Deadline First)
EEG Électroencéphalogramme
FIFO Tampon de type « First-In First-Out »
FPGA Field Programmable Gate Array
xxviii
FPS Images par seconde (Frame Per Second)
FRAM Mémoire à accès non séquentiel ferroélectrique (Ferroelectric Random Access
Memory)
FWHM Moitié de la pleine largeur du maximum (Full-Width-at-Half Maximum)
HDL Hardware Description Language
HT Transformée de Hilbert (Hilbert Transform)
HV Haute tension (High Voltage)
Hz Hertz
IC Circuits intégrés (Integrated Circuit)
IMU Imagerie Médicale par Ultrasons
ISPTA Intensité spatiale maximale
IRM imagerie par résonnance magnétique
JTAG Joint Test Action Group
LNA Amplificateur à faible bruit (Low Noise Amplifier)
LSB Bit le moins signification (Least Signifiant Bit)
LSF Lien sans-fil
LUT Table de conversion (Look up Table)
MEG Magnétoencéphalographie
MEMS Micro Electro Mechanical Systems
MI Indice mécanique
MIPS Million d’instructions par seconde
MFLOPS Million d’opérations en point flottant par seconde
MMACS Million d’opérations multiplication-accumulation par seconde
NEMA National Electrical Manufacturers Association
xxix
OCT Tomographie optique cohérente (Optical Coherent Tomography)
OSD Affichage sur image (On-Screen Display)
PCB Circuit imprimé (Printed Circuit Board)
PCI Peripheral Component Interconnect
POL Point de charge (Point Of Load)
PSRAM Mémoire à accès non séquentiel pseudo-statique (Pseudo-static Random Access
Memory)
PVDF Polyfluorures de vinylidène
PZT Titano-Zirconate de Plomb ─ Pb(Zrx,Ti1-x)O3
RAM Mémoire à accès non séquentiel (Random Access Memory)
RF Radio fréquence
RIF Réponse impulsionnelle finie (Finite Impulse Response, FIR)
RII Réponse impulsionnelle infinie (Infinite Impulse Response, IIR)
RMN Résonnance magnétique nucléaire
RX Réception
SA Ouverture synthétique (Synthetic Aperture)
SARUS Synthetic Aperture Real-time Ultrasound System
SDRAM Mémoire à accès non séquentiel dynamique synchrone (Synchronous Dynamic
Random Access Memory)
SNR Ratio signal sur bruit (Signal to Noise Ratio)
SoC Système sur puce (System on Chip)
TDM Tomodensitométrie
TEMP Tomographie d’émission monophotonique (Single Photon Emission Computed
Tomography, SPECT)
TEP Tomographie à émission de positron (Positron Emission Topography, PET)
xxx
TGA Amplificateur de compensation temporelle (Time Gain Amplifier)
TGC Compensateur temporel de gain (Time Gain Compensator)
TI Indice thermique
TLA Amplificateur logarithmique (True Logarithmic Amplifier)
TPU Transducteur de prétraitement ultrasonique
TX Transmission
ULA-OP Ultrasound Advances Open Platform
UWB Ultra WideBand
VGA Amplificateur à gain variable (Variable Gain Amplifier)
VHDL Very High Speed Integrated Circuit Hardware Description Language
WPAN Wireless Personal-Area Network
1
CHAPITRE 1 INTRODUCTION
Pour percevoir le monde sous toutes ses facettes, les
approches poétiques et scientifiques se complètent.
Je n’aurai pas le temps - Hubert Reeves
L’imagerie médicale a vu le jour quelques années après la découverte des rayons X par le
Professeur Wilhelm Conrad Röntgen en 1895. Depuis la première radiographie (Figure 1.1), cet
outil de diagnostic médical a évolué, s’est perfectionné et a pris de l’expansion. Aujourd’hui, les
technologies d’imagerie médicale non effractive (acte médical qui n’implique pas un passage à
travers la peau ou les muqueuses à l’exception des ponctions veineuses) fréquemment utilisées ne
reposent plus seulement sur les rayons X, mais également sur les champs magnétiques, la
radioactivité, les rayons lumineux et les ultrasons [1]-[5]. Toutes ces technologies ont un objectif
commun; fournir de l’information sur l’anatomie des organes ou sur leur fonctionnement. Elles
sont souvent employées de façon complémentaire et il est même possible de retrouver des
systèmes d’imagerie médicale qui regroupent plusieurs technologies.
Figure 1.1: Radiographie prise le 22 décembre 1895 par le Professeur Röntgen de la main de sa
femme Bertha
2
Dès 1940, suite au développement des technologies des sonars et des radars, le potentiel de la
technologie d’imagerie par ultrasons était déjà perçu par les scientifiques du monde. Toutefois, ce
n’est qu’au début des années 1970 que l’imagerie médicale par ultrasons s’est suffisamment
améliorée pour devenir un outil de diagnostic. Depuis, cette technologie n’a cessé de se
perfectionner et est, aujourd’hui, fréquemment utilisée pour de nombreuses applications cliniques
[1]-[12]. L’imagerie non effractive en deux dimensions et Doppler couleur (voir section 2.2.6)
sont les applications les plus répandues et les plus connues. Puisque cette technologie s’avère très
utile pour visualiser les organes internes et le système vasculaire, l’imagerie médicale par
ultrasons permet de détecter différentes anomalies et masses potentiellement cancéreuses. Utilisée
en clinique obstétrique, cette technologie permet de vérifier la santé, le sexe et l’âge du fœtus. En
cardiologie, il est possible de déceler plusieurs cardiopathies et valvulopathies ainsi que d’évaluer
la fraction d’éjection. À la salle d’urgence, l’imagerie par ultrasons est un outil précieux; il
permet, par exemple, de déceler rapidement si un organe est oedématié ou perforé et s’il y a
hémorragie interne. En milieu vétérinaire, cette technologie est utilisée pour la génétique, la
production, le suivi des gestations et pour plusieurs catégories de diagnostic.
Au cours des dernières décennies, en plus de l’amélioration de la précision et de la qualité de
l’image, les efforts de recherche ont porté sur la réduction de la taille des systèmes qui utilisent
cette technologie afin de développer des systèmes portables et à faible coût [13]. La
miniaturisation de ces systèmes permet l’expansion de cette technologie vers d’autres
applications telles que les urgences, la médecine itinérante et vétérinaire; pour ne citer que
quelques exemples. De plus, la réduction du coût de ces appareils favorise l’accessibilité de cette
technologie.
1.1 Motivation
Les technologies d’aujourd’hui proposent un vaste éventail d’appareils d’imagerie en temps réel
abordables et accessibles, conçus pour des applications spécifiques. D’un côté, les innovations en
miniaturisation favorisent la portabilité et l’accessibilité; de l’autre, les technologies émergentes
offrent des processeurs de plus en plus puissants. Grâce à ces processeurs, il est possible
d’implémenter des algorithmes de traitement plus performants qui permettent de rehausser la
qualité et la précision de l’image. Par conséquent, la consommation et les dimensions des
3
appareils constituent les contraintes qui divisent ces deux tendances. Visant à offrir une meilleure
convergence de cette technologie, cette thèse propose une nouvelle architecture de système
d’imagerie médicale par ultrasons qui s’avère profitable pour ces deux tendances et qui s’inscrit
dans le cadre du projet de conception d’un système échographique sans fil (Figure 1.2).
La réalisation de ce nouveau type d’appareil permettra d’accroître le champ d’utilisation de
l’imagerie médicale par ultrasons dans les secteurs industriel et vétérinaire. De plus, il permettra
d’accroître l’accessibilité de cette technologie dans les régions éloignées, pour les situations
d’urgences ainsi que la médecine à domicile [14],[15]. Ce système sera portable et possédera une
grande autonomie. De plus, il pourra être utilisé seul ou conjointement avec un système de post-
traitement, en tant qu’instrument d’imagerie médicale utilisé pour de nombreux diagnostics.
Figure 1.2 : Représentation du concept du système échographique portatif sans fil
1.2 Objectifs de recherche
Cette thèse porte sur la conception d’une nouvelle architecture d’un système d’imagerie médicale
par ultrasons qui permet d’éliminer le câble qui relie la sonde au système et d’un processeur dédié
aux traitements de signaux ultrasoniques en temps réel qui facilite l’intégration du système à
l’intérieur de la sonde. De plus, la réalisation d’un prototype fonctionnel du système proposé est
également l’un des objectifs de recherche. Visant à stimuler la création d’un nouveau type
d’appareils d’imagerie médicale par ultrasons, les solutions explorées et proposées devront
permettre d’atteindre les objectifs suivants :
4
 Des dimensions permettant la portabilité du système dans une main;
 Une consommation réduite permettant ainsi une bonne autonomie du système en
plus de soutenir l’objectif de portabilité;
 La possibilité d’éliminer le câble en permettant d’échanger les données à un débit
acceptable pour un transfert sans fil (< 10 Mb/s);
 Une flexibilité de configuration qui permet au système de s’adapter aux différentes
sondes utilisées en imagerie médicale par ultrasons;
 Un prétraitement précis qui permet d’utiliser la résolution maximale du faisceau
ultrasonique.
Pour permettre la portabilité du système d’imagerie médicale par ultrasons, l’ordre de grandeur
des dimensions maximales est d’environ 1000 cm3
: 20 cm de longueur, 10 cm de largeur et 5 cm
d’épaisseur si un afficheur est relié directement au système. Si le câble de la sonde est remplacé
pour un lien sans fil, l’afficheur peut être intégré à un module séparé et les dimensions limites de
la section du système qui doit être tenue dans une main peuvent être réduites et comparables à
celles des sondes actuellement disponibles (~ 15 cm x 7 cm x 3 cm). L’espace occupé par la
batterie ainsi que le poids qui lui est associé ont un impact direct sur la portabilité. Un maximum
de quatre piles de type AA ou l’équivalent constitueraient une limite adéquate. En effet, ces
quatre piles occupent un volume d’environ 50 cm3
, pèsent près de 92 g et offrent plus de 2000
mAh à une tension de 6 V. Le faible pourcentage du volume accordé aux piles par rapport au
volume total (de 5% à 15%) est justifié par l’espace susceptible d’être déjà occupé par les autres
composants du système (Figure 3.4). Selon la plupart des applications, l’autonomie du système
devrait permettre d’opérer en mode continues durant deux à quatre heures. Par conséquent, il
serait souhaitable que la puissance totale consommée par le système en mode d’opération soit
inférieure à environ 3 W. À titre indicatif, 1 W de cette puissance pourrait être réservé pour la
section analogique et mixte; 1 W, pour la section numérique; et 1 W pour l’afficheur ou le
transmetteur sans-fil. Si le système utilise un balayage mécanique, environ 500 mW pourraient
être retranchés du budget alloué à la section numérique pour être redistribués vers la section
analogique pour alimenter le moteur qui effectue le balayage mécanique.
5
Les deux derniers objectifs, flexibilité et précision, ciblent spécifiquement les caractéristiques du
processeur dédié aux traitements de signaux ultrasoniques. En effet, l’architecture doit pouvoir
s’adapter, grâce à des paramètres de configuration, aux différentes caractéristiques des sondes et
produire des images similaires à celles produites par des systèmes conventionnels. L’architecture
du processeur dédié devra pouvoir être configurée pour supporter la plage de fréquence utilisée
couramment en imagerie médicale par ultrason, soit de 1 MHz à 9 MHz. De plus, ce processeur
doit présenter un taux de rafraichissement minimum de 10 images par seconde pour cette même
plage de fréquence et une profondeur balayée de 15 cm. Il est important de souligner que le
système doit traiter en temps réel les données ultrasoniques échantillonnées.
Finalement, puisque ce travail s’inscrit dans le cadre du projet de conception d’un système
échographique sans fil, l’architecture du processeur dédié aux traitements de signaux
ultrasoniques en temps réel est destinée à être implémentée sur un ASIC. En effet, le prototype
fonctionnel du système a pour objectif la validation et la comparaison expérimentales des divers
choix d’algorithmes, d’architectures et d’implémentations. Il est donc important de conserver à
l’esprit qu’une implémentation sur ASIC est une avenue qui est envisagée dans le cadre du projet
d’ensemble. En effet, une telle implémentation permettrait d’améliorer la consommation, les
dimensions et les performances par rapport au support utilisé pour le prototypage (FPGA).
1.3 Contributions
Telles que soulignées dans les articles de journaux publiés [23],[24], les contributions de cette
recherche portent sur les implémentations originales d’algorithmes de traitement et sur les
avancements technologiques obtenus grâce à l’architecture matérielle proposée. Ces contributions
découlent des travaux effectués en vue de trouver une solution à l’intégration d’un système de
prétraitement de signaux ultrasoniques à l’intérieur de la sonde.
La première contribution est la méthode proposée pour concevoir des filtres de Hilbert d’ordre
plus bas que celui habituellement requis pour effectuer la démodulation en quadrature [23]. Cette
méthode permet de réduire la complexité matérielle tout en préservant la précision lorsqu’une
Transformée de Hilbert (HT) est utilisée pour effectuer le traitement numérique d’un signal.
6
La deuxième contribution se distingue par son originalité en utilisant tous les échantillons plutôt
qu’en effectuant une décimation conventionnelle [24]. En plus de réduire le niveau de bruit, cette
méthode s’adapte à la zone d’image à afficher en combinant les échantillons avec l’information
provenant du convertisseur de balayage. Ainsi, même en réalisant des zooms, il n’y a pas de
valeur à interpoler entre les échantillons d’une même ligne balayée. Puisqu’il n’y a pas
d’interpolation à effectuer (sur la ligne), les valeurs de l’intensité des pixels sont donc plus
précises que celles qui auraient été calculées par interpolation.
La troisième contribution concerne la solution proposée pour effectuer la fonction racine-carrée.
Reposant sur une approximation linéaire par morceau, l’architecture se différentie par sa très
faible complexité matérielle, sa latence (deux périodes d’horloge) et son débit (une période
d’horloge) [23]. Comparativement aux méthodes traditionnelles, sa petite taille et la fréquence
d’horloge système plus basse permettent de réduire, respectivement, les consommations statique
et dynamique.
L’architecture matérielle proposée du cœur de traitement permet de rallier la flexibilité du logiciel
et l’efficacité énergétique du matériel. De plus, cette architecture se démarque par sa faible
complexité matérielle et son potentiel de débit de traitement en temps réel très élevé [24]. En
effet, le ratio performance/consommation du cœur de traitement, même implémenté sur un
FPGA, est nettement supérieur aux implémentations habituelles basées sur logiciels. Cette
solution constitue la quatrième contribution de cette thèse.
L’architecture matérielle complète du processeur dédié au prétraitement de signaux ultrasoniques
en temps réel [24] constitue la cinquième contribution. En effet, les résultats de cette approche
matérielle ouvrent la voie à l’avancement d’une nouvelle génération d’équipement d’imagerie
médicale par ultrason.
Finalement, le prototype fonctionnel [23], [24] du système constitue une contribution en soi. Ce
prototype a permis de tirer des leçons lors de sa réalisation et de l’intégration du système. De
7
plus, le prototype a permis d’enrichir la validation en permettant d’obtenir des résultats
expérimentaux.
1.4 Organisation de la thèse
Le deuxième chapitre fait un survol des concepts fondamentaux de l’imagerie par ultrasons afin
de souligner les caractéristiques physiques intrinsèques de l’ultrason. Les principes de base y sont
exposés ainsi que les critères de performance des systèmes d’imagerie médicale par ultrasons.
Pour situer le projet dans le contexte actuel, évaluer les caractéristiques de la technologie
d’imagerie médicale par ultrasons et formuler des recommandations, une revue de la littérature
est établie dans le troisième chapitre.
Le chapitre suivant présente l’architecture globale du système proposé ainsi que le prototype qui
sert de plateforme de validation pour les travaux exécutés au cours de cette thèse. Les
architectures du canal de prétraitement analogique, du réseau d’alimentation et du convertisseur
de balayage y sont détaillées.
Pour obtenir les informations nécessaires pour former une image, les signaux ultrasoniques
doivent être démodulés afin d’en extraire l’enveloppe (détecteur d’enveloppe). Il est à noter que
cette tâche constitue l’un des principaux traitements à effectuer. Par conséquent, le démodulateur
proposé pour traiter en temps réel le signal ultrasonique est présenté au chapitre cinq. Ce chapitre
débute par une introduction de la base mathématique de la démodulation en quadrature basée sur
une transformée de Hilbert. Ensuite, l’architecture matérielle proposée pour effectuer la
démodulation de signaux ultrasoniques ainsi que son implémentation sont décrits. Finalement,
une analyse des résultats expérimentaux est présentée.
Le sixième chapitre présente le processeur ultrasonique proposé ainsi que son cœur de
prétraitement matériel. La première section de ce chapitre est consacrée à la description de
8
l’architecture du processeur de prétraitement. Les dernières sections portent sur l’implémentation,
la validation et les résultats expérimentaux obtenus.
Finalement, pour apprécier les contributions du travail effectué au cours de cette thèse, la
conclusion présente une analyse globale du projet. Également, fondées sur les résultats obtenus et
notre prévision des défis à venir, des recommandations portant sur les travaux futurs à
entreprendre sont énoncées.
9
CHAPITRE 2 IMAGERIE MÉDICALE PAR ULTRASONS
Ce chapitre porte sur les concepts fondamentaux de l’imagerie par ultrasons. Dans un premier
temps, un bref résumé des techniques d’imagerie médicale répandues est exposé. Ensuite, les
principes de base de l’ultrason sont abordés pour souligner les paramètres physiques importants.
Finalement, une brève discussion portant sur les dangers des ultrasons et sur les critères de
performance est présentée.
2.1 Imagerie médicale
L’imagerie médicale est un procédé par lequel il est possible d’obtenir une représentation visuelle
de l’intérieur du corps sans avoir à pratiquer une opération et qui présente des informations sur la
structure ou sur le fonctionnement des organes. L’imagerie structurelle permet d’obtenir de
l’information sur l’anatomie des organes telle que la taille et la forme, et permet également de
déceler une lésion. D’un autre côté, l’imagerie fonctionnelle permet d’obtenir de l’information
sur le fonctionnement métabolique ou physiologique des organes. Les technologies d’imagerie
structurelles les plus répandus sont les rayons X, la résonnance magnétique, les ultrasons,
l’optique et la médecine nucléaire. D’autre part, les technologies d’imagerie fonctionnelle
utilisent les techniques électrophysiologiques, thermographiques et également les techniques de la
médecine nucléaire. Finalement, il est important de mentionner qu’il est possible de combiner
plusieurs techniques complémentaires afin de pouvoir générer des images et ainsi obtenir toutes
les informations souhaitées.
2.1.1 Les rayons X
Les rayons X sont couramment utilisés en radiologie, en tomodensitométrie (TDM) et en
angiographie [1]-[5]. La radiologie permet d’obtenir une image des poumons, de l’abdomen, du
squelette et des seins. La TDM, aussi appelée scanographe ou CT-scan, est une technique qui
consiste à mesurer l’absorption des rayons X par les tissus selon plusieurs coupes et permet de
visualiser l’ensemble du corps (Scanner X, tomographie) et de mesurer la densité osseuse
(Scanner DEXA). L’angiographie est utilisée pour obtenir des images du système vasculaire à
l’aide d’agent de contraste. Il est à noter que les rayons X sont dangereux puisqu’ils sont ionisants
et peuvent modifier l’ADN d’une cellule en phase de mitose; ce qui peut provoquer l’apparition
d’un cancer.
10
2.1.2 La résonnance magnétique
L’imagerie par résonnance magnétique (IRM) permet d’explorer les tissus mous, notamment le
cerveau, et est basée sur le principe de la résonnance magnétique nucléaire (RMN) [1]-[5].
L’IRM présente un meilleur contraste que la TDM mais ne fournit pas d’information sur les os
puisque les atomes qui constituent les os sont moins sensibles aux champs magnétiques. L’IRM
est considérée comme une technique qui ne présente aucun risque sur l’organisme. Toutefois,
puisque cette technique utilise un champ magnétique intense, tout objet ferromagnétique devient
dangereux.
La magnétoencéphalographie (MEG) et la magnétocardiographie sont deux techniques analogues
à l’IRM [1]-[5]. Contrairement à l’IRM, ces techniques ne requièrent pas de champ magnétique
intense. Ce sont des faibles champs magnétiques induits par l’activité électrique des neurones du
cerveau ou des cellules du muscle cardiaque qui sont mesurés par la MEG et la
magnétocardiographie. Pour ces deux techniques, les objets ferromagnétiques ne présentent donc
aucun risque.
2.1.3 Les ultrasons
L’échographie utilise les ultrasons pour obtenir de l’information sur les tissus mous tels que
l’abdomen, le cœur, les seins, les muscles et les tendons [1]-[12]. De plus, l’effet Doppler peut
être utilisé afin d’obtenir de l’information sur la circulation sanguine. Finalement, en utilisant le
module de Young, l’élastographie permet de représenter l’élasticité des tissus, même profonds; ce
qui permet, par exemple, de détecter un carcinome dans un sein ou d’évaluer une fibrose du foie.
2.1.4 L’optique
Deux principales techniques de tomographie optique cohérente (OCT - Optical Coherent
Tomography) permettent d’obtenir une image en trois dimensions des tissus en utilisant
l’information provenant des interférences optiques des tissus analysés [16]. La méthode OCT
traditionnelle utilise un laser et permet d’obtenir une coupe d’un tissu selon une résolution de 10
à 15 µm. D’un autre côté, la méthode OCT plein champ, utilise une source lumineuse blanche et
11
permet d’observer l’organisation cellulaire grâce à sa résolution de 1 µm. Il est à noter que les
techniques d’OCT sont sans danger.
2.1.5 La médecine nucléaire
La médecine nucléaire repose sur l’utilisation de traceurs radioactifs [1]-[4]. Les traceurs sont
composés d’une molécule vectrice et d’un marqueur isotopiques radioactif. La molécule vectrice
est sélective et est choisie en fonction de la structure sur laquelle elle se fixe (organe, secteur
liquidien, lésion). Le marqueur isotopiques radioactif agit en tant qu’émetteur et transmet, lorsque
capté, de l’information sur sa localisation. La Tomographie d’émission monophotonique (TEMP
ou SPECT) utilise des marqueurs qui émettent des photons gamma pour produire une
scintigraphie. D’un autre côté, la tomographie à émission de positron (TEP ou PET) est une
technique similaire au TEMP, toutefois elle utilise un autre type de marqueur. Ce dernier émet
des positons (ou positron) et la molécule utilisée à titre de marqueur (qui contient l’isotope
radioactif) est habituellement un sucre; ce qui permet de visualiser les cellules à fort métabolisme,
tel que les cellules néoplasiques et neuronales.
2.1.6 L’électrophysiologie
L’électrophysiologie permet d’étudier l’activité nerveuse des tissus causée par les phénomènes
électrochimiques qui se produisent principalement dans les neurones et les fibres musculaires [1].
À l’aide d’électrodes, il est possible de mesurer les propriétés électriques et de mesurer les
courants électriques. Selon la méthode utilisée, il est possible d’accéder au potentiel électrique
interne à la cellule ou d’enregistrer la propagation des potentiels d’action. Finalement, par
application directe d’électrodes sur la peau, il est également possible de mesurer le champ
électrique d’un groupe de cellules tel que le cœur (électrocardiogramme ECG) ou le cerveau
(électroencéphalogramme EEG).
2.1.7 La thermographie
La thermographie est une technique qui permet d’obtenir une image thermique dans un domaine
spectral de l’infrarouge [17]. Cette technique permet d’obtenir des informations sur l’état
physiologique de la peau et des tissus sous-jacents et est habituellement utilisée pour observer la
vascularisation pour les cas de brûlures, greffe, ischémie, angiogenèse ou angioplastie.
12
2.2 Principes de bases de l’ultrason
2.2.1 Signaux ultrasoniques
Les signaux ultrasoniques sont des ondes de pression mécanique de fréquences supérieures à
celles qui sont audibles par l’humain. Dans un contexte d’imagerie, cette bande de fréquences se
situe entre 22 kHz et 1 GHz et couvre une grande variété d’applications. En effet, la plage de
fréquences située entre 22 kHz et 300 kHz est principalement utilisée par les sonars et par les
animaux (écholocalisation); la plage entre 800 kHz et 15 MHz, par les applications d’imagerie
médicale et industrielle non destructive; finalement, la plage entre 12 MHz et 1 GHz, par la
microscopie acoustique.
Les signaux ultrasoniques sont habituellement générés par un transducteur composé d’un élément
piézoélectrique qui permet de transformer les ondes mécaniques en signaux électriques et vice-
versa. Lorsqu’une variation de tension est appliquée aux bornes d’un cristal piézoélectrique, ce
dernier se met à vibrer et produit une onde de pression. Inversement, lorsqu’un cristal
piézoélectrique est exposé à une onde de pression, il se déforme et produit un signal électrique.
En raison de ses propriétés largement supérieures aux cristaux naturels tels que le quartz, les
céramiques synthétiques qui possèdent une structure cristalline de type pérovskite telle que les
Titano-Zirconate de Plomb ─ Pb(Zrx,Ti1-x)O3 (PZT) sont devenues les matériaux piézoélectriques
les plus utilisés aujourd’hui dans l’industrie [18]. Les caractéristiques physiques du matériel,
l’alignement du cristal ainsi que la géométrie de l’élément ont un impact important. Par exemple,
ce sont ces paramètres qui déterminent la fréquence de résonance, la largeur de bande, la
sensibilité, l’impédance acoustique du piézoélectrique ainsi que l’intensité et la température
maximale permise.
Les matériaux piézoélectriques possèdent une fréquence naturelle de résonance et la méthode la
plus efficace pour produire des ultrasons est d’appliquer aux électrodes un signal électrique de
même fréquence. Pour toutes les autres fréquences, la production d’ultrasons sera très faible.
13
Autrement dit, chaque piézoélectrique est conçu pour une fréquence spécifique. Tel que présenté
par l’équation (2.1), les paramètres qui déterminent cette fréquence naturelle sont l’épaisseur du
piézoélectrique (d) et la vitesse de propagation (c) de l’onde à l’intérieur du piézoélectrique.
 
2
c
f Hz
d
 (2.1)
D’autre part, constitués à environ 80 % d’eau, les tissus organiques sont souvent appelés « semi-
liquides » ou « semi-solides ». En effet, comme un liquide, ils sont capables de modifier leur
forme tout en préservant leur volume lorsque soumis à un stress. De plus, comme un solide, ils
peuvent conserver leur forme et supporter à la fois la propagation d’ondes longitudinales et de
cisaillement. Toutefois, puisque les tissus organiques tels que le foie, le cœur, les muscles, le gras
et la rate ne supportent pas un cisaillement de grande amplitude, leur comportement peut être
assimilé à celui d’un fluide. Ainsi, la vitesse de propagation de l’onde dans ce type de milieu peut
être approximée par :
 
1
o
m
c
s
K
 (2.2)
où ρo est la masse volumique moyenne du milieu en kg/m3
et K, le coefficient adiabatique
d’incompressibilité du milieu en Pa ou N/m3
.
La vitesse de propagation de l’onde varie en fonction du milieu dans lequel elle évolue.
Toutefois, puisque la masse volumique moyenne et la valeur du coefficient d’incompressibilité
sont pratiquement identiques pour tous les tissus organiques, à l’exception des os, ce paramètre
est pratiquement constant et vaut 1540 m/s ±6 %. À noter que la valeur du coefficient
d’incompressibilité pour tous les tissus organiques, à l’exception des os, est près de celle de l’eau
et se situe entre 2 et 3 x 109
Pa.
D’autre part, la vitesse de propagation ne dépend pas beaucoup de la fréquence (à l’exception des
os). En effet, tel qu’illustré à la Figure 2.1, une faible variation est présente sur toute la bande de
fréquences utilisée pour l’imagerie médicale. Par contre, la température influence la vitesse de
propagation. Le coefficient de température est positif pour les tissus non adipeux et négatif pour
14
les tissus adipeux (Figure 2.2). Il est à noter que les tissus adipeux sont les seuls tissus organiques
à posséder une vitesse de propagation inférieure à celle de l’eau à l’exception des poumons qui en
possèdent une comparable à celle de l’air.
Figure 2.1: Vitesse de propagation des ondes ultrasoniques pour différents milieux (tiré de [7])
Puisque la vitesse de propagation ne varie presque pas pour l’ensemble des tissus organiques, la
longueur de l’onde pour une fréquence donnée est pratiquement la même pour tous les tissus.
Étant donné que la plage de fréquences utilisée en imagerie médicale est de 800 kHz à 15 MHz,
la longueur des ondes utilisées varie donc de 1,9 mm à 0,1 mm, respectivement.
 
c
m
f
  (2.3)
15
La pression est la mesure la plus directe et la plus utile pour la plupart des applications puisque
c’est une variable physique primaire et que c’est cette variable qui est mesurée avec les
transducteurs. La pression totale à la position r au temps t est définie comme :
     
2
, , ou
T o
N
p r t p p r t Pa
m
  (2.4)
Où p(r,t) est la pression instantanée et po, la pression d’équilibre (ou initiale). Pareillement, la
densité totale est :
     
2
, ,
T o
kg
r t r t
m
  
  (2.5)
Où ρ(r,t) est la densité instantanée et ρo, la densité à l’équilibre (ou initiale). Soit ξ, le
déplacement des particules, alors la vélocité du milieu qui représente le taux de variation
instantané de ce déplacement des particules est :
   
r,t = m
s
t




(2.6)
Finalement, l’intensité de l’onde, qui décrit l’énergie qui circule par unité de temps et par unité de
surface est reliée à la pression et à la vélocité. Le terme de pression décrit l’énergie potentielle et
celui de la vélocité, l’énergie cinétique contenue dans le milieu.
 
2
2
2
2
2
c p W
I
m
c


 
 
 
 
(2.7)
Dans le cas d’une onde plane (
p
c


 ),
 
2
W
I p
m

 (2.8)
16
Figure 2.2: Vitesse de propagation des ondes ultrasoniques pour différentes températures et
différents tissus organiques (tiré de [7])
2.2.2 Propagation des ondes de pression
Les ondes de pression mécanique ne peuvent se propager que dans un milieu suffisamment dense.
La propagation de l’onde s’effectue par compression et raréfaction des particules qui forment le
milieu. Le paramètre qui est utilisé pour exprimer les propriétés du milieu est l’impédance
acoustique, Zo (équation (2.9)), et est défini comme étant la résistance d’un milieu à être perturbé
par une onde de pression. Ce paramètre ne doit pas être confondu avec l’impédance
caractéristique spécifique, Zsp (équation (2.10)), un autre paramètre important qui est comparable
à l’impédance d’un circuit électrique. Définie pour une position spatiale donnée, l’impédance
caractéristique spécifique est habituellement un nombre complexe et dépend du type d’onde et
17
des conditions de propagation. Elle est constituée à partir de deux vecteurs perpendiculaires; soit
la pression acoustique, p, et la vélocité, µ. À noter que la vélocité représente la vitesse de
déplacement des particules qui composent le milieu. De plus, dans le cas d’une onde plane
parfaite, l’impédance acoustique équivaut à l’impédance caractéristique spécifique. Le Tableau
2.1 présente quelques exemples d’impédance acoustique pour différents milieux.
 
3 ou
o
o o
N s Pa s
Z c
m
m
K


    (2.9)
 
3
=Z ou
sp
p N s Pa s
Z
m
m

   (2.10)
Les trajectoires des ondes transmises et réfléchies sont régies de manière similaire à celle de la
lumière qui rencontre un miroir ou une interface entre deux milieux. En effet, selon l’angle
incident (i) de l’onde transmise à une interface entre deux milieux, il peut y avoir une réflexion
totale ou une transmission totale. De plus, selon la nature des milieux et les caractéristiques de
l’interface, deux types de réflexion acoustique sont possibles.
Le premier type, la réflexion spéculaire (Figure 2.3a), est causé par une interface relativement
grande et lisse. Ce type de réflexion est très dépendant de l’angle incident et est décrit par les
équations de réflectivité. Comme la lumière, l’ultrason obéit à la loi de Snells-Descartes régie par
l’équation (2.11).
1 1
2 2
et
i
i r
t
sin
sin
  
 
  
   (2.11)
La réflexion spéculaire se produit principalement entre l’élément piézoélectrique et la peau ainsi
qu’à l’interface entre deux types de tissus possédant un rapport d’impédances acoustiques élevé.
En effet, c’est l’impédance acoustique des milieux qui détermine la portion de l’onde qui est
transmise et réfléchie. En utilisant le principe de continuité à la frontière pour la vélocité et la
pression, il est possible de trouver le coefficient de réflectivité (R) qui décrit la proportion de
l’onde de pression qui est réfléchie par rapport à l’intensité de l’onde incidente :
2 1
2 1
i t
r
i i t
Z cos Z cos
p
R
p Z cos Z cos
 
 

 

(2.12)
18
Tableau 2.1 : Exemples d’impédances acoustiques, de vélocités et de densité [7], [10], [25], [26].
Milieu
Température
(o
C)
Impédance
acoustique
(x 106
Ns/m3
)
Vélocité
moyenne
(m/s)
Densité
(g/m3
)
Air 20 412 x 10-6
342 1,20 x 10-3
Gras 37 1,33 1450 0,92
Muscle humain 37 1,7 1585 1,07
Cerveau 37 1.56 1530 1,02
Sang 37 1.61 1570 1,052
Os 37 7,68 4040 1,9
Eau 37 1,52 1525 1,00
Tissus humain 37 1,58 - 1,70 1490 - 1610 1.06
Moyenne tissus humain 37 1,63 1540 1,06
Dans le même ordre d’idée, le coefficient de transmission (T) qui décrit la portion de l’onde qui
est transmise relativement à l’onde incidente est donné par :
2
2 1
2
t t
i i t
p Z cos
T
p Z cos Z cos

 
 

(2.13)
Avec un angle incident normal, i = t = 0, les coefficients deviennent :
2 1
2 1
Z Z
R
Z Z



(2.14)
2
2 1
2Z
T
Z Z


(2.15)
À partir des équations (2.14) et (2.15), il est possible d’établir que si Z1=Z2, alors il y aura une
transmission complète (T=1). D’un autre côté, il y aura une réflexion totale (R=1) si Z1<<Z2.
Puisque les tissus organiques ont une impédance très faible par rapport à l’élément
piézoélectrique, une couche d’adaptation d’impédance doit être utilisée pour maximiser le
coefficient de transmission. Également, puisque l’air possède une impédance acoustique plus
faible que les tissus organiques, un gel acoustique doit être utilisé entre la sonde et la peau afin
d’éliminer toutes les bulles d’air. D’autre part, pour l’imagerie médicale par ultrasons, la
réfraction n’a pas un grand effet (i ≈ t) puisque la vélocité est presque la même pour les divers
tissus biologiques (~1540 m/s). Toutefois, entre l’élément piézoélectrique et la surface de la peau,
la réfraction n’est pas négligeable. En effet, lorsque le faisceau incident et la surface de la peau ne
19
sont pas perpendiculaires, une réfraction se produit. De plus, avec l’utilisation de gel entre la
sonde et la peau, l’onde doit traverser deux interfaces (sonde-gel et gel-peau). Il est à noter que
pour réduire cet effet, la vélocité de propagation dans le gel doit être la même que celle dans la
peau, soit environ 1540 m/s.
a) b) c)
Figure 2.3: Propagation des signaux ultrasoniques : a) Réflexion spéculaire; b) Réflexion diffuse
causée par une interface irrégulière; c) Réflexion diffuse causée par un milieu hétérogène
Le deuxième type de réflexion est celui de la réflexion diffuse et est produit par une interface qui
présente des irrégularités (Figure 2.3b) ou par un milieu hétérogène composé de particules qui
sont de taille comparable à la longueur d’onde acoustique λ (Figure 2.3c). L’intensité de l’écho
obtenu par diffusion est plus faible que celle obtenue par réflexion. De plus, la diffusion est
moins dépendante de l’angle incident et la description mathématique implique l’utilisation de la
densité de probabilité selon la loi de Rayleigh (équation (2.16)). Puisque les tissus organiques
sont hétérogènes, le principal mode de propagation dans les tissus est donc la diffusion.

2
2 2
( , ) exp ,pour 0,
2
x x
f x x

 
 

  

  
 
(2.16)
2.2.3 Atténuation des ondes de pression
Au cours de sa propagation, l’intensité de l’onde s’atténue exponentiellement. Les causes de cette
atténuation sont multiples : absorption de l’énergie de l’onde par le milieu, réflexions et
réfractions. Il est à noter que l’absorption est causée par la conversion de l’énergie de l’onde en
20
chaleur et est donc responsable de l’augmentation de température du milieu. D’un autre côté, les
réflexions et réfractions dispersent l’énergie du faisceau sur une plus grande surface. Pour les
milieux homogènes, seule l’absorption occasionne l’atténuation. D’autre part, pour les milieux
hétérogènes, les réflexions et réfractions contribuent également à l’atténuation de l’onde lors de
sa propagation.
Le coefficient d’atténuation β représente la proportion de changement de l’intensité par unité de
distance parcourue par le faisceau et est donné par :
 
-1
m
I
I x




(2.17)
Similairement, le coefficient d’atténuation α représente la proportion de changement d’une
amplitude (Q) telle que la pression (P) ou la vélocité (U) par unité de distance parcourue par le
faisceau et est donné par :
 
-1
m
Q
Q x




(2.18)
L’expression qui décrit l’atténuation de l’intensité au cours de sa propagation est :
x
x o
I I e 

 (2.19)
où Io est l’intensité initiale et Ix, l’intensité au point x.
Pareillement, pour un paramètre d’amplitude (pression, vélocité), l’amplitude au point x est :
x
x o
Q Q e 

 (2.20)
où Qo est l’amplitude initiale et Qx, l’amplitude au point x.
De plus, puisque
2
x x x x
o o o o
I P U Q
I P U Q
 
   
 
(2.21)
21
Alors,
2
 
 (2.22)
À noter que les coefficients d’atténuation de l’intensité et des amplitudes sont habituellement
représentés en décibel (dB) par unité de distance; ce qui permet de représenter le niveau
d’atténuation linéairement en dB par rapport à la distance parcourue par l’onde. Puisque l’onde
parcoure une distance de quelques centimètres avant d’être complètement atténuée, la notation de
l’unité de distance est en centimètre plutôt qu’en mètre. De plus, il est intéressant de souligner
qu’avec cette représentation, les deux coefficients sont égaux. En effet, les équations (2.17) et
(2.18) deviennent :
   
1 10 10 10
1 1
10log 10log 10 log 4.343
x
x
dB cm
o
I
e e
x I x

  


 
   
     
 
   
   
 
(2.23)
Et
   
1 10 10 10
1 1
20log 20log 20 log 8.686
x
x
dB cm
o
Q
e e
x Q x

  


 
   
     
 
   
   
 
(2.24)
D’autre part, l’atténuation des ultrasons augmente avec la fréquence. Pour la plupart des tissus
organiques, l’augmentation du coefficient d’atténuation est directement proportionnelle (n=1) à la
fréquence. La Figure 2.4 illustre cette dépendance en fréquence de différents tissus organiques.
1 1 1
n
dB cm dB cm MHz
f
 
  
 (2.25)
De plus, il est à noter que la température affecte également l’atténuation. Le facteur associé à la
température est dépendant de la fréquence; il est habituellement positif pour les basses fréquences
et négatif pour les fréquences plus élevées. Toutefois, puisque la plupart des tissus organiques
présente une dépendance fréquentielle linéaire et que la température y est pratiquement constante
(aux alentours de 36 0
C), le coefficient d’atténuation qui permet de qualifier le milieu est
habituellement donné en dB/cm/MHz. Le Tableau 2.2 présente quelques exemples de
coefficients. Finalement, la Figure 2.5 illustre des exemples de l’effet de l’atténuation sur le
signal ultrasonique pour différents milieux et la Figure 2.6, des exemples de l’effet de
l’atténuation pour différentes fréquences.
22
Figure 2.4 : Coefficient d’atténuation de différents tissus en fonction de la fréquence (tiré de [7])
Tableau 2.2 : Exemple de coefficient d’atténuation pour différents tissus organiques [7], [10],
[25], [26].
Tissus poumons os rein foie gras Sang cerveau
Eau
(20 o
C)
1 1
dB cm MHz
   41 20 1 0,94 0,63 0,18 0,85 0,0022
Dépendance
à la fréquence
f-1
f2
f2
~f ~f f1.3
~f f2
23
a) b)
Figure 2.5 : Effet de l’atténuation selon le milieu : a) Milieu moins absorbant; b) Milieu plus
absorbant
a) b)
Figure 2.6 : Effet de l’atténuation selon la fréquence : a) Fréquence basse (onde longue); b)
Fréquence élevée (onde courte)
2.2.4 Paramètres pour l’imagerie médicale par ultrasons
La représentation des paramètres de la distribution du champ acoustique, comme la pression,
l’intensité, la vélocité, par une fonction qui dépend de l’espace et du temps ainsi que la sensibilité
spatiale et temporelle du récepteur sont les facteurs sur lesquels repose l’imagerie médicale par
ultrasons. Par ailleurs, les paramètres fondamentaux qui caractérisent la propagation de l’onde
sont 1 1
, et
o dB cm MHz
K
    . Toutefois, il est très difficile, voire impossible, pour un système
d’imagerie médicale d’utiliser la véritable distribution spatio-temporelle de ces paramètres. En
effet, les informations sur la structure et la fonction des tissus présentées par les systèmes
0 1 2 3 4
-1
-0.8
-0.6
-0.4
-0.2
0
0.2
0.4
0.6
0.8
1
Période (T)
Amplitude
normalisée
0 1 2 3 4
-1
-0.5
0
0.5
1
Période (T)
Amplitude
normalisée
0 5 10 15
-1
-0.5
0
0.5
1
Pénétration (mm)
Amplitude
normalisée
0 5 10 15
-1
-0.5
0
0.5
1
Pénétration (mm)
Amplitude
normalisée
24
d’imagerie par ultrasons reposent habituellement sur une représentation indirecte, parfois même
qualitative de ces paramètres.
D’autre part, la Figure 2.7 illustre l’amplitude à la position x d’une onde de pression plane
circulaire provenant d’une source de rayon a qui émet une onde continue sinusoïdale. Malgré que
cette solution ne puisse pas toujours être appliquée à une situation réelle, il est intéressant de
remarquer qu’il existe deux principales zones : le champ proche et le champ lointain. De plus,
avec la représentation de la forme du faisceau, cette illustration introduit bien la notion de
résolution spatiale; paramètre qui caractérise la sensibilité spatiale d’un système et représente
l’habileté de ce dernier à distinguer deux objets adjacents. Par définition, les résolutions dans les
axes parallèle et perpendiculaire au déplacement de l’onde sont respectivement la résolution
axiale (Figure 2.8a) et la résolution latérale (Figure 2.8b). Généralement, il existe un point focal,
situé dans le champ lointain, où le système possède une résolution maximale. À partir de ce point,
plus on s’éloigne de la source, plus le faisceau s’évase (directivité moins bonne); plus on se
rapproche de la source, plus les lobes secondaires s’amplifient.
Figure 2.7 : Solutions de Fraunhofer et de Fresnel pour l’amplitude à la position x d’une onde de
pression plane circulaire provenant d’une source de rayon a qui émet une onde continue
sinusoïdale (tiré de [5])
25
a) b)
Figure 2.8 : Résolutions : a) Axiale; b) Latérale
2.2.5 Imagerie médicale par ultrasons
Pour les applications en ultrasons, il existe deux modes de transmission (Figure 2.9): le mode
continu et le mode pulsé. Le mode continu consiste à émettre une onde continue composée d’une
seule fréquence. Le mode pulsé, quant à lui, consiste à émettre une courte impulsion; l’onde ainsi
générée sera composée d’une fondamentale et de la somme de ses harmoniques. Le mode continu
est utilisé habituellement pour des applications de type Doppler tandis que le mode pulsé, sert
pour l’imagerie et pour les applications Doppler.
a) b)
Figure 2.9 : Modes de transmission des signaux ultrasonique : a) Pulsé; b) Continu
En mode pulsé, plus l’impulsion est de courte durée, plus la fréquence de la fondamentale est
élevée, alors, meilleure sera la résolution axiale (en considérant que la fréquence de la
fondamentale correspond à la fréquence de résonance de l’élément piézoélectrique). Ainsi, les
petits éléments seront mieux définis et plus visibles. Toutefois, puisque l’atténuation du signal
ultrasonique augmente avec la fréquence, il est nécessaire d’utiliser une fréquence relativement
basse, afin d’obtenir une pénétration suffisamment grande. Le choix de la fréquence est donc un
compromis entre la pénétration et la résolution axiale. Une fréquence trop élevée n’offre pas une
26
pénétration très profonde tandis qu’une fréquence basse limite la résolution. Par conséquent, les
fréquences élevées doivent être utilisées pour examiner un petit organe qui se trouve près de la
surface de la peau alors que les fréquences basses doivent être utilisées pour les plus gros organes
qui sont plus profonds. Le Tableau 2.3 présente des exemples de fréquences utilisées pour
quelques organes. Finalement, puisque l’atténuation augmente proportionnellement avec la
fréquence de l’onde ultrasonique, l’atténuation précoce des fréquences élevées pour le mode
pulsé peut entrainer une distorsion de l’onde.
Tableau 2.3 : Fréquences et longueurs d’onde utilisées pour l’imagerie médicale par ultrasons
Site Fréquence (MHz) Longueur d’onde1
(mm)
Fœtus chez la femme enceinte 1 1,5
Abdomen adulte 3 0,5
Abdomen enfant 5 0,3
Yeux 10 0,15
Peau 20 0,075
1 : c = 1540 m/s pour les tissus organiques
Une autre caractéristique importante de l’imagerie médicale par ultrasons est la technique utilisée
pour déplacer le faisceau ultrasonique afin de balayer la zone d’intérêt. Pour ce faire, les
balayages mécaniques ou électroniques sont les deux techniques utilisées. Pour le balayage
mécanique, le faisceau qui est produit par le transducteur est habituellement produit par un seul
élément piézoélectrique qui est fixé à un moteur. Pour le balayage électronique, le faisceau est
produit par un réseau d’éléments piézoélectriques plus ou moins grand, de façon similaire à un
réseau d’antennes avec un contrôle de phase.
L’avantage du balayage mécanique est sa simplicité d’opération. Toutefois, pour offrir une
résolution latérale maximale, une lentille focale fixe doit être utilisée (Figure 2.10a); ce qui
implique que chaque transducteur est optimisé pour une profondeur donnée. Dans le cas du
balayage électronique, il est possible d’opérer le réseau afin d’obtenir une mise au point
dynamique (Figure 2.10b) et donc d’obtenir une résolution latérale maximale sur toute la
profondeur.
27
a) b)
Figure 2.10 : Résolution latérale : a) Lentille focale; b) Mise au point dynamique
Pour les deux techniques de balayage, il est possible d’effectuer deux types de balayage (Figure
2.11): soit sectoriel, soit linéaire. Le terme sectoriel réfère au type de balayage qui produit une
image angulaire (habituellement 60o
, 90o
ou 1800
); et linéaire, au type de balayage qui produit
une image rectangulaire. Puisque les lignes résultantes d’un balayage sectoriel s’éloignent les
unes des autres au fur et à mesure de la progression, la résolution latérale décroit rapidement avec
la profondeur puisqu’il manque de plus en plus d’information entre deux lignes. D’un autre côté,
le balayage linéaire requiert une ouverture relativement grande afin de couvrir une zone de
dimension comparable à celle obtenue par un balayage sectoriel.
Par ailleurs, il est à noter qu’il existe un bon nombre d’autres topologies servant à effectuer un
balayage. Parmi celles-ci l’on retrouve les réseaux d’éléments en deux dimensions qui permettent
d’obtenir une image en trois dimensions, les réseaux circulaires qui permettent d’effectuer une
mise au point dynamique axiale et latérale. Finalement, un amalgame de toutes ces techniques
pour des applications spécifiques peut bien évidemment être utilisé.
28
a) b)
c) d) e)
Figure 2.11 : Types de balayages : a) Linéaire mécanique; b) Linéaire électronique; c) Sectoriel
mécanique; d) Sectoriel électronique sans contrôle de phase; e) Sectoriel électronique avec
contrôle de phase.
2.2.6 Modes d’imagerie médicale par ultrasons
Il existe plusieurs modes d’imagerie médicale par ultrasons [1]-[12]. Voici les descriptions
sommaires des principaux :
2.2.6.1 Mode-A
Le Mode-A (Figure 2.12), également connu sous le nom de Mode amplitude, consiste à diriger un
seul faisceau ultrasonique sur le patient et à afficher directement sur un écran l’amplitude des
échos reçus. Puisque la vélocité du signal ultrasonique est pratiquement identique pour tous les
tissus organiques, l’intervalle de temps entre l’émission de l’onde et l’arrivée de l’écho est
proportionnel à la distance entre deux surfaces réflectives. Les traces à l’écran, une fois calibrées,
peuvent donc servir à mesurer la distance entre certaines structures dans le corps. Ainsi, ce mode
fournit de l’information en une seule dimension sur la structure interne du corps.
29
a) b)
Figure 2.12 : Imagerie médicale par ultrasons en Mode-A : a) Schéma de la disposition du
système; b) Image Mode-A obtenue à partir des échos reçus de cette disposition
2.2.6.2 Mode-B et Mode-B en temps réel
Contrairement au Mode-A qui affiche directement l’amplitude des échos, le Mode-B (Figure
2.13) affiche l’information contenue dans les échos sous forme de brillance. Plus l’amplitude de
l’écho est élevée, plus la brillance affichée à l’écran sera élevée. Puisqu’il est possible d’effectuer
un balayage du faisceau ultrasonique avec une sonde à balayage électronique ou mécanique, ce
mode d’imagerie par ultrasons permet de fournir de l’information sur deux dimensions.
a) b) c)
Figure 2.13 : Imagerie médicale par ultrasons en Mode-B : a) Schéma de la disposition du
système; b) Image Mode-B pour une seule ligne (ligne centrale); c) Image Mode-B avec un
balayage
Le Mode-B en temps réel a vu le jour avec l’arrivée de nouvelles technologies qui ont permis
d’afficher en temps réel l’image de la zone balayée par le faisceau ultrasonique. Il y a cependant
30
un compromis à faire entre la précision, la dimension de la zone balayée et le taux de
rafraichissement de l’image (équation (2.26)). La dimension de la zone balayée ainsi que le
nombre de faisceaux utilisés pour effectuer ce balayage limitent le nombre d’images qu’il est
possible de produire par seconde puisque le temps de propagation de l’onde dans les tissus est
significatif.
taux de rafraichissement
nb lignes par image 2 profondeur
c

 
(2.26)
2.2.6.3 Mode-C
Le Mode-C, ou balayage à profondeur constante, produit, similairement au Mode-B, une image
selon un balayage en 2-D. Toutefois, contrairement au Mode-B qui présente une image selon un
plan parallèle au faisceau, l’image produite correspond à un plan perpendiculaire; ce qui
correspond à une même profondeur par rapport à la surface du piézoélectrique.
2.2.6.4 Mode-M ou Mode-TM
Comme illustré à la Figure 2.14, ce mode d’imagerie permet de montrer le mouvement des tissus.
Similairement au Mode-A, un seul faisceau est utilisé; toutefois, comme pour le Mode-B,
l’amplitude de l’écho est convertie en brillance afin d’afficher sur l’écran le faisceau. À chaque
intervalle de temps régulier, un nouveau faisceau est affiché à côté des derniers. Ainsi, il est
possible de suivre le mouvement des interfaces dans le temps.
a) b)
Figure 2.14 : Imagerie médicale par ultrasons en Mode-M / Mode-TM : a) Schéma de la
disposition du système; b) Image Mode-M / Mode-TM.
31
2.2.6.5 Mode-BM
Comme son nom l’indique, le Mode-BM présente simultanément une image en Mode-B et en
Mode-M. Le choix de la ligne utilisée pour le Mode-M est habituellement souligné sur l’image en
Mode-B et peut être changé par l’usager.
2.2.6.6 Mode-D
Le Mode-D permet d’illustrer la vélocité de particules en mouvement (ex : cellules du sang) et la
variation de celles-ci. La fréquence de l’onde ultrasonique réfléchie par des particules en
mouvement est légèrement modifiée. Elle est plus élevée lorsque les particules se déplacent vers
la source de l’onde. Conformément, elle est plus basse lorsque les particules s’éloignent de la
source. La fréquence de Doppler correspond à la différence entre la fréquence initiale et celle de
l’écho. Il est à noter que la fréquence de Doppler est dans la plage fréquentielle audible; le
mouvement des particules peut donc être « entendu » lorsque le signal est raccordé à un haut
parleur.
2.2.6.7 Mode-F
Le Mode-F ou l’imagerie Doppler (Figure 2.15) consiste à superposer une image en Mode-B et
une couleur représentant la vélocité instantanée d’un fluide (ex. : le sang) obtenue grâce à l’effet
Doppler (voir Mode-D). Ce mode utilise donc simultanément le Mode-B et le Mode-D.
a) b)
Figure 2.15 : Imagerie médicale par ultrasons en Mode-F : a) Schéma de la disposition du
système; b) Image Mode-F
32
2.2.6.8 Mode-3D
L’imagerie en trois dimensions requiert l’acquisition de plusieurs coupes en Mode-B, et
d’effectuer les calculs nécessaires afin de présenter à l’écran la projection en trois dimensions
désirée. Dû à ses nombreuses interpolations, ce mode est moins précis lorsque des mesures
doivent être prises (ex : mesures en clinique obstétrique).
2.3 Les dangers des ultrasons et les critères de performance
2.3.1 Les risques associés aux ultrasons
Il est évident que l’introduction d’énergie dans les tissus n’est pas sans effet néfaste. En effet, les
ondes de pression perturbent le milieu et peuvent créer un stress mécanique ou thermique. La
durée et l’intensité sont deux paramètres importants qui sont présents dans l’ensemble des études
qui portent sur les dangers de l’ultrason [6], [7] et [19]. Par ailleurs, les appareils à ultrasons
doivent respecter des normes de sécurité dictées par la NEMA (National Electrical Manufacturers
Association) et l’AIUM (American Institute of Ultrasound in Medicine) afin de s’assurer que le
risque soit négligeable et que les bénéfices de l’utilisation de cette technologie dépassent le côté
néfaste qui lui est associé [20], [21]. Les paramètres importants qui lient la durée d’exposition et
l’intensité sont l’indice mécanique (MI), l’indice thermique (TI) et l’intensité spatiale maximale
(ISPTA). À noter que l’opérateur joue également un rôle important puisqu’il doit être qualifié afin
d’utiliser correctement le dispositif et d’interpréter les résultats. Finalement, lorsqu’utilisée
correctement, l’imagerie par ultrasons demeure une technologie sécuritaire et occasionne peu
d’effets néfastes.
2.3.2 Les critères de performance
Les principaux critères de performance d’un système d’imagerie par ultrasons sont la résolution
du contraste, la résolution spatiale et la résolution temporelle [1]-[12]. La résolution du contraste
est liée au nombre de tons de gris qu’il est possible de représenter et au contraste de l’afficheur.
Le nombre de tons de gris est proportionnel au rapport signal sur bruit. En effet, plus la plage
entre la valeur de l’intensité maximale de l’écho et le niveau de bruit est grande, plus il est
possible d’augmenter la résolution pour représenter le signal. De plus, puisque l’intensité est
limitée par les normes, la compensation de l’atténuation doit être adéquate pour utiliser au
33
maximum la plage disponible. À noter qu’une table de conversion de tons de gris doit être utilisée
afin d’adapter les différents contrastes pour correspondre adéquatement au fonctionnement de
l’œil humain [3], [27]. D’un autre côté, la résolution spatiale est liée aux résolutions axiale et
latérale qui sont limitées par le faisceau et par la longueur d’onde acoustique. De plus, la
résolution spatiale est également dépendante de la résolution de l’image ainsi que la taille des
pixels utilisés pour afficher l’image. Finalement, la résolution temporelle réfère à la capacité du
système échographique à présenter des objets en mouvement et est déterminée par le taux de
rafraichissement des images et de la latence pour la construction des images.
2.4 Conclusion
L’information contenue dans une image vaut mille mots et c’est sur ce principe que repose
l’imagerie médicale. En effet, lors de diagnostics, de suivis médicaux ou d'enseignements,
l’image d’une structure biologique constitue un outil de premier choix puisque l’information qui
y est représentée peut prendre plusieurs formes et n’a pas d’équivalence.
L’imagerie par ultrasons n’est pas seulement complémentaire aux autres technologies d’imagerie
médicale telles que le rayon X et la résonance magnétique, mais possède des caractéristiques
uniques qui lui sont avantageuses comparativement à ces autres technologies. En effet, l’ultrason
est une forme de radiation non ionisante relativement sécuritaire qui occasionne peu d’effets
néfastes. Selon les fréquences utilisées, il est possible d’obtenir une résolution de l’ordre des
millimètres. De plus, cette technologie permet d’obtenir de l’information sur la circulation du
sang et sur le mouvement des tissus (ex. : cœur).
Toutefois, cette technologie possède également des côtés négatifs. Effectivement, cette
technologie ne permet pas de visualiser adéquatement les poumons ou les os. Aussi, en plus de
dépendre des compétences de l’usager, il peut être difficile d’obtenir des images de qualité pour
certains patients (corps non-“échogénique”, obésité, etc). Finalement, l’accès à certains organes
tel que le cœur et le cerveau peut s’avérer plus difficile.
34
CHAPITRE 3 TRAVAUX DE POINTE DANS LE DOMAINE
Comme dans toutes les sphères technologiques, les efforts de recherche dans le domaine de
l’imagerie médicale par ultrasons tentent de repousser les limites qu’impose la technologie
actuelle. En effet, outre les avantages et les inconvénients qui sont étroitement liés aux
caractéristiques physiques intrinsèques de l’ultrason, d’autres caractéristiques qui sont en relation
à la technologie utilisée lui sont associées. Limités par leur résolution temporelle, leur résolution
spatiale, leur consommation, leur portabilité, leur coût ou leur mode de présentation de
l’information [28], les systèmes d’imagerie par ultrasons n’ont pas encore atteint leur plein
potentiel.
Au cours de son évolution, la technologie de l’imagerie par ultrasons a maturé et la complexité
des systèmes n’a cessé d’augmenter. Le développement technologique passe par le raffinement
des algorithmes, par l’addition d’applications de post-traitement et l’imagerie en 3-D. Ces
innovations sont supportées par la réalisation de différentes plateformes expérimentales de plus
en plus complexes et flexibles. Depuis les deux dernières décennies, une nouvelle tendance visant
à réaliser un système échographique portatif à faible coût a émergé. Cette tendance est propulsée
par l’intérêt grandissant des marchés et par le développement de nouvelles applications qui
bénéficient de la miniaturisation de cette technologie.
Ce chapitre vise à présenter un survol ainsi qu’une évaluation critique des travaux de pointe liés à
la miniaturisation de l’imagerie médicale par ultrason. De plus, pour bien situer le sujet de cette
thèse, la présentation de l’analyse des ouvrages choisis est subdivisée en quatre catégories :
systèmes échographiques portatifs à faible coût, miniaturisation des systèmes d’imagerie
médicale par ultrasons, implémentation matérielle des algorithmes de traitement et réalisations au
laboratoire de neurotechnologies Polystim.
3.1 Systèmes échographiques portatifs à faible coût
Dans leur revue de la littérature portant sur le design des systèmes échographiques portatifs à
faible coût, Baran et Webster font un survol des tentatives qui furent publiées [13]. Les éléments
qui sont passés en revue sous une perspective de faible coût concernent le réseau de
35
piézoélectriques, les circuits de transmission (TX) et de réception (RX) ainsi que le formateur de
faisceau (Figure 3.1). Selon les auteurs, l’élément qui est problématique en ce qui concerne la
réduction de coût est le transducteur. En effet, le coût de fabrication des piézoélectriques de type
céramique (technologie conventionnelle) est très élevé par rapport à l’ensemble du système. De
plus, puisque le coût associé aux batteries n’est pas négligeable, l’efficacité ainsi que la
consommation de ces piézoélectriques s’avèrent problématique.
Figure 3.1 : Architecture typique d’un système échographique
Les solutions présentées dans la littérature [13], [25]-[31] pour réduire le coût de fabrication des
transducteurs sont de remplacer les piézoélectriques céramiques par des transducteurs
ultrasoniques capacitifs micromachinés (Capacitive Micromachined Ultrasonic Transducer -
CMUT) ou des polyfluorures de vinylidène (PVDF). En plus de faciliter la fabrication d’un grand
réseau d’éléments, les CMUT permettent une bonne intégration de l’électronique de transmission
et de réception puisqu’ils utilisent une technologie de fabrication similaire à celle des circuits
intégrés (IC). De plus, l’efficacité d’un CMUT s’avère supérieure aux piézoélectriques
céramiques. Toutefois cette technologie est fragile et est non-linéaire; ce qui rend la
représentation des tissus organiques plus difficile. D’un autre côté, la faible impédance des PVDF
offre la possibilité d’utiliser une fréquence supérieure à 20 MHz. Toutefois, dû à leur faible
sensibilité, les PVDF n’offrent pas une bonne pénétration.
36
3.1.1 Intégration avec la technologie CMUT
En ce qui concerne la miniaturisation et la réduction de coût de la technologie de l’imagerie
médicale par ultrason, les CMUT possèdent tous les atouts nécessaires. En effet, Khuri-Yakub et
ses collaborateurs ont réalisé un système d’imagerie par ultrason qui intègre un transducteur de
16 x 16 éléments basé sur la technologie CMUT et des circuits frontaux TX et RX (Figure 3.2)
[32], [33]. Cet exemple souligne bien les avantages que procurent l’utilisation de la technologie
CMUT pour la fabrication d’une sonde ultrasonique qui incorpore des circuits intégrés et le
transducteur.
a) b)
Figure 3.2 : Intégration d’un transducteur CMUT et des circuits frontaux : a) Schéma bloc (tiré
de [32]); b) Implémentation matérielle (© 2009 IEEE, tiré de [33])
3.1.2 Intégration avec la technologie piézoélectrique céramique
Même si leur coût de fabrication est élevé et qu’il est plus difficile d’effectuer l’intégration des
circuits électroniques frontaux TX et RX, les piézoélectriques céramiques sont encore très
répandus de nos jours. Dans le domaine de la miniaturisation et de l’intégration, Light, Smith et
Angle ont développé une nouvelle génération de transducteurs [34]. Un anneau miniature
d’éléments piézoélectriques est intégré à un cathéter (Figure 3.3a) afin de produire une image en
trois dimensions et ainsi faciliter le guidage lors d’interventions chirurgicales. Trois différentes
sondes furent réalisées. La première consiste en un réseau de 54 éléments opérant à 5 MHz
(Figure 3.3b) et possédant une bande passante de 1,25 MHz. La deuxième et la troisième sondes
possèdent 108 éléments, une bande passante de 25 % et opèrent respectivement à 5 MHz et 8,9
MHz (Figure 3.3c). De plus, grâce à leurs propriétés, les piézoélectriques céramiques constituent
une bonne solution pour des applications à très haute fréquence (100 MHz) [35].
Figure 3.
de type B
éléments
3.1.3 In
Grâce à l
et d’un
applicatio
proposen
utilisant u
3.4b, la s
La sonde
3 : Intégrati
Broviac - Co
autour du ca
ntégration
la faible imp
réseau d’élé
ons qui req
nt Carey et s
un réseau li
sonde intègre
dissipe envi
b)
ion d’élémen
ook; b) Rése
athéter veine
n avec la te
pédance des
éments PVD
quièrent des
ses collabora
inéaire de 12
e également
iron 1,6 W l
nt piézoélect
au de 54 élé
eux (© 2008
echnologie
éléments PV
DF à l’inté
s fréquences
ateurs [36].
28 éléments
des circuits
orsque la pé
a)
trique céram
éments autou
8 IEEE, tiré d
e PVDF
VDF, l’intég
érieur de la
s supérieure
Cette équip
s PVDF (Fig
s d’impulsion
ériode de rép
mique à un c
ur du cathéte
de [34])
gration des c
sonde s’av
es à 20 MH
e a conçu u
gure 3.4a). T
n à -200 V e
pétition des i
c)
cathéter : a)
er veineux;
ircuits front
vère très pe
Hz. C’est d
un transducte
Telle qu’illu
et 16 canaux
mpulsions e
Cathéter ve
c) Réseau d
aux de prote
ertinent pou
d’ailleurs ce
eur à 20 MH
ustrée à la F
x d’amplific
est de 1,33 m
37
ineux
e 108
ection
ur les
e que
Hz en
Figure
ation.
ms.
38
a) b)
Figure 3.4 : Sonde linéaire à 128 éléments PVDF : a) Tête de la sonde; b) Circuits de la sonde (©
2009 IEEE, tiré de [36])
3.2 Miniaturisation des systèmes échographiques
3.2.1 Terminaux de soins aux patients
Les nouveaux terminaux de soins aux patients, où des traitements avancés tels que le formateur
de faisceau et le convertisseur de balayage sont implémentés sur des FPGA, tentent d’optimiser le
système au point de vue consommation, dimension, coût et précision. Toutefois, ces systèmes
continuent d’utiliser des unités centrales de traitement de données génériques (Central Processing
Unit – CPU); ce qui ne contribue pas à offrir une consommation et des dimensions optimales. De
plus, lorsqu’un lien sans fil est disponible, il est utilisé pour partager de l’information et des
images entre différents systèmes mais ne permet pas d’éliminer le câble du transducteur. Il est à
noter que le câble qui relie la sonde à l’unité de traitement est encombrant.
Song et son équipe ont développé un terminal de soins aux patients qui permet d’effectuer des
images en mode-B et mode-F en utilisant 32 canaux actifs et une sonde de 64 éléments [37], [38].
Les multiplexeurs et les circuits de protection pour les canaux de réception sont intégrés à
l’intérieur de la sonde. La Figure 3.5 présente le schéma bloc de l’architecture de la deuxième
version du système. Deux FPGA, un microcontrôleur et de la mémoire SDRAM permettent
d’effectuer tous les traitements requis en temps réel. De plus, ce système permet de communiquer
par un lien Bluetooth avec des capteurs biométriques externes. Le microcontrôleur utilisé contient
un proces
système e
Figure 3.
[38])
La Figure
environ 3
l’implém
logiciel,
l’implém
niveau de
3.2.2 S
Hossack
À partir d
système u
programm
signaux s
aux systè
sseur de typ
embarqué (E
5 : Schéma b
e 3.6 présent
32,5 cm x
mentation des
le microc
mentation du
es algorithm
ystème éc
et son équip
d’un transdu
utilise 16 cir
mable, une c
sont basés su
èmes conven
e ARM11 e
Embedded Li
bloc de l’arc
te l’impléme
10 cm. Ni
s FPGA ne s
contrôleur
système. Il
es de traitem
hographiq
pe ont conçu
ucteur 2-D (3
rcuits intégr
carte d’acqu
ur logiciel e
ntionnels en
t le système
inux).
chitecture du
entation du s
la consom
sont disponib
offre une
est à noter
ment afin d’a
que Mode-
u un système
32 x 32 élém
rés, chacun p
uisition et u
t sont effect
ce qui a trai
e d’exploitat
u terminal de
système. Cel
mmation de
bles. Grâce
approche
r que l’équip
améliorer la q
-C à faible
e échographi
ments), le pro
possédant 64
un ordinateur
tués en temp
it à la qualité
ion utilisé e
e soins aux p
lui-ci est div
l’ensemble
e à ces périp
intéressant
pe continue
qualité de l’i
e coût
ique à faible
ototype génèr
4 canaux de
r (Figure 3.
ps différé. L
é de l’image
st une versio
patients (© 2
visé en quatr
du circuit
phériques et
te et faci
ses travaux
image.
coût (Figur
re des image
réception, u
7b). Tous le
e système n
e et à la flex
on de Linux
2008 IEEE, t
re PCB; tota
ni les détai
à la flexibili
lite grande
x de recherch
re 3.7a) [39]
es en Mode-
un circuit lo
es traitemen
e se compar
xibilité. Tout
39
x pour
iré de
alisant
ils de
ité du
ement
he au
-[41].
C. Le
gique
nts de
re pas
tefois,
l’objectif
De plus,
frontale e
habituelle
d’étudier
signaux t
Le systèm
canaux so
une fréqu
il n’est p
intéressan
l’intégrat
Figure 3
Bluetooth
f est de les s
ce système
et le formate
ement dispo
la performa
out en ayant
me résultant
ont numéris
uence d’écha
pas possible
nte, puisqu’e
tion et en sou
125 mm
a)
d
.6 : Module
h; d) Alimen
surpasser au
permet d’étu
eur de faisce
onible avec
ance de div
t la connaiss
t est présen
és par deux
antillonnage
e de constru
elle traite le
ulignant les p
100
mm
d)
es du termi
ntation; e) Bo
niveau du c
udier les co
au en utilisa
c les systèm
ers algorithm
ance et le co
nté à la Figu
x canaux de
de 50 MHz
uire une ima
problème se
principaux c
inal de soin
oitier et sond
coût, de la fa
ompromis à
ant une appro
mes comme
mes de form
ontrôle des p
ure 3.8. Il e
numérisatio
z. Par conséq
age en Mod
elon une app
compromis à
b)
ns aux patie
de (© 2008 I
acilité de l’u
faire entre le
oche systèm
erciaux, le
mation de fa
paramètres d
est importan
on possédant
quent, le sys
de-B. L’app
proche systè
à faire.
ents : a) An
IEEE, tiré de
utilisation et
e transducte
me. Contraire
système of
aisceaux et d
e l’ensemble
nt de soulign
t une résolut
stème est déd
proche de ce
ème en metta
e)
nalogique; b
e [38])
t de la portab
eur, l’électro
ement à ce q
ffre l’opport
de traitemen
e du système
ner que les
tion de 12 b
dié au Mode
e groupe es
ant l’emphas
c)
b) Numériqu
40
bilité.
nique
qui est
tunité
nts de
e.
1024
bits et
e-C et
st très
se sur
ue; c)
41
a) b)
Figure 3.7 : Système échographique Mode-C à faible coût : a) Représentation du concept ; b)
Schéma bloc du système (© 2008 IEEE, tiré de [41])
a) b)
Figure 3.8 : Système échographique Mode-C à faible coût : a) Schéma bloc; b) Implémentation
matériel sur PCB et composants intégrés dédiés (© 2008 IEEE, tiré de [41])
3.3 Implémentation matérielle des algorithmes de traitement
L’exécution des fonctions de traitement des signaux ultrasoniques sur CPU ou sur un autre
processeur dédié au traitement de signal (Digital Signal Processor – DSP) procure une grande
flexibilité. Toutefois, pour fournir une vitesse d’exécution en temps réel, ces systèmes requièrent
beaucoup d’énergie ou occupent un volume considérable [42]-[44]. Pour réduire la
42
consommation et la taille des systèmes, de nouveaux algorithmes doivent être développés ou
portés vers de nouvelles plateformes. Il est à noter que pour les systèmes portatifs possédant une
alimentation limitée, cette approche est essentielle. Finalement, il est important de mentionner
que même si les FPGA d’aujourd’hui offrent la possibilité d’implémenter des modules de
traitement de signaux avancé, les ressources matérielles sont limitées et la portabilité des
algorithmes de traitement du domaine logiciel vers le domaine matériel n’est pas triviale.
3.3.1 Plateforme de développement
Tortoli et son équipe ont réalisé une plateforme de développement (Figure 3.9) (Ultrasound
advanced open platform, ULA-OP) qui fait le compromis entre la performance, les dimensions, la
flexibilité, la facilité d’utilisation, le coût et l’homogénéité du système dans le but de faciliter la
recherche et l’optimisation des algorithmes de traitement [45], [46]. Malgré qu’il soit aujourd’hui
possible de concevoir un système complètement basé sur logiciel en utilisant les dernières
technologies de CPU, Tortoli et son équipe proposent une implémentation dédiée reposant sur
une architecture logicielle et matérielle; ce qui permet d’offrir une très grande flexibilité de
reconfiguration et l’accessibilité directe à tous les signaux internes. En effet, la plateforme peut
être facilement configurée et est connectée à un ordinateur par un lien USB 2.0. Il est même
possible de recueillir les données brutes à n’importe quelle étape afin d’effectuer des traitements
différés aux fins de comparaisons des performances de différents algorithmes.
Le système contrôle 64 canaux de transmission et de réception indépendants qui sont connectés à
une sonde possédant 192 éléments par une matrice de commutateurs. Avant d’être numérisés par
64 CAN possédant une résolution de 12 bits et une fréquence d’échantillonnage de 50 MHz, les
signaux analogiques sont amplifiés par un amplificateur à faible bruit. La transmission et la
réception sont contrôlées par quatre FPGA (Stratix II, Altera); 16 canaux par FPGA. Le
formateur de faisceau est réalisé en partie en matériel par un cinquième FPGA (Stratix II, Altera)
et en logiciel par un DSP (TMS320C6455, Texas Instruments). La plateforme consomme moins
de 90 W et mesure 34 x 33 x 14 cm3
. La puissance de calcul est suffisamment élevée pour ajouter
plusieurs algorithmes de traitement en temps réel. En effet, l’utilisation de la puissance de calcul
des FPGA et du DSP est estimée à 1 % lors de la production d’image en mode-B.
43
a) b)
Figure 3.9 : Plateforme de développement ULA-OP: a) Prototype matériel; b) Illustration de la
flexibilité de configuration et d’utilisation (© 2009 IEEE, tiré de [46]) 
3.3.2 Formateur de faisceau
Dû à sa complexité, l’implémentation matérielle du formateur de faisceaux numérique a prouvé
ses bénéfices. En effet, pour des raisons de capacité de traitement en temps réel, de réduction de
coût, de consommation ou d’intégration, plusieurs formateurs de faisceaux basés sur des FPGA
sont présentés dans la littérature : des plus complexes aux plus simples.
3.3.2.1 Formateur de faisceau à ouverture synthétique
L’architecture du formateur de faisceau à ouverture synthétique (SA, synthetic aperture) présenté
par Jensen et ses collaborateurs est influencée par les calculs requis par la génération d’image SA
[47]-[52]. Le formateur de faisceau SA est généré avec seulement trois paramètres par canal et
par ligne et permet de générer des images conventionnelles en deux et trois dimensions. Il est à
noter que le formateur de faisceau SA ne génère pas seulement des images à un grand taux de
rafraichissement, mais offre un meilleur contraste et une meilleure résolution par rapport aux
méthodes traditionnelles.
44
Le traitement en temps réel de quatre canaux (Figure 3.10) est partagé entre deux FPGA (Virtex-
4 XC4VFX100, Xilinx). L’implémentation du système requiert donc l’utilisation de 64 cartes
DAUP (Digital Acquisition and Ultrasound Processing) (Figure 3.11a) du système SARUS
(Synthetic Aperture Real-time Ultrasound System) (Figure 3.11b) afin d’avoir accès à 128 FPGA
pour traiter les 256 canaux. Il est à noter que trois FPGA par carte sont utilisés pour gérer la
réception, la transmission et le contrôle des canaux. Avec ce système, il est possible de produire
40 images par seconde offrant une résolution de 192 lignes et 1024 échantillons par ligne. Chaque
image en haute résolution (Figure 3.12) est construite en additionnant jusqu’à 128 images en
basse résolution (32 lignes et 1024 échantillons complexes par ligne). En utilisant des
additionneurs de 24 bits ou 16 bits, les lobes secondaires du faisceau sont respectivement à -60
dB et -50 dB par rapport à la valeur crête (Figure 3.13). Malgré la complexité du système, les
résultats montrent qu’il est possible, avec les technologies d’aujourd’hui et en utilisant une
implémentation matérielle, d’obtenir en temps réel des images d’aussi bonne qualité que celles
obtenues par des traitements différés de grande précision.
Figure 3.10 : Architecture du module de traitement en temps-réel du formateur de faisceau à
ouverture synthétique pour quatre canaux (© 2006 IEEE, tiré de [51])
45
a) b)
Figure 3.11 : Architecture du formateur de faisceau à ouverture synthétique : a) Architecture des
cartes numériques DAUP; b) Système SARUS (© 2005 IEEE, tiré de [52])
Figure 3.12 : Principe de construction des images avec un formateur de faisceau à ouverture
synthétique (tiré de [47])
46
Figure 3.13 : Faisceau obtenu par des additionneurs de 24 bits ou de 16 bits (© 2008 IEEE, tiré
de [50])
3.3.2.2 Formateur de faisceau dédié à un réseau linéaire de 64 éléments
Lay et Lockwood ont réalisé un formateur de faisceau dédié à un réseau linéaire de 64 éléments
implémenté sur FPGA (Virtex-4, Xilinx) [53]. L’algorithme repose sur une analyse du nombre
d’interpolations linéaires à effectuer entre les échantillons ainsi que la résolution à utiliser (Figure
3.14a-b). Les résultats de l’analyse ont permis de proposer une résolution de 12 bits et quatre
interpolations afin d’obtenir 200 Méch/s à partir d’un CAN possédant une fréquence
d’échantillonnage de 50 MHz. Selon les simulations, cette configuration permet de générer un
faisceau qui présente des lobes secondaires à -60 dB par rapport à la valeur crête (Figure 3.14c).
Finalement, les résultats des analyses furent validés expérimentalement sur un prototype matériel
implémenté dans un FPGA d’un formateur de faisceau à huit canaux (Figure 3.14d).
3.3.2.3 Formateur de faisceau basé sur un CAN à 1 bit
Tomov et Jensen ont démontré, en présentant les contraintes matérielles (taille de la mémoire,
additionneur, multiplicateur) et la puissance de calcul requise (nombre d’additions et de
multiplications par seconde), que l’utilisation de circuits dédiés pour le traitement en temps réel
des signaux ultrasoniques est une solution de premier choix [54], [55]. Par conséquent,
l’algorithme de traitement du formateur de faisceau présenté dans ces travaux est basé sur le
suréchantillonnage d’un CAN à 1 bit (convertisseur de type delta-sigma). La fréquence
d’échantillonnage élevée permet d’offrir une résolution temporelle suffisante pour présenter une
image en Mode-B et la résolution du CAN de 1 bit permet de réduire la complexité matérielle. En
cascadant
traiter, lo
affichées
d’aujourd
délai du f
Figure 3.
utiliser; b
Résultat
matériel u
Les résul
sont requ
d’échanti
t un filtre R
ors de la reco
à l’écran)
d’hui en util
formateur de
14 : Format
b) Analyse
obtenu pour
utilisé (© 20
ltats montren
uis pour gén
illonner les s
RIF à la sort
onstruction d
). Finalemen
lisant des m
e faisceau.
a)
c)
teur de faisc
du nombre
r un échantil
007 IEEE, tir
nt que 50 %
nérer un for
signaux à un
tie du conve
des signaux,
nt, les aute
mémoires à
ceau dédié im
d’interpolat
llonnage à 2
ré de [53])
% des ressou
rmateur de
ne fréquence
ertisseur del
seulement l
eurs tirent
double port
mplémenté s
tions linéair
200 MHz et
urces matérie
faisceau po
e de 71,6 M
lta-sigma, l’
les données
avantage d
t pour l’imp
sur FPGA: a
res à effectu
une résolut
elles d’un F
ssédant 32
MHz. En sim
’algorithme
nécessaires
de l’architec
plémentation
b)
d)
a) Analyse d
uer entre les
tion sur 12 b
PGA (XCV
canaux et q
mulation, pou
utilisé perm
(celles qui s
cture des F
n des tampon
de la résolut
s échantillon
bits; d) Prot
V2000E-7, X
qu’il est po
ur une sonde
47
met de
seront
FPGA
ns de
tion à
ns; c)
totype
Xilinx)
ssible
e de 3
48
MHz et une fréquence d’échantillonnage de 140 MHz, les résultats montrent qu’il est possible
d’obtenir un faisceau qui possède des lobes secondaires à –60 dB de la valeur crête (Figure 3.15)
et une consommation de 1,4 W.
Figure 3.15 : Faisceau du formateur de faisceau basé sur un CAN à 1 bit obtenu en simulation
pour une profondeur de 7 cm, une sonde de 3 MHz et une fréquence d’échantillonnage de 140
MHz (© 2005 IEEE, tiré de [55])
3.3.3 Détecteur d’enveloppe
De par leur faible complexité arithmétique, les algorithmes de démodulation et de conversion de
balayage numériques sont plus appropriés pour les implémentations logicielles. Par contre, de
nouvelles implémentations matérielles présentant plusieurs avantages, principalement en ce qui
concerne la taille et la consommation, sont documentées dans la littérature.
3.3.3.1 Démodulateur en quadrature à large bande pour FPGA
Langlois et al ont présenté une approche pour l’implémentation dans un FPGA d’un
démodulateur en quadrature à large bande [56]. L’approche est décrite à travers un exposé
général concernant les compromis à faire entre le débit de traitement, le coût et les considérations
architecturales spécifiques à l’utilisation d’un FPGA pour l’implémentation matérielle.
Les auteurs ont réalisé un exemple d’implémentation d’un démodulateur avec un FPGA à faible
complexité (4010E-3, Xilinx). L’architecture proposée pour effectuer la démodulation en
49
quadrature permet de réduire la fréquence d’échantillonnage tout en satisfaisant le théorème de
Nyquist. Comparativement à la méthode traditionnelle, la méthode de sous-échantillonnage
utilisée permet d’opérer à une fréquence adéquate pour le FPGA (Figure 3.16a-b). La forme
transposée (Figure 3.16c) des quatre filtres à réponse impulsionnelle finie (RIF) permettait
d’effectuer une addition et une multiplication à chaque cycle d’horloge. De plus, puisque les
filtres RIF étaient d’ordre 29, l’architecture utilisée pour l’implémentation des 23 multiplicateurs
avaient un impact important. Pour tirer avantage des ressources matérielles et de la rapidité, 18
d’entre eux étaient basés sur des tables de conversion. Dû à leur complexité, les 5 autres étaient
implémentés par une architecture qui repose sur une représentation canonique signée. Pour cet
exemple, l’utilisation des ressources du FPGA a atteint 83 %. Il est à noter que les auteurs ont dû
intervenir à l’étape du placement et routage pour s’assurer que les délais soient respectés. En
effet, avec cette attention particulière, les résultats ont montré qu’il était possible de traiter un
signal d’entrée de 160 MHz possédant une bande passante d’environ 45 MHz. Finalement, les
résultats de simulation ont montré qu’il était possible de doubler la vitesse de traitement en
apportant peu de modifications et en utilisant une famille de FPGA plus rapides.
3.3.3.2 Détecteur d’enveloppe à haut taux de rafraichissement
Chang, Yen et Shung ont réalisé un détecteur d’enveloppe pour les signaux ultrasoniques à haute
fréquence qui permet de générer des images à un taux de rafraichissement de 150 images par
seconde [57], [58]. L’algorithme qui a été proposé combine la compression logarithmique à
l’intérieur de la démodulation en quadrature (Figure 3.17). Les deux filtres passe-bas sont d’ordre
33 et trois LUT sont utilisées pour accélérer les calculs des équations logarithmiques. Au total,
une capacité mémoire de 1,3 Mbits est requise pour réaliser les trois LUT.
L’implémentation matérielle fut réalisée avec un FPGA (EP1S60F1020C6, Altera) et une carte de
développement. À 100 MHz, l’architecture peut traiter une ligne de 2048 échantillons (Figure
3.18) en 2080 cycles d’horloge; ce qui permet de générer une image, constituée de 256 lignes, en
seulement 5,3 ms. L’utilisation de LUT permet donc d’offrir la rapidité de calcul souhaitée. De
plus, la combinaison du calcul de la racine carrée et de la compression logarithmique est
avantageuse puisqu’elle permet de réduire la taille des LUT; ce qui est très important dû à la
quantité de mémoire nécessaire.
50
a)
b)
c)
Figure 3.16 : Démodulateur en quadrature à large bande pour FPGA : a) Méthode traditionnelle;
b) Méthode de sous-échantillonnage; c) Forme transposée d’un filtre RIF d’ordre impair (© 1999
IEEE, tiré de [56])
51
a)
b)
Figure 3.17 : Algorithme de démodulation en quadrature : a) méthode conventionnelle; b)
méthode qui incorpore la compression logarithmique (© 2007 IEEE, tiré de [57])
Figure 3.18 : Démodulation d’une ligne composée de 2048 échantillons représentée en divers
formats (© 2007 IEEE, tiré de [57])
52
Finalement, Shung et ses collaborateurs ont intégré le détecteur d’enveloppe dans un système qui
produit des images en Mode-B. Le système est implémenté en partie avec un FPGA et en logiciel
sur un ordinateur (Figure 3.19). La communication entre les deux unités est réalisée par un bus de
communication de type PCI de 64 bits cadencé à 33 MHz. Le convertisseur de balayage du
système est réalisé avec des LUT, similairement au démodulateur. L’implémentation de
l’ensemble des LUT requièrt près de 60 % de la mémoire disponible du FPGA (EP1S60F1020C6,
Altera), soit 2,85 Mb.
Figure 3.19 : Schéma bloc d’un système d’imagerie par ultrasons Mode-B implémenté sur FPGA
(© 2009 IEEE, tiré de [58])
3.4 Réalisations du laboratoire de neurotechnologie Polystim
Le groupe de recherche du laboratoire de neurotechnologie Polystim effectue des travaux dans le
domaine de l’imagerie médicale par ultrasons depuis une quinzaine d’années. Au cours de ses
travaux de recherche, il tente de développer de nouvelles applications, de nouvelles technologies
et principalement de réaliser l’intégration d’un système échographique complet sur une seule
puce (SoC, System on Chip). Les résultats obtenus jusqu’à ce jour sont prometteurs, toutefois ils
mettent également en évidence les difficultés associées à de tels défis.
3.4.1 Application : alarme de conditionnement ultrasonore reconfigurable
Dans son mémoire de maîtrise, Beauchamp-Parent a introduit une nouvelle application en
imagerie médicale pas ultrasons [59]. Il propose une nouvelle façon de traiter l’énurésie en
réalisant une alarme de conditionnement ultrasonore reconfigurable. Le système utilise les
ultrasons afin de mesurer le volume de la vessie. Lorsque celle-ci atteint un certain seuil, le
53
système déclenche une alarme qui doit réveiller l’utilisateur. Une première implémentation sur
PCB du dispositif repose sur l’utilisation d’un microcontrôleur et de composants discrets.
Figure 3.20 : Architecture de l’alarme de conditionnement ultrasonore reconfigurable (tiré de
[59])
3.4.2 Technologie : balayeur micro électromécanique
Hajj-Hassan a proposé dans son mémoire de maîtrise un nouveau type de balayeur pour les
systèmes échographiques [60]. Contrairement aux balayeurs conventionnels de type mécanique
ou électronique, le nouveau balayeur est électromécanique de type micro plateforme à deux
degrés de liberté (Figure 3.21) et est basé sur la technologie MEMS (Micro Electro Mechanical
Systems). Les angles de rotation du balayeur sont respectivement de ±5 et ±2 degrés pour la
plateforme et le support. L’assemblage complet d’un prototype n’a pas pu être complété, toutefois
les recommandations semblent corriger la problématique rencontrée. Finalement, il est à noter
qu’il reste encore des incertitudes au niveau de la fixation de l’élément piézoélectrique et du
poids que peut supporter la plateforme.
54
Figure 3.21 : Représentation du balayeur micro électromécanique (tiré de [60])
3.4.3 Intégration : système sur circuit intégré
3.4.3.1 Intégration des circuits frontaux TX et RX
L’un des principaux secteurs d’activité de Polystim en imagerie médicale par ultrasons concerne
l’intégration des circuits frontaux TX et RX [61]-[65]. L’objectif étant de réaliser des circuits qui
consomment peu, qui permettent une intégration sur SoC et qui présentent des caractéristiques
égales ou supérieures à celles offertes par les circuits conventionnels. De plus, l’ensemble des
circuits est, évidemment, dédié à une application d’imagerie médicale par ultrasons.
Pour une première évaluation expérimentale du préamplificateur et du convertisseur analogique à
numérique (CAN), ces deux étages du circuit frontal furent réalisés individuellement (Figure
3.22). Les résultats du CAN sont très intéressants, seulement 50 mW sont nécessaires pour
effectuer une conversion à 50 Méch/s sur une résolution de 10 bit [61]. D’un autre côté, les
résultats des deux étages du préamplificateur [62] sont prometteurs mais requièrent quelques
améliorations (voir section 3.4.3.3).
Figure 3.22 : Étages du circuit frontal RX (tiré de [61])
55
D’un autre côté, le circuit frontal TX fut réalisé grâce à une nouvelle technologie de
convertisseurs DC-DC haute tension [65]. Reposant sur une architecture en cascade (Figure 3.23),
le circuit proposé permet de générer des hautes tensions allant de -100 V à +100 V. Selon les
résultats expérimentaux, des améliorations portant sur l’efficacité et la puissance disponible en
sortie sont à apporter.
Figure 3.23 : Schéma bloc du convertisseur DC-DC (tiré de [65])
3.4.3.2 Traitements numériques
Kassem a proposé dans sa thèse de doctorat une architecture d’un système numérique qui
permettrait de générer en temps réel une image en Mode-B à partir des signaux ultrasoniques
numériques (Figure 3.24) [66]. Il a présenté le formateur de faisceau, le démodulateur et le
convertisseur de balayage. Les résultats obtenus ne sont pas entièrement concluants (voir section
3.4.3.3). Toutefois, il est possible d’interpréter les résultats sous un angle différent. En effet, la
réalisation d’un système est complexe et il ne suffit pas seulement d’implémenter les algorithmes
de traitement de signaux pour obtenir une architecture fonctionnelle et optimale. La testabilité,
une vision globale pour synchroniser l’ensemble du système, les chemins de contrôle et des
données, ainsi que le choix des ressources utilisées pour l’implémentation sont quelques
exemples d’éléments tout aussi importants que la précision et la performance des algorithmes de
traitement. Bref, il ne suffit pas de considérer individuellement chacun des modules de
l’architecture, mais il faut également tenir compte du système en entier.
56
Figure 3.24 : Architecture globale de l’unité de traitement numérique (tiré de [66])
3.4.3.3 Modélisation
Afin de valider l’ensemble des circuits développés par Polystim et d’offrir la possibilité de les
comparer avec d’autres algorithmes, architectures ou implémentations, Vaillancourt-Veilleux a
réalisé au cours de sa maîtrise un modèle comportemental générique de système ultrasonore
(Figure 3.25) [67]. L’objectif visé était de présenter l’importance de concevoir un environnement
de tests permettant l’élaboration et la caractérisation d’un modèle de système ultrasonore
portable.
L’environnement de tests a permis d’évaluer le fonctionnement de l’ensemble des circuits
proposés dans un contexte réel d’imagerie médicale par ultrasons. Les résultats ont révélé que les
modules ne sont pas encore prêts pour une intégration complète du système. En effet, il fut
possible de déceler plusieurs lacunes qui pourraient être corrigées. Pour les circuits frontaux RX,
les caractéristiques de l’amplificateur logarithmique (True Logarithmic Amplifier, TLA) et du
compensateur temporel de gain (Time Gain Compensator, TGC) seraient à améliorer : le niveau
de bruit injecté par le TLA est trop élevé et le TGC introduit trop de distorsion. D’un autre côté,
la section numérique n’est pas entièrement fonctionnelle. L’amélioration de la précision du
module d’interpolation est souhaitable. Il serait également pertinent de raffiner la résolution du
pas numérique du formateur de faisceau. Finalement, l’architecture du détecteur d’enveloppe
serait à revoir.
57
Figure 3.25 : Environnement de simulation (tiré de [67])
3.5 Conclusion
Les innovations en matière d’intégration des circuits frontaux (RX, TX, multiplexeurs, circuits de
protection) à l’intérieur de la sonde ont démontré leur efficacité. Parallèlement à l’intégration des
circuits frontaux, plusieurs groupes de recherche tentent d’améliorer et de matérialiser de
nouveaux algorithmes de traitement des signaux ultrasoniques. Les performances grandissantes
des circuits programmables tels que les FPGA offrent les caractéristiques nécessaires pour le
développement de nouvelles architectures de traitement matériel, permettant ainsi de produire en
temps réel des images de qualité comparables à celles obtenues par traitement différé sur des
CPU puissants. Finalement, il est important de rappeler que ces deux champs de recherche sont
continuellement stimulés par la demande grandissante du marché pour une miniaturisation de la
technologie d’imagerie médicale par ultrasons et par l’émergence de nouvelles applications [13]-
[15].
Afin de contribuer à l’avancement de la miniaturisation de la technologie de l’imagerie par
ultrason, cette thèse propose une nouvelle architecture qui permet d’éliminer le câble et qui
facilite la miniaturisation en optimisant la consommation, les dimensions, la performance et la
flexibilité [22]-[24]. Finalement, pour souligner les différentes caractéristiques de l’état actuel de
la miniaturisation de cette technologie et pour situer les objectifs de cette thèse, le Tableau 3.1
présente le sommaire des différents systèmes répertoriés.
58
Tableau 3.1 : Sommaire des différents systèmes répertoriés
Travaux Description Ressources Avantages2
Inconvénients2
[37][38]
(3.2.1)
Terminaux soin aux patients
(32 canaux)
2 FPGA Virtex-4,
1 ARM11
Dimensions / consommation Qualité de l’image
[39]-[41]
(3.2.2)
Imagerie Mode-C
(1024 canaux)
16 ASIC, 1 PC,
2 cartes CAN
Intégration circuits analogiques
Flexibilité
(Mode-C seulement)
[45][46]
(3.3.1)
Système ULA-OP
(192 canaux1
)
5 FPGA Stratix-II,
1 DSP, 1 PC
Flexibilité /
Facilite le développent
Dimensions et consommation
[47]-[52]
(3.3.2.1)
Formateur SA avec SARUS
(256 canaux)
128 FPGA Virtex-4
↑ qualité d’image /
imagerie 1D et 3D / flexibilité
Dimensions et consommation
[53]
(3.3.2.2)
Formateur de faisceau
(8 canaux)
1 FPGA Virtex-4 ↓ fréquence d’échantillonnage
↑ interpolations /
pas d’image expérimentale
[54][55]
(3.3.2.3)
Formateur de faisceau
(32 canaux)
1 FPGA Virtex-E ↓ complexité matérielle ↑ fréquence d’échantillonnage
[56]
(3.3.3.1)
Démodulateur 1 FPGA Spartan ↓ fréquence d’échantillonnage
↑ ressources matérielles /
Flexibilité des multiplicateurs
[57][58]
(3.3.3.2)
Démodulateur et
compression logarithmique
1 FPGA Stratix Haut taux de rafraichissement Ressources mémoires
1 : 64 canaux RX et 64 canaux TX indépendants. Les 68 autres canaux de la sonde ne sont pas utilisés.
2 : ↑: Augmentation; ↓: Diminution
59
CHAPITRE 4 ARCHITECTURE D’UN SYSTÈME ÉCHOGRAPHIQUE
SANS FIL ET DE SA PLATEFORME DE VALIDATION
Ce chapitre introduit la nouvelle architecture d’un système échographique ainsi que sa plateforme
de validation. La flexibilité de l’implémentation logicielle ainsi que la disponibilité d’une grande
variété de processeurs (CPU ou DSP) favorise le développement de systèmes échographiques qui
reposent, en totalité ou en partie, sur une implémentation logicielle. Toutefois, la consommation
d’énergie et la taille physique des ces architectures limitent la miniaturisation et la portabilité.
D’un autre côté, les systèmes miniaturisés sont soit dédiés à une application spécifique [34], [39]-
[41], [57], soit moins performant que les systèmes conventionnels [37], [38]. En ralliant la
flexibilité du logiciel et l’efficacité du matériel, l’architecture proposée réunit les deux tendances
technologiques.
La première section de ce chapitre décrit l’architecture du système échographique proposé.
Ensuite, dans les deux sections suivantes, la plateforme de validation ainsi que son
implémentation sont présentées. Finalement, la dernière section révèle les résultats
expérimentaux.
4.1 Nouvelle architecture d’un système échographique
L’architecture proposée du système échographique est illustrée à la Figure 4.1. Le système est
subdivisé en deux sections : un transducteur de prétraitement ultrasonique (TPU) et un afficheur
d’imagerie médicale (AIM). Ces deux composants sont reliés par un lien sans-fil (LSF). Le TPU
effectue le prétraitement du signal ultrasonique RF afin de transférer une image échographique à
l’AIM via le LSF. L’AIM affiche les images, sert d’interface usager et peut être utilisé pour
effectuer le post-traitement. Le LSF doit permettre une communication bidirectionnelle afin de
modifier les paramètres de configuration du TPU par l’AIM. De plus, il est à noter que l’AIM
peut supporter plusieurs TPU. En effet, le système peut également être composé de plusieurs TPU
afin d’offrir plus de flexibilité. Finalement, selon l’application, le même TPU pourrait également
communiquer avec plusieurs AIM secondaires.
60
a)
b)
Figure 4.1 : Architecture proposée d’un système échographique sans fil : a) Éléments composants
le système, b) Exemple d’un système possédant plusieurs AIM et TPU
61
À titre d’exemple, l’utilisation de plusieurs AIM permettrait à toute une équipe de soin de
visualiser les images lors d’une intervention. Avec cette architecture, il serait possible
d’enregistrer les images ou de les télécharger vers un autre poste. De plus, les AIM pourraient
être adaptés à chaque application. Par exemple, pour un même TPU, un petit écran fixé au bras
serait utilisé lors des soins vétérinaires à l’étable et un grand écran, en clinique. Finalement, il
serait également possible de transformer l’AIM en terminal de soin au patient en incluant d’autres
technologies d’imagerie médicale (ex : ECG) ou de mesures (ex : température, pression).
Afin de réduire le débit de données requis par le LSF, tout le prétraitement, analogique et
numérique, est réalisé par le TPU. En effet, en effectuant tout le prétraitement en temps réel à
l’intérieur de la sonde, l’architecture proposée permet d’utiliser une connexion sans-fil qui
rencontre le débit supporté par les standards de transmissions sans fil d’aujourd’hui puisque la
transmission devient alors équivalente à une transmission vidéo. Il est à noter que le débit de
données dépend donc du taux de rafraichissement, de la résolution et du nombre de tons de gris.
À titre d’exemple, pour une résolution de 320 x 240, un rafraichissement de 15 images par
secondes et 256 tons de gris, le débit utile serait de 8,8 Mb/s. Ce débit utile à transmettre sur une
connexion sans-fil serait 22 fois plus faible que celui (195 Mb/s) généré par la numérisation des
signaux ultrasoniques d’un canal de réception par un convertisseur analogique à numérique
(CAN) possédant une fréquence d’échantillonnage de 20 MHz et une résolution de 10 bits. Il est
important de mentionner qu’en utilisant la redondance dans le signal, il est possible de
compresser les informations afin de réduire le débit utile à transmettre.
Le prétraitement analogique et mixte frontal est requis pour effectuer la compensation
d’amplification temporelle, la conversion analogique à numérique et générer l’impulsion haute
tension. D’un autre côté, afin de générer en temps réel une image en mode-B à partir des signaux
ultrasoniques numérisés, plusieurs tâches numériques doivent être effectuées. En effet, le cœur de
prétraitement numérique du TPU est responsable d’effectuer la formation du faisceau, la
conversion du balayage, la démodulation des signaux ultrasoniques et l’interpolation d’image.
62
Dans un autre ordre d’idée, puisque la consommation électrique et la taille physique des
architectures conventionnelles basées sur logiciel ne permettent pas une intégration à l’intérieur
de la sonde, un nouveau partitionnement logiciel/matériel apparait comme une solution
potentielle. De plus, il est à noter que l’implémentation matérielle est appropriée aux situations
d’urgence grâce à son temps de démarrage très court qui est inférieur à une seconde. La Figure
4.2 présente le partitionnement matériel/logiciel qui est proposé afin de réduire la puissance
consommée et les dimensions du système tout en préservant la flexibilité du logiciel et la rapidité
de traitement. Contrairement aux unités de prétraitement d’aujourd’hui qui possèdent toujours
une frontière logiciel-matériel en amont de la chaine de traitement [38],[57],[68]-[74],
l’architecture proposée déplace cette frontière plus loin en aval en englobant tout le prétraitement.
Ainsi, le flux de données qui franchit l’interface matériel-logiciel consiste seulement à la
transmission, en temps-réel, d’images en mode-B résultantes du prétraitement. Il est à noter qu’il
serait également possible de transmettre d’autres informations prétraitées; telles que celles
requises par l’imagerie de type Doppler.
Figure 4.2 : Partitionnement logiciel-matériel proposé d’un système échographique
4.2 Architecture de la plateforme de validation
La Figure 4.3 présente le schéma bloc de la nouvelle architecture d’un système échographique
miniaturisé qui est utilisé en tant que plateforme de validation du système échographique sans fil.
Subdivisée en trois sections : prétraitements analogiques, prétraitements numériques et sources
d’alimentations; cette plateforme échographique à un seul canal permet d’analyser et de souligner
les paramètres importants de l’architecture proposée. Il est important de mentionner que cette
plateforme n’offre pas de post-traitement logiciel ni d’interface sans-fil. Toutefois, le canal de
63
communication à l’interface matériel/logiciel, utilisé pour transmettre les images, est similaire à
celui qui est utilisé pour afficher en temps réel les images obtenues sur un ACL (Afficheur à
cristaux liquide). Cette plateforme permet donc de valider les algorithmes de prétraitement ainsi
que l’ensemble de l’architecture.
Le module de prétraitement analogique et mixte à un canal est composé d’un compensateur
temporel de gain (Time Gain Compensator, TGC), d’un circuit de transmission et de réception
(Tx/Rx), d’un filtre passe-bande passif et d’un CAN. D’autre part, le module numérique de
prétraitement est composé d’un FPGA et d’une mémoire à faible consommation qui est utilisée
en tant que mémoire d’image tampon. Le FPGA est utilisé pour implémenter tous les modules de
prétraitement, incluant le démodulateur et le convertisseur de balayage, ainsi que les modules de
gestion tels que l’unité de contrôle du système et de l’interface usager. Grâce à l’utilisation d’un
FPGA, le module de prétraitement numérique matériel est donc reprogrammable. À noter
également que toutes les sources d’alimentations sont intégrées au système échographique
miniature; ce qui permet d’alimenter le système avec une seule source de tension entre 6 V et 15
V. Finalement, un clavier permet à l’usager de modifier tous les paramètres du système.
Figure 4.3 : Schéma bloc de la plateforme de validation
4.2.1 Section analogique et mixte
Le module de prétraitement analogique et mixte, illustré à la Figure 4.4, est similaire à ceux
présentés dans la littérature [5]-[7] et est composé d’un canal de transmission et d’un canal de
64
réception. Le canal de transmission permet de générer un signal d’excitation haute tension (~100
V) commandé par un signal numérique (3.3 V) qui provient du FPGA. Le canal de réception
permet de compenser l’atténuation du signal ultrasonique et de l’échantillonner avant de le
convertir en valeur numérique. Finalement, un circuit de protection est utilisé pour raccorder le
canal de transmission au canal de réception.
Le canal de réception possède trois étages : le TGC, le filtre anti-repliement et le CAN. Le TGC
est composé de deux étages d’amplification. Dans un premier temps, le faible signal électrique
représentant l’écho ultrasonique généré par le transducteur est amplifié par un amplificateur à
faible bruit (Low Noise Amplifier, LNA). Ensuite, un deuxième étage permet de compenser
l’atténuation de la propagation du signal ultrasonique dans les tissus grâce à l’amplificateur de
compensation temporelle (Time Gain Amplifier, TGA). Ce dernier est composé d’un
amplificateur à gain variable (Variable Gain Amplifier, VGA) et d’un générateur de rampe de
tension qui permet, pour chaque ligne ultrasonique balayée, de contrôler le niveau de
l’amplification au cours de l’acquisition de l’écho. La pente et le gain (ou décalage) de la rampe
de tension sont les deux paramètres qui permettent d’ajuster le gain instantané du VGA. Tandis
que le gain de la rampe de tension applique un même niveau d’amplification durant toute la
période d’acquisition de l’écho, la pente de la rampe de tension détermine le taux de variation du
niveau d’amplification durant cette même période.
Figure 4.4 : Architecture de l’unité de prétraitement analogique et mixte
65
Par exemple, pour un signal ultrasonique de 5 MHz qui se propage dans un milieu possédant une
vélocité de 1500 m/s et une atténuation de 1 dB/cm/MHz, le taux de variation de l’amplification
serait égal à 0,75 dB/μs. Puisqu’il faut environ 133 μs à ce même signal pour parcourir 20 cm
(aller-retour d’une distance de 10 cm), l’amplificateur doit offrir une plage d’amplification de
100 dB pour assurer une compensation adéquate. À noter que cet exemple ne tient pas compte de
la largeur de bande du signal ultrasonique ni du fait que l’atténuation dépend de la fréquence. En
effet, à cette même profondeur, un signal ultrasonique de 2,5 MHz nécessiterait une amplification
de 50 dB tandis qu’un signal de 7,5 MHz, une amplification de 150 dB.
D’un autre côté, puisque plusieurs sondes peuvent être raccordées au système, un signal
d’identification composé de trois bits permet de différencier sept sondes différentes; la huitième
valeur permet d’identifier l’absence de sonde. Lors du balayage, la sonde produit deux signaux de
positionnement qui sont utilisés pour synchroniser le système avec la sonde: l’Index et le
Marqueur. Le signal Index est actif durant une courte période pour chaque cycle de rotation du
moteur et le signal Marqueur permet d’identifier chaque ligne balayée. Afin de prévenir les bris
occasionnés par un court-circuit et pour adapter les niveaux de tension, des circuits de protection
sont utilisés pour relier les signaux de contrôle numériques de la sonde au FPGA. Finalement, il
est à noter qu’il est possible d’ajuster la vitesse de balayage en contrôlant le niveau de tension
appliqué au moteur.
4.2.2 Section numérique
Outre les modules qui constituent le cœur de prétraitement numérique du signal ultrasonique,
plusieurs fonctionnalités sont réalisées par le FPGA afin de supporter l’application. En effet, tel
qu’illustré à la Figure 4.5, une unité système assure la gestion du clavier, des paramètres de
configuration, des modes d’opération et de la synchronisation du système. Parallèlement, une
unité de contrôle vidéo permet d’afficher l’image courante ainsi que la valeur des paramètres de
contrôle lors de leur modification. Finalement, un module d’asservissement permet de contrôler
la vitesse de rotation du moteur de la sonde.
66
D’autre part, tel qu’illustré par la Figure 4.3, les principaux modules qui constituent le cœur de
prétraitement sont le démodulateur et le convertisseur de balayage. Il est à noter que le cœur de
prétraitement numérique est présenté aux chapitres 5 et 6; le chapitre 5 étant consacré au
démodulateur et le chapitre 6, à l’architecture dans son ensemble. Toutefois, afin d’obtenir
rapidement un avant goût du fonctionnement de la plateforme et une validation du flot de
contrôle, il s’avère pertinent de prioriser l’implémentation du convertisseur de balayage.
Puisque le convertisseur de balayage permet d’effectuer la conversion entre le positionnement de
l’échantillon (coordonnée polaire) et le positionnement du pixel (coordonnée cartésienne) qui lui
correspond dans l’image, les premières caractéristiques sur lesquelles il repose sont le nombre de
lignes balayées et l’angle entre ces lignes. Présentement, un seul type de balayage est
supporté par la plateforme : le balayage sectoriel à 90o
. De plus, les sondes supportées permettent
de distinguer un maximum de 256 lignes par image. La sonde effectue un balayage en effectuant
un aller-retour constant sur la zone d’intérêt en parcourant les lignes de 0 à 255 puis de 255 à 0 et
permet ainsi de former deux images sectorielles (I1 et I2) pour chaque rotation complète. À noter
que l’angle entre chaque ligne n’est pas constant. En effet, l’angle entre le centre de la sonde et la
ligne courante varie, comme illustré par la Figure 4.6, selon une fonction sinusoïdale. Cette
relation découle de l’accélération non nulle du piézoélectrique entre les extrémités et le centre.
D’un autre côté, une calibration est requise pour superposer les deux images (I1 et I2) puisque le
centre de la sonde n’est pas toujours le même; il peut varier d’une sonde à l’autre d’environ ±8
lignes. La Figure 4.7 présente la méthode qui est utilisée pour effectuer l’alignement du centre et
superposer les deux images (aller-retour). Soient vc1 et vc2, les positions de la ligne centrale pour
I1 et I2. Grâce à deux registres de calibration Δvc1 et Δvc2, il est possible de décaler les deux
images de façon à ce que les deux images se superposent et que le centre de la sonde corresponde
au centre des images.
   
1 1 2 2
= 0
c c c c c
v v v v v
     (4.1)
67
Figure 4.5 : Modules de support pour la gestion du système
0 255
45o
- 45o
v
θ
Figure 4.6 : Fonction sinusoïdale utilisée pour déterminer l’angle entre chaque ligne balayée
68
Il est à noter que l’image résultante présente un total de 224 lignes sur environ 80o
puisque les
registres peuvent décaler l’image de ±8 lignes. Au total, c’est 32 lignes, 16 lignes par côtés, qui
ne seront pas affichées afin de produire une image symétrique et complète pour I1 et I2.
ΔvC=0
vc1 +ΔvC1 = vC2 + ΔvC2
ΔvC1 ΔvC2
a) b)
Figure 4.7 : Méthode utilisée pour superposer les deux images (aller-retour) : a) Images
superposées sans calibration, b) Images superposées avec repositionnement du centre du balayage
pour chaque image
Avec les signaux Marqueur et Index ainsi que les calibrations Δv1 et Δv2, il est possible d’établir
la ligne courante (v) et l’angle qui lui est associé à l’aide d’une table de conversion. Pour obtenir
une coordonnée polaire, il ne manque que la position (u) de l’échantillon sur la ligne. Cette
information est obtenue en comptant le nombre d’échantillons qu’il y a entre le début de chaque
ligne et l’échantillon courant. Le premier échantillon du signal ultrasonique est donc
échantillonné à la surface de la sonde et le dernier, à une distance légèrement supérieure à la
profondeur désirée afin de remplir les pipelines de traitement (présentés aux chapitres 5 et 6).
En plus de s’appuyer sur les méthodes conventionnelles de convertisseur de balayage qui consiste
à convertir les coordonnées polaires (u,v) obtenues en coordonnées cartésiennes (x,y) en fonction
de la résolution de l’image affichée [75], la méthode proposée s’adapte également à la profondeur
à afficher. Cette méthode permet de réduire l’interpolation et d’effectuer un zoom avec un
69
maximum de données véritables. En effet, au lieu d’effectuer une décimation conventionnelle, le
convertisseur de balayage proposé fournit la position de chaque échantillon et laisse le soin au
processeur ultrasonique (présenté au chapitre 6) de traiter les données adéquatement en fonction
de l’image à construire.
Le premier étage du convertisseur de balayage convertit en millimètres l’identificateur de
l’échantillon en utilisant la vélocité du milieu dans lequel se propage l’onde ultrasonique (~1500
m/s) et la fréquence d’échantillonnage (présentement 20 Méch/s). En tenant compte du temps
nécessaire pour effectuer l’aller et le retour, le facteur de conversion est d’environ 2,66 mm/éch.
Tel qu’illustré à la Figure 4.8, l’élément piézoélectrique ne se trouve pas au centre de rotation, il
est donc nécessaire d’ajouter la distance entre l’élément piézoélectrique (dp) et le centre de
rotation (dcr). À noter que cette distance est constante mais n’est pas la même pour tous les types
de sondes. La position de l’échantillon courant par rapport au centre de rotation est donc :
 
2,66
mm éch cr p
mm
u u d d
éch
  
 (4.2)
L’étage suivant détermine les coordonnées cartésiennes en millimètres en utilisant des tables de
conversion pour les fonctions sinus et cosinus :
 
   
 
cos et sin
mm mm mm mm
x u v y u v
 
  (4.3)
En fonction de la profondeur à afficher et de la résolution de l’image, un facteur de compression
(fcompression) est calculé :
ay
nombre de pixels disponibles en y
, surface = 0cm
profondeur + d
nombre de pixels disponibles en y
,surface 0cm
profondeur - surface
compression
f




 

 


(4.4)
Il est à noter qu’il est nécessaire d’ajouter la distance day à la profondeur lorsque la surface
correspond à celle de la sonde pour afficher la courbure en haut de l’image qui est propre au
balayage sectoriel.
70
Finalement, après avoir déterminé le nombre de pixels nécessaire pour positionner l’image à
l’écran, décalagex et décalagey, avec l’équation (4.5), il est possible de convertir la position de
l’échantillon (millimètre) en position à l’écran (pixel) avec l’équation (4.6). Puisque les pixels ne
sont pas carrés et que le facteur de compression est fixé par rapport à l’axe y, un ajustement de ce
dernier pour l’axe x s’avère nécessaire. De plus, il est à noter que la position selon l’axe y de
l’échantillon en millimètre doit être décalée vers le haut d’une distance équivalente à la distance
du centre de rotation (dcr) et de la distance de la surface à afficher.
x
x
y
y
résolution
décalage (en pixel)
2
résolution - nombre de pixels disponible en y
décalage = (en pixel)
2

(4.5)
 
x
x
y
y
dimension pixel
décalage
dimension pixel
- -surface décalage
pixel mm compression
pixel mm cr compression
x x f
y y d f
 
 
 

(4.6)
a) b)
Figure 4.8 : Convertisseur de balayage: a) Position de l’élément piézoélectrique et du centre de
rotation dans la sonde, b) Construction des images
71
4.2.3 Sources d’alimentation et réseaux de distribution
Il arrive souvent que les sources d’alimentations soient prises pour acquis et que les efforts
nécessaires pour alimenter correctement les circuits soient négligés. En effet, les caractéristiques
d’un circuit risquent d’être dégradées sans une alimentation et un réseau de distribution adéquats.
Par ailleurs, puisque l’un des objectifs est la portabilité, il est important de maximiser l’efficacité
des sources d’alimentation. Dans le même ordre d’idée, il serait souhaitable que l’alimentation du
système puisse être faite à partir d’une source de tension unique. De plus, le niveau de tension de
cette source devrait être suffisamment bas pour offrir l’opportunité d’utiliser une batterie comme
source de tension.
D’autre part, dû au niveau de tension relativement faible du signal ultrasonique à l’étage d’entrée
du module de prétraitement analogique, toutes les sources de bruit sont à considérer puisqu’elles
ont un impact direct sur la qualité de l’image. Il est à noter que l’une des sources importantes de
bruit est générée par la source de tension haute-tension qui est nécessaire pour produire le signal
d’excitation. En effet, en plus du bruit de commutation qui est injecté dans les alimentations, le
champ électromagnétique qui est produit n’est pas négligeable et pourrait perturber le système.
Finalement, il est important de mentionner que l’objectif de cette première implémentation
consiste à faire ressortir les facteurs importants liés aux sources d’alimentation et aux réseaux de
distribution dans l’optique de proposer des recommandations en vue d’une future phase
d’intégration.
4.3 Implémentation du système échographique miniaturisé
L’implémentation matérielle sur circuit imprimé (PCB) de l’échographe miniaturisé occupe 10
cm x 16 cm (Figure 4.9 et Figure 4.10) et requiert huit couches. Plus de 50 % de cette surface est
utilisée par les sources d’alimentation. La section numérique occupe 20 cm2
; la section
analogique 25 cm2
; la section de l’afficheur 6 cm2
et la source d’alimentation haute tension 6 cm2
.
72
Figure 4.9 : Photographie du système échographique miniaturisé son ensemble montrant la sonde
et le clavier matriciel 4x4
a) b)
Figure 4.10 : Photographie du circuit imprimé du système échographique miniaturisé : a) Dessus
du PCB montrant les diverses alimentations, le FPGA et la PSRAM; b) Dessous du PCB
montrant l’ACL
4.3.1 Implémentation : sources d’alimentation et réseaux de distribution
L’espace occupé par les sources d’alimentation résulte de l’utilisation des nombreuses tensions
requises par les différents composants discrets. En effet, étant donné que les circuits qui
composent la plateforme sont des circuits discrets, la flexibilité en ce qui concerne le choix des
niveaux de tension des sources d’alimentations est très limitée. La section numérique requiert des
73
tensions de 1,2 V, 1,8 V, 2,5 V et 3,3 V; la section analogique, 3,3 V et ±5 V; l’afficheur -12 V, -
6 V, 5 V, 3,3 V, 15 V et 30 V; et, finalement, le circuit d’impulsion haute tension, 3.3 V, 12 V et
-100 V. De plus, il est nécessaire d’isoler les alimentations entre les sections analogique et
numérique afin de réduire le niveau de bruit.
Les Figure 4.11 et Figure 4.12 présentent la topologie de la distribution des alimentations pour
l’ACL et pour le système échographique. Afin de procurer une distribution convenable et d’isoler
la section analogique de la section numérique, une architecture point de charge (Point Of Load,
POL) est utilisée pour la section analogique, pour l’afficheur ainsi que pour le 1,8 V et le 2,5 V
numérique. Des régulateurs linéaires à haute efficacité et des filtres passifs sont utilisés afin de
filtrer le bruit provenant des alimentations numériques. Les sources des alimentations numériques
de 1,2 V, 3,3 V et 5 V ont été regroupées pour minimiser la longueur de la trace de la tension
d’entrée et la distribution de ces alimentations est assurée par des plans d’alimentation.
Figure 4.11 : Topologie de la distribution des alimentations pour l’ACL
74
Figure 4.12 : Topologie de la distribution des alimentations pour le système échographique
4.3.2 Implémentation : section analogique et mixte
La section analogique débute avec l’amplification de l’écho par un préamplificateur à faible bruit
(LNA du AD8332, Analog Devices). Cet étage présente un gain fixe de 19 dB pour une bande
passante de 130 MHz. Ensuite, deux étages d’amplificateur à gain variable (deux VGA du
AD8332, Analog Devices) possédant une bande passante de 110 MHz permettent d’obtenir une
amplification supplémentaire jusqu’à 96 dB, soit 48 dB chacun. Un générateur de rampe de
tension configurable est utilisé pour contrôler le gain des deux VGA afin de compenser
l’atténuation engendrée par la propagation du signal ultrasonique; constitué par l’amplificateur
TGC. Synchronisé avec la sonde, le générateur de rampe de tension produit une nouvelle rampe
pour chaque ligne balayée. Finalement, avant d’être numérisé à 20 Méch/s sur une résolution de
10 bits par un convertisseur analogique à numérique (ADC10040, National Semiconductor),
l’écho amplifié est préalablement filtré par un filtre passe-bande passif d’ordre 2 possédant une
bande-passante de 1 à 10 MHz. D’un autre côté, le circuit d’impulsion haute tension permet de
générer un signal d’excitation de -100 V d’une durée variable. C’est le FPGA qui détermine la
durée, la forme et le moment de l’impulsion. En effet, le circuit (MD1210 et TC2320, Supertex)
75
permet de convertir le signal de sortie du FPGA de 3,3 V à -100 V en utilisant une tension
intermédiaire de 12 V. Le circuit de protection qui permet de raccorder le canal de transmission
avec le canal de réception permet également d’adapter l’impédance d’entrée du circuit avec la
sonde.
Une sonde à balayage mécanique (GP2000 5 MHz, Interson) est utilisée pour produire une image
sectorielle de 90o
en utilisant 256 lignes ultrasoniques. Les signaux de positionnement (index et
marqueur) sont utilisés pour déterminer la position de l’élément piézoélectrique (un élément
12mm, fréquence centrale de 4,75 MHz, 85 % de bande passante, focus à 8 cm) au cours du
balayage. À chaque nouvelle ligne, une impulsion haute tension est générée ainsi qu’une
initialisation du TGA. De plus, une source d’alimentation à tension variable (0 V à 5 V) permet
de contrôler la vitesse de rotation du moteur de la sonde.
4.3.3 Implémentation : section numérique
La section numérique est composée d’un seul FPGA (XC3S1500L-FG320, Xilinx) et d’une
mémoire de programmation FLASH (XCF08P, XILINX), d’une mémoire PSRAM
(MT45W2MW16BAFB-708, Micron) et d’une mémoire non volatile FRAM (FM24CL04,
Ramtron). Il est à noter que la mémoire FLASH est utilisée pour reprogrammer les données de
configuration du FPGA (train binaire, bitstream) lors du démarrage et n’est pas utilisée par la
suite. La mémoire FRAM est reliée au FPGA par un lien de communication de type IIC (Inter-
Integrated Circuit) et permet de charger les paramètres de configuration de l’application lors du
démarrage. À noter que l’usager peut modifier ces paramètres et les enregistrer afin de configurer
l’appareil selon ses besoins. De plus, une interface matricielle 4x4 est implémentée dans le
FPGA; ce qui permet d’utiliser un clavier de 16 touches.
Le circuit de l’afficheur est composé des sources d’alimentation de l’afficheur, du circuit de
référence des tons de gris et d’un écran ACL (LQ036Q1DA01, Sharp) de 3,6 pouces. L’écran
possédant une résolution de 320x240 pixels et une résolution de 18 bits pour les couleurs (18-bit
RGB). Puisque l’image affichée est en tons de gris, seulement 6 bits sont utiles pour représenter
76
l’intensité du pixel; ce qui offre une possibilité de 64 tons de gris (6-bit Grayscale). De plus, il est
à noter que l’interface numérique qui relie le FPGA au circuit de l’afficheur est similaire au
standard « Video Graphics Array ».
Finalement, le Tableau 4.1 présente le sommaire de l’utilisation des ressources du FPGA
(XC3S1500L-FG320, Xilinx) pour l’implémentation des unités de contrôle de base de
l’échographe miniaturisé en utilisant le logiciel de synthèse ISE WebPACK 9.2.01i de Xilinx.
L’unité de gestion de lignes détecte le début de chaque ligne et génère l’impulsion numérique qui
contrôle l’excitation haute-tension du piézoélectrique. Le contrôleur de la mémoire et les deux
tampons de type FIFO permettent de construire une mémoire vidéo à deux ports à partir de la
mémoire PSRAM.
Tableau 4.1 : Sommaire de l’utilisation des ressources du FPGA 3s1500lfg320-4 de XILINX par
les unités de contrôle de base
Unité
Tranches
BRAMs MULT18x18s
Tables Registres Total
Gestion de ligne1
51 9 27 0 0
Calibration superposition 161 73 84 0 0
Convertisseur de balayage 1890 231 1018 0 7
Interface usager2
1283 680 709 0 0
2 FIFOs 241 117 151 4 0
Contrôleur de la mémoire 598 275 314 0 0
Contrôle de l’affichage3
560 57 301 0 3
Total 4784 1442 2604 4 10
1 : Possibilité de huit modes d’impulsion pour une sonde à 5 MHz.
2 : Inclut le contrôleur IIC, l’interface pour le clavier matriciel 4x4, les registres pour les paramètres de
configuration et l’asservissement du moteur de la sonde.
3 : Permet d’afficher l’image et la valeur des paramètres de configuration.
4.4 Validation du système échographique miniaturisé
La validation du système échographique miniaturé est divisée en trois sections : validation des
sources d’alimentation, validation des circuits analogiques et validation des circuits numériques.
77
4.4.1 Validation des sources d’alimentation
Le Tableau 4.2 présente l’efficacité des différentes sources d’alimentation. Relativement à la
source de tension d’entrée (Vin), la puissance totale consommée est de 3,3 W. L’efficacité
globale des sources d’alimentation est de 57 % : ce qui correspond à 1,9 W utilisé et à 1,4 W
perdu. Cette efficacité globale souligne bien l’importance des sources d’alimentation et de son
réseau de distribution. En effet, près de la moitié de l’alimentation est perdue. De plus, il est
important de mentionner qu’en plus de diminuer l’autonomie du système, cette perte énergétique
contribuera à l’élévation de la température. Un dissipateur thermique pourrait être nécessaire; ce
qui augmentera la dimension du système. De plus, si cette chaleur ne peut être évacuée
passivement, un dispositif actif, qui augmentera la consommation globale, devra être ajouté au
système.
Pour cette implémentation, les étages secondaires et tertiaires présentent, dans l’ensemble,
d’excellents résultats. Toutefois, les étages primaires détériorent l’efficacité relativement à la
source de tension d’entrée (Vin). Ce résultat met en lumière l’importance des étages primaires.
Dans un autre ordre d’idées, il est important de constater que l’ACL et la sonde consomment à
eux seuls près de 1,2 W; essentiellement par le rétro éclairage de l’ACL et le moteur de la sonde.
L’efficacité pour ces deux sections est très satisfaisante : près de 80 % pour le rétro éclairage et
l’alimentation numérique de la sonde, et plus de 90 % pour les autres sources d’alimentation de
ces deux sections. Toutefois, comme l’ACL utilise la source primaire 3,3 V, l’efficacité relative
de cette section par rapport à Vin en est grandement affectée et redescent légèrement au dessus
des 50 %. Dans le même ordre d’idée, l’efficacité relative à Vin de la section de la sonde atteint
77 %. Finalement, il s’avère également que la perte est significative pour les sections numérique
et analogique du système. Ce résultat renforce, encore une fois, la pertinence, en vue de
l’intégration du système dans le TPU, d’être consciencieux dans la réalisation des sources
d’alimentation et du réseau de distribution.
78
Tableau 4.2 : Efficacité des sources d’alimentation
Étage primaire
Source de tension (V)
Puissance (mW) Efficacité
(%)
Entrée Sortie
1,2 V1
330 85 25,76
3,3 V1
1532 1002 65,40
5 V1
1240 990 79,84
-100 V2
195 15 7,69
Étages secondaires et tertiaires
Source de tension (V)
Puissance (mW) Efficacité
(%)
Efficacité
relative à Vin
(%)
Entrée Sortie
1,8 V 5 4 80,00 52,32
2,5 V3
152 115 75,66 49,48
3,3 V_A 51 49,5 97,06 63,48
5 V_A 319 308 96,55 77,09
-5 V 53 50 94,34 75,32
-5 V_A 21 20 95,24 71,73
5 V_moteur4
357 337 94,07 75,37
12 V_A5
10,5 7 66,67 53,23
ACL : 3,3 V 68 66 97,06 63,48
ACL : 5 V, 15 V, 12 V 2 2 ~100 65,40
ACL : -10 V 29 28 96,55 72,72
ACL : -6 V6
28 Négligeable ~0 0
ACL : Rétro éclairage 620 500 80,00 52,75
Efficacité des différentes sections de l’échographe miniaturé
Sections
Puissance (mW) Efficacité
(%)
Utilisée Perdue Totale
Système
Analogique
Numérique
HV (-100 V)
707,5
384,5
308
15
735,1
134,06
421,05
180
1442,62
518,57
729,05
195
49,04
74,15
42,25
7,69
ACL 568 486,97 1093,47 51,94
Sonde 587,5 173,41 760,91 77,21
Total 1863 1434 3297 56,51
1 : Une source d’alimentation mieux adaptée à l’application présenterait une meilleure efficacité.
2 : L’efficacité varie entre 7,69 % et 25,71 % (consommation entre 15 et 90 mW) en fonction du
type d’impulsion. Valeurs moyenne, point de consommation durant les impulsions.
3 : Lorsque le programmeur J-TAG est utilisé, 25 mW supplémentaire sont consommés.
4 : Le moteur de la sonde GP2000 5 MHz requiert entre 44,4 mW et 700 mW en fonction de la
tension appliquée (entre 1,2 V et 5 V respectivement).
5 : Valeur moyenne, pointe de consommation durant les impulsions.
6 : Le régulateur utilise les 28 mW pour alimenter ses circuits internes, soit 2,8 mA pour une
tension d’entrée -10 V.
79
4.4.2 Validation du circuit analogique
En ce qui concerne la section analogique, le générateur d’impulsions constitue le premier circuit à
valider. Évidemment, sans excitations, il ne serait pas possible de générer des signaux
ultrasoniques. À l’intérieur d’une période de 800 ns, il est possible de contrôler le niveau de
tension de l’impulsion (0 V ou -100 V) : ce qui permet de générer l’impulsion désirée. La Figure
4.13 présente quelques exemples d’impulsions.
a) b)
c) d)
Figure 4.13 : Impulsion de -100 V aux bornes du piézoélectrique : a) impulsion de 50 ns, b) deux
impulsions de 50 ns séparées de 50 ns, c) impulsion de 150 ns, d) impulsion de 600 ns
80
a) b)
c) d)
Figure 4.14 : Rampes de tension de l’amplificateur à compensateur temporel de gain : a) gain nul
et pente moyenne ; b) gain faible et pente moyenne ; c) gain moyen et pente faible ; d) gain élevé
et pente nulle
Après avoir généré l’impulsion, une rampe de tension permet de contrôler le TGC afin que le
système puisse amplifier les échos du signal ultrasonique. D’ailleurs, il est possible d’observer à
la Figure 4.14 différents exemples de rampe de tension que le système peut générer. Le premier
canal (A1, courbe du haut) présente la rampe de tension tandis que le deuxième canal (A2, courbe
du bas) correspond au signal d’activation, en logique négative, d’une ligne balayée. Il est
intéressant de souligner que la pente ainsi que le décalage de la rampe peuvent être modifiés.
Présentement, 128 valeurs différentes peuvent être sélectionnées par l’usager pour chacun des
paramètres. À noter qu’un circuit de protection limite le niveau de tension de la rampe de tension
à 2 V; niveau de tension maximum toléré par l’amplificateur.
81
Finalement, la Figure 4.15 présente le signal ultrasonique avant et après l’amplification. Une
oscillation suit l’impulsion, toutefois elle est absorbée rapidement par le circuit d’adaptation. De
plus, le niveau de bruit est très satisfaisant et il est possible d’amplifier adéquatement le signal
avant qu’il soit numérisé.
a) b)
Figure 4.15 : Signaux ultrasoniques à l’entrée et à la sortie de l’amplificateur à compensateur
temporel de gain ; a) Signal à l’entrée; b) Signal différentiel à la sortie
4.4.3 Validation de la section numérique
Les principaux composants de la section numérique, soit le FPGA et sa mémoire de
programmation FLASH, la PSRAM et la FRAM fonctionnent correctement. En effet, en utilisant
le port JTAG, il est possible de programmer directement le FPGA ou de programmer la mémoire
FLASH. De plus, en utilisant le clavier matriciel, il est possible de modifier tous les paramètres
de contrôle. Tous les paramètres peuvent être sauvegardés dans la mémoire FRAM et chargés lors
du démarrage. Le circuit pour l’ACL fonctionne correctement et il est possible d’accéder à la
mémoire PSRAM en mode asynchrone.
Afin d’illustrer le fonctionnent de l’ensemble des modules de support implémenté en VHDL, la
Figure 4.16 présente les résultats obtenus en simulation et expérimentalement du convertisseur de
balayage pour différentes profondeurs. La Figure 4.17 présente des exemples de zoom obtenu en
temps-réel grâce au module de compression. En plus de mettre en évidence le bon
82
fonctionnement du convertisseur de balayage, les images expérimentales permettent de valider
l’ensemble de l’implémentation des unités de contrôle de base de l’échographe miniaturisé. En
effet, le flot de contrôle, la synchronisation des différentes unités ainsi que l’initialisation du
système sont adéquats. De plus, le motif moiré des images expérimentales correspondent avec
celui des images obtenues par simulation. Cette correspondance n’est possible que s’il n’y a pas
d’erreur. En effet, même une petite erreur dans le calcul aura un impact important sur le motif
moiré et il serait alors facile d’observer une différence entre les images.
4.5 Conclusion
La quantité requise de niveaux de tension différents à un impact significatif sur les dimensions du
système. Il est évident que les sections analogique et numérique doivent être optimisées de
manière à minimiser le nombre de niveaux de tension requis. Une implémentation avec des ASIC
contribuerait grandement à réduire le nombre de tensions différentes et ainsi réduire l’espace
occupé par les sources d’alimentation. De plus, les résultats démontrent que l’efficacité des
sources d’alimentation et la topologie de distribution jouent un rôle important au point de vue de
la consommation globale du système. Par conséquent, afin de maximiser l’autonomie, il est
important d’implémenter des sources d’alimentation adaptées à la consommation du système pour
qu’elles puissent opérer à leur efficacité maximale. À titre d’exemple, il est intéressant de
rappeler que l’implémentation de la source d’alimentation de 1,2 V cible une consommation
maximale du FPGA. Cette implémentation offre beaucoup de flexibilité, toutefois, elle ne
présente pas une efficacité acceptable lorsque le FPGA consomme peu. Il est à noter que la
flexibilité de la source d’alimentation de 1.2 V ne sera plus requise lorsque le système sera
complété; la consommation maximale sera connue. Dans le même ordre d’idée, les autres sources
primaires (5 V et 3,3 V) pourraient être facilement adaptées suite aux résultats obtenus.
D’un autre côté, en plus de fonctionner correctement, la section analogique offre une bonne
flexibilité de contrôle afin de valider le système. De plus, l’implémentation du système avec un
FPGA s’avère une bonne avenue comme première approche de SoC. En effet, la
reprogrammabilité du FPGA permet de valider différents algorithmes et d’apporter toutes les
modifications souhaitées. Finalement, selon les résultats obtenus de l’implémentation des
83
modules de support, il s’avère qu’il reste suffisamment de ressources matérielles dans le FPGA
pour l’implémentation du reste du système.
Position du pixel en X
a) b)
c) d)
e) f)
Figure 4.16 : Résultats du convertisseur de balayage pour différentes profondeurs sur une
résolution de 320 x 240 pixels : a) simulation de 0 à 15 cm ; b) expérimental de 0 à 15 cm ; c)
simulation de 0 à 1 cm; d) expérimental de 0 à 1 cm expérimental; e) simulation de 0 à 4 cm; f)
expérimental de 0 à 4 cm
84
Position
du
pixel
en
Y
a) b)
c) d)
Figure 4.17 : Résultats du convertisseur de balayage pour des zooms sur une résolution de 320 x
240 pixels : a) simulation 8 cm à 16 cm ; b) expérimental 8 cm à 16 cm ; c) simulation 4 cm à 11
cm ; d) expérimental 4 cm à 11 cm
85
CHAPITRE 5 CONCEPTION ET VALIDATION D’UN
DÉMODULATEUR EN QUADRATURE
Ce chapitre porte sur la démodulation en quadrature numérique des signaux ultrasoniques. Il est
important de mentionner que l’information contenue dans les signaux ultrasoniques nécessaire
pour construire une image en Mode-B est modulé en amplitude. Par conséquent, il est nécessaire
d’effectuer une démodulation pour en extraire l’enveloppe. Deux méthodes conventionnelles
peuvent être utilisées pour effectuer cette opération puisque les signaux ultrasoniques possèdent
un support fréquentiel à large bande. La première méthode consiste à effectuer un hétérodynage
numérique et la seconde utilise une Transformée de Hilbert (HT). Même s’il s’avère que la HT
est plus efficace que l’hétérodynage numérique, cette dernière méthode est généralement préférée
par rapport à la HT puisque, nonobstant la précision, la HT est plus complexe à réaliser [76].
Visant à prioriser la précision et sachant qu’il est envisageable de contourner la complexité par
une implémentation matérielle du démodulateur, l’architecture proposée est basée sur la méthode
de Hilbert.
Dans un premier temps, les bases mathématiques de la transformée de Hilbert sont présentées.
L’architecture matérielle et son implémentation feront l’objet des deux sections suivantes.
Finalement, la section de la validation montrera les résultats obtenus par simulation et par
expérimentation.
5.1 Base mathématique de la Transformée de Hilbert
La HT (  
 ) est un opérateur mathématique linéaire très utile en traitement de signaux puisque
qu’elle permet d’obtenir la représentation analytique d’un signal réel et de traiter les séries de
données non-linéaires et non-stationnaires [77]. Par définition [78], la HT d’une fonction g(t) est :
 
 
 
1 g
g t PV d
t


 

 


 (5.1)
Où PV est la partie principale de Cauchy (Cauchy principal value). La HT peut être représentée
par :
86
 
   
1
g t g t
t

 
 (5.2)
En appliquant la transformée de Fourier  
 
 des deux côtés, on obtient
 
          
1 1
j sgn
g t g t g t f g f
t t
 
   
      
 
 
   
     
  
     (5.3)
Avec  
    
g t g f

 et où sgn() est la fonction signe telle que représentée à la Figure 5.1 pour
l’expression y=sgn(x).
1
-1
y
x
Figure 5.1 : Représentation de l’expression y=sgn(x)
Finalement, en appliquant la transformée de Fourier inverse  
 
1

 des deux côtés, on obtient
 
      
1
j sgn
g t f g f
  
 
 
 
  (5.4)
Sous cette forme, il est plus facile de constater que la HT est un transformateur de phase et
correspond à un déphasage de 90o
pour les fréquences négatives et de -90o
pour les fréquences
positives.
Pour une série réelle x(t) et exprimée comme :
     
cos
x t a t t

  
  (5.5)
La HT est :
87
 
     
 
cos
x t a t t

  
 
  (5.6)
Le théorème de Bedrosian [79] stipule que si les spectres de fréquence de la transformée de
Fourier de a(t) et cos[θ(t)] sont totalement disjoints et si cos[θ(t)] possède un spectre de
fréquence plus élevé que a(t), alors la HT du produit de ces deux fonctions est :
   
     
 
cos cos
a t t a t t
 

   
   
  (5.7)
De plus, puisque
 
   
cos sin
t t
 

   
   
 (5.8)
La HT de x(t) donne le conjugué
 
     
sin
x t a t t

  
 
 (5.9)
Notez que le théorème de Bedrosian est respecté pour les signaux ultrasoniques. En effet, le
spectre de fréquence des signaux ultrasoniques est composé d’une fréquence centrale, définie par
la propriété mécanique de l’élément piézoélectrique, et d’une largeur de bande inférieure à 100
%, typiquement entre 20 et 85 % [18].
Soit un signal analytique z(t)
         
, 1
j t
z t x t jy t a t e j

     (5.10)
Où la partie réelle x(t) représente la donnée originelle et la partie imaginaire y(t) représente la HT
de la partie réelle.
   
 
y t x t
  (5.11)
Puisque y(t) possède de l’information sur la phase en plus de posséder la même amplitude et le
même contenu fréquentiel que x(t), la HT peut être utilisée afin de calculer l’amplitude, la phase
et la fréquence angulaire instantanées [77], [78]. L’amplitude instantanée de z(t) est :
     
2 2
a t x t y t
  (5.12)
88
La phase instantanée est
 
( )
( )
y t
t arctg
x t

 
  
 
(5.13)
La fréquence angulaire instantanée peut être obtenue sur un intervalle de temps dt en utilisant la
relation
=
d
dt

 (5.14)
5.2 Architecture du démodulateur en quadrature
Il fut démontré par Powers [80] que malgré le fait qu’il soit impossible de réaliser physiquement
une véritable HT, il est possible de construire un transformateur de Hilbert qui produira une
bonne approximation de la fonction de transfert. C’est cette approximation qui est utilisée pour
effectuer le calcul de la HT et est équivalente à un déphasage de 900
.
   
j sign
 
  
 (5.15)
Plusieurs techniques peuvent être utilisées afin de construire un transformateur de Hilbert qui
permet de traiter des données en temps réel : filtres à réponses impulsionnelles finies (RIF), filtres
à réponses impulsionnelles infinies (RII), filtres complexes ou autres techniques [81]-[84].
Puisque la complexité des filtres RIF est similaire à celle des filtres RII [81], que la latence n’est
pas critique et que les filtres RIF possèdent une meilleure stabilité, les filtres RIF sont donc
utilisés pour cette implémentation du transformateur de Hilbert.
La Figure 5.2 présente l’architecture proposée du démodulateur en quadrature basée sur les RIF
dédié au traitement des signaux RF ultrasoniques. Un circuit passe-bande de type RIF est utilisé
parallèlement au filtre HT de type RIF pour synchroniser le signal en phase (I) avec le signal de
quadrature (Q) et pour obtenir le même support fréquentiel sur ces deux signaux. Le filtre RIF
passe-bande doit posséder le même ordre et les mêmes caractéristiques fréquentielles que celui
89
utilisé pour approximer la HT. Toutefois, il possède un nombre impair de coefficients non-nuls,
contrairement au filtre HT de type RIF, qui en possède un nombre pair. De plus, un module
matériel qui effectue la fonction racine carrée basé sur une approximation linéaire par morceau
complète l’architecture du démodulateur en quadrature proposée.
0
f 0
2
BW
f 
0
2
BW
f 
0
f 0
2
BW
f 
0
2
BW
f 
 
tPM
S t
 
rPM
S t
 
0
rPM
S nT
 
0
PM
Q nT
 
0
PM
I nT
 
2
0
PM
I nT  
2
0
PM
Q nT
 
0
add
rPM
S nT
 
0
PM
A nT
 
1
tan
0
rPM
S nT

 
0
PW nT

Figure 5.2 : Architecture du démodulateur en quadrature
90
En mode pulsé (PM), les signaux ultrasoniques transmis (ST) et reçus (SR) qui possèdent une
bande fréquentielle de ωL=2πfL à ωH=2πfH, centrée à ω0=(ωH-ωL)/2 et une amplitude dépendante
en fréquence de Aω sont :
     
cos
H
L
tPM t
S t A t t d



 
  (5.16)
Et
       
cos
H
L
rPM r
S t A t t t d t

 

    
   
 (5.17)
Où η(t) est considéré, pour fin de simplification, comme étant le bruit au-dessus et au-dessous du
-3 dB associé à la bande passante des filtres. δω représente le déphasage de fréquence Doppler et
 , le déphasage. Le signal en mode PM échantillonné à une période T0 est
       
0 0 0 0 0
cos
H
L
rPM r
S nT A nT nT nT nT

 
 
   

   
 (5.18)
Pour le signal en quadrature, nous avons
     
0 0 0 0
sin
H
L
PM r
Q nT A nT nT nT

 
 
  

  
 (5.19)
Et pour le signal en phase
     
0 0 0 0
cos
H
L
PM r
I nT A nT nT nT

 
 
  

  
 (5.20)
À la sortie des multiplicateurs, nous obtenons
     
2 2 2
0 0 0 0
cos
H
L
PM r
I nT A nT nT nT

 
 
  

  
 (5.21)
     
2 2 2
0 0 0 0
sin
H
L
PM r
Q nT A nT nT nT

 
 
  

  
 (5.22)
91
Après l’addition,
   
2
0 0
H
add
L
rPM r
S nT A nT


 

  (5.23)
Finalement, l’amplitude de l’enveloppe est
   
0 0
H
L
PM r
A nT A nT


 

  (5.24)
Si l’information sur la phase angulaire instantanée est requise, tan-1
(Q/I) doit être déterminé, ce
qui donne
   
1
tan
0 0 0
H
L
rPM
S nT nT nT


 
  


  
 (5.25)
Finalement, la différence entre le temps nT0 et (n-1)T0 donne la fréquence angulaire instantanée
   
0 0 0
0
1
1
H H
L L
PW nT nT n T
T
 
   
   
 
   
  (5.26)
Les démodulateurs en quadrature de type HT basés sur les filtres RIF nécessitent l’utilisation de
filtres d’ordre élevé dû à leur large bande passante et à leurs zones de transition très courtes entre
la bande passante et les bandes atténuées. Plutôt que d’utiliser un seul et complexe démodulateur,
l’architecture proposée utilise un démodulateur de complexité réduite qui peut être adapté à
chaque support de fréquence des transducteurs en chargeant, à la volée, de nouveaux jeux de
coefficients. Cette approche adaptative est comparée avec deux autres méthodes de démodulation
en quadrature de type HT basée sur des filtres RIF. La première méthode est la conventionnelle et
utilise des coefficients réels pour le filtre RIF passe-bande possédant un gain unitaire et un
déphasage linéaire de 90o
sur toute la bande passante (0.1π à 0.9π). La seconde méthode est
l’approche générale de Reilly [83] et est basée sur un filtre RIF à coefficients complexes.
La distinction entre la méthode de Reilly et l’implémentation proposée repose sur la bande
passante. Tandis que l’approche de Reilly résulte en une bande passante similaire à celle de la
méthode conventionnelle, celle de la technique proposée est plus étroite et est adaptée à celle du
92
transducteur. La fréquence de coupure du filtre passe-bas utilisé pour construire le filtre passe-
bande équivaut à la moitié de la bande passante du transducteur (habituellement entre 20 % et 85
% de la fréquence centrale) au lieu de fS/4 (π/2 pour fS=fréquence de Nyquist) comme présenté
par Reilly. De plus, les coefficients du filtre passe-bas sont modulés par une exponentielle
complexe de fréquence égale à celle de la fréquence centrale du transducteur au lieu de fS/4.
Comparativement à un filtre RIF de même ordre obtenu avec l’approche de Reilly, il est possible
d’obtenir un niveau d’atténuation plus élevé dans la bande de coupure et moins d’oscillation dans
la bande passante en utilisant la méthode proposée.
La Figure 5.3 illustre les différents filtres qui peuvent être utilisés pour trois différentes sondes (2
MHz, 5 MHz et 7,5 MHz) avec une fréquence d’échantillonnage de 20 MHz comparativement à
ceux qui seraient utilisés en appliquant la méthode de Reilly. Le filtre passe-bas à gauche est
utilisé pour fixer le support fréquentiel. Le filtre passe-bande de droite résulte de la modulation
des coefficients du filtre passe-bas de gauche par une exponentielle afin d’effectuer une
translation dans le domaine fréquentiel. La bande passante pour les sondes de 2 MHz et 5 MHz
est de 100 % et de 40 % pour la sonde de 7.5 MHz.
5.3 Implémentation matérielle du démodulateur en quadrature
L’implémentation matérielle du démodulateur en quadrature est divisée en deux sections : le
transformateur de Hilbert et la fonction racine carrée.
5.3.1 Le transformateur de Hilbert
L’architecture proposée du transformateur de Hilbert pour des filtres RIF d’ordre N est présentée
à la Figure 5.4. Comparativement à l’implémentation d’une architecture conventionnelle qui
utilise deux filtres RIF distincts, l’architecture proposée utilise un seul registre à décalage partagé
entre les deux filtres afin de réduire la complexité du matériel requis. De plus, avec cette
topologie, la précision des coefficients n’a pas d’impact sur la taille du registre à décalage; ce qui
permet également d’utiliser des multiplicateurs de taille minimale. L’architecture proposée prend
également avantage de la symétrie des filtres RIF à phase linéaire afin de réduire le nombre de
multiplicateurs de près de la moitié (n/2 + 1).
93
a)
b)
c)
d)
Figure 5.3 : Méthode utilisée pour la construction des filtres RIF de type Hilbert : a) Méthode de
Reilly pour des sondes de 3 à 7,5 MHz ; b) Méthode proposée adaptée pour une sonde à 5 MHz ;
c) Méthode proposée adaptée pour une sonde à 2 MHz ; d) Méthode proposée adaptée pour une
sonde à 7,5 MHz
94
Plusieurs implémentations de multiplicateurs peuvent être utilisées telles que les multiplicateurs
dédiés du FPGA, des multiplicateurs basés sur une table de conversion (LUT) ou des
multiplicateurs à représentation numérique canonique signé (CSD). Les multiplicateurs dédiés
des FPGA et les multiplicateurs basés sur des LUT permettent d’utiliser plusieurs ensembles de
coefficients puisque ces derniers peuvent être enregistrés dans une LUT. D’un autre côté, les
multiplicateurs basés sur les LUT et CSD permettent de concevoir des filtres RIF d’ordre plus
élevé car ils contournent la limite imposée par la disponibilité des multiplicateurs dédiés des
FPGA. Pour des fins d’optimisation de la surface, il est conseillé d’utiliser les techniques dédiées
telle la représentation CSD [85]-[88]. Toutefois, ces implémentations peuvent requérir plus d’un
cycle d’horloge et n’offrent pas la flexibilité de pouvoir charger un nouvel ensemble de
coefficients à la volée. Les multiplicateurs dédiés des FPGAs ainsi que ceux basés sur une LUT
sont retenus afin de maximiser la flexibilité. Il est à noter que l’approche proposée requiert cette
flexibilité afin de supporter différents transducteurs ultrasoniques. De plus, il est important de
mentionner que l’architecture proposée est cadencée à la même fréquence que celle du signal
d’échantillonnage, ce qui permet d’effectuer une démodulation des signaux ultrasoniques à
fréquence élevée avec la même architecture pipelinée.
La méthode de design des FIR de Parks-McClellan, aussi connu comme étant l’algorithme de
Remez [89], disponible avec Matlab, est la méthode la plus utilisée pour concevoir des
transformateurs de Hilbert [90] et c’est cette méthode qui fut utilisée pour déterminer les
coefficients des filtres. L’algorithme de minimisation de l’erreur par l’estimation des moindres
carrés, aussi disponible avec Matlab, fut également utilisé pour déterminer les coefficients du
filtre passe-bande puisque l’algorithme de Remez ne converge pas pour tous les ordres de filtre.
Puisque les deux filtres possèdent un gain unitaire et que leurs coefficients sont plus petits que
un, tous les coefficients sont multipliés par le même facteur de mise à l’échelle afin de fixer le
nombre de bits utilisés pour représenter les coefficients. Ce facteur est une puissance de deux qui
correspond à la résolution souhaitée des coefficients. Par conséquent, la même quantité de bits
que le nombre utilisé pour la représentation des coefficients est tronquée à la sortie des filtres RIF
afin de ramener le gain à un facteur unitaire.
95
Figure 5.4 : Architecture proposée du transformateur de Hilbert pour des filtres RIF d’ordre N
Le nombre de bits (p) qui est utilisé pour représenter les coefficients et l’ordre des FIR (N) doit
être suffisamment élevé pour assurer une bonne approximation de la HT. Malheureusement, la
complexité augmente avec l’incrémentation de p ou N. Comme il l’est expliqué dans [91], il est
important d’explorer différentes valeurs de p et N, puisqu’il peut s’avérer avantageux
d’incrémenter p plutôt que N afin d’optimiser la complexité matérielle. Notez qu’il n’est pas
possible de définir des valeurs optimales pour p et N, puisque la solution visée est relative à la
performance, précision, dimension et consommation de puissance désirées par rapport aux
solutions basées sur une architecture logicielle. Par conséquent, une des parties de l’objectif est
de proposer une valeur pour p et pour N qui mène à une solution qui peut être efficacement
implémentée dans un seul FPGA à faible consommation et faible coût.
Afin de comparer les trois méthodes, la somme des résidus au carré normalisée (équation (5.27))
est utilisée comme fonction de coût (Figure 5.5). La référence utilisée pour cette analyse est la
fonction de Hilbert, disponible avec Matlab. Cette fonction effectue une transformée de Fourier
 
96
sur une série réelle, puis remplace la partie imaginaire par zéro et effectue finalement une
transformée de Fourier inverse. 2000 séries de signaux ultrasoniques (τ1) composés, chacune, de
600 échantillons (τ2) sont utilisées pour cette analyse. Chaque série est composée d’un nombre
pseudo-aléatoire de pulses gaussiens normalisés possédant une fréquence centrale à 5 MHz et une
largeur de bande de 50 %. Noter également que la position de chaque pulse gaussien normalisé
est déterminée pseudo-aléatoirement dans la série. Comme il est présenté à la Figure 5.6, une
large bande passante de 1 à 9 MHz est utilisée pour la méthode conventionnelle (filtres RIF à
coefficients réels) et la méthode de Reilly (filtre RIF à coefficients complexes). La méthode
adaptée (filtre RIF à coefficients complexes à bande adaptée plus étroite) possède une bande
passante allant de 2,5 à 7,5 MHz.
   
 
1 2
1 2
2
, ,
0 0
,
2
0 0
serie N p serie
serie n
N p
serie
serie n
ht n HT n
SRCN
HT n
 
 
 
 


 
 
(5.27)
(a) (b)
Figure 5.5 : Somme des résidus au carré normalisée : a) N=8 à 64 et p=16, b) N=16 et p=5 à 16
De plus, les résultats de la démodulation d’une impulsion gaussienne possédant une fréquence
centrale de 5 MHz et une bande passante de 40 % est présentée à la Figure 5.7. Les trois
méthodes permettent d’obtenir une résolution axiale mesurée à la moitié de la pleine largeur du
maximum (full-width-at-half maximum (FWHM)) de l’intensité de 0,69 mm lorsqu’une
97
fréquence d’échantillonnage de 20 MHz est utilisée. Même en utilisant une architecture de faible
complexité (filtres d’ordre 16), cette résolution est similaire à celle obtenue avec la méthode de
référence idéale qui est de 0,68 mm. Il est à noter que la méthode adaptée permet d’obtenir une
démodulation qui présente moins de distorsion comparativement à la méthode conventionnelle et
à la méthode de Reilly.
(a) (b)
(c) (d)
Figure 5.6 : Gain et phase des filtres RIF pour N=32, p=10: a) Filtre RIF passe-bande
conventionnel, b) Filtre RIF HT conventionnel, c) Filtre RIF complexe large bande selon la
méthode de Reilly, d) Filtre RIF complexe à bande étroite adapté selon la méthode proposée
5.3.2 La fonction racine carrée
L’architecture proposée du module qui effectue l’opération racine carrée nécessaire à la
démodulation en quadrature de type HT est basée sur une approximation linéaire par morceau
divisée en deux étages d’un pipeline (Figure 5.8). Avec cette architecture pipeline, il est possible
d’obtenir un résultat à chaque cycle d’horloge avec une latence de seulement deux cycles
d’horloge.
0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9
-30
-25
-20
-15
-10
-5
0
5
Fréquence angulaire normalisée ( rad/éch.)
Gain
(dB)
Gain (dB) et Phase du filtre RIF passe-bande (méthode conventionnelle)
-52.7723
-44.8744
-36.9765
-29.0786
-21.1807
-13.2828
-5.3849
2.513
Phase
(radians)
0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9
-30
-25
-20
-15
-10
-5
0
5
Fréquence angulaire normalisée ( rad/éch.)
Gain
(dB)
Gain (dB) et Phase du filtre RIF HT (méthode conventionnelle)
-54.3428
-46.4459
-38.5489
-30.652
-22.7551
-14.8581
-6.9612
0.9357
Phase
(radians)
-1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8
-30
-25
-20
-15
-10
-5
0
5
Fréquence angulaire normalisée ( rad/éch.)
Gain
(dB)
Gain (dB) et Phase du filtre RIF (méthode Reilly)
-51.2261
-43.3089
-35.3917
-27.4745
-19.5573
-11.6401
-3.723
4.1942
Phase
(radians)
-1 -0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8
-50
-45
-40
-35
-30
-25
-20
-15
-10
-5
0
5
Fréquence angulaire normalisée ( rad/éch.)
Gain
(dB)
Gain (dB) et Phase du filtre RIF (méthode adaptée)
-39.6457
-35.5795
-31.5134
-27.4472
-23.3811
-19.3149
-15.2487
-11.1826
-7.1164
-3.0503
1.0159
5.082
Phase
(radians)
Les archi
traitent q
plus lent
que celle
rapideme
réduire la
Figure 5.
possédan
Référenc
Un encod
LUT pou
itectures con
qu’un seul bi
[92]. De plu
de l’horloge
ent ou d’utili
a puissance d
.7 : Démodu
nt une fréque
e Matlab, b)
deur est utili
ur chaque se
nventionnell
it par cycle
us, puisque l
e d’échantill
iser une horl
dynamique.
(a)
(c)
ulation avec
ence centrale
) Convention
isé afin de sé
ection linéair
les nécessite
d’horloge [4
la fréquence
lonnage, il e
loge plus len
c une config
e de 5 MHz
nnelle, c) Re
électionner u
re de l’appro
ent une fréq
44], requière
e de l’horlog
est possible d
nte que les c
guration N=
et une band
illy, d) Adap
une pente (m
oximation. L
quence d’ho
ent plus de l
ge de l’archit
de traiter de
circuits conv
16 et p=16
de passante d
ptée
m) et un déc
L’erreur max
orloge élevée
latence et po
tecture prop
s signaux éc
ventionnels,
(b)
(d)
d’une impu
de 40 % selo
alage (b) co
ximale obten
e puisqu’ell
ossèdent un
posée est la m
chantillonnés
ce qui perm
ulsion gauss
on la méthod
ntenus dans
nue dépend
98
les ne
débit
même
s plus
met de
sienne
de: a)
deux
de la
99
quantité de segmentation de la fonction racine carrée. En effet, plus la fonction racine carrée est
divisée en petites sections, plus l’approximation sera précise. Toutefois, plus il y a de sections,
plus la quantité de matériel requis pour accomplir cette approximation sera élevé. Veuillez noter
que pour cette implémentation, une erreur de 1 LSB est raisonnable si la résolution de la valeur
de sortie est de plus de 8 bits (résolution maximale qui sera utilisé par les données).
Figure 5.8 : Architecture de la fonction racine carrée basée sur une approximation linéaire par
morceau
5.4 Validation du démodulateur en quadrature
Les résultats obtenus lors de la validation du démodulateur en quadrature sont présentés en trois
parties : les résultats de simulation, les résultats de l’implémentation matérielle et les résultats
expérimentaux.
5.4.1 Résultats de simulation
Afin de comparer la performance des trois méthodes pour le traitement de signaux bruités, six
différents niveaux de bruit blanc Gaussien sont injectés aux séries de test (pas de bruit, et 24 dB,
12 dB, 6 dB, 3 dB et 0,5 dB SNR). Les résultats des simulations des trois solutions proposées
sont présentés à la Figure 5.9. De plus, la Figure 5.10 présente quelques exemples de simulations
de démodulation pour différentes combinaisons de N et de p. Avec cette exploration et les
résultats de comparaison des différentes méthodes avec la somme des résidus au carré
normalisée, l’architecture que nous obtenons avec la méthode adaptée, en utilisant N=32 et p=10,
procure une bonne solution relativement aux autres solutions envisagées. Comme il est illustré à
100
la Figure 5.5, les résultats obtenus avec une augmentation de N et de p ne semblent pas justifier
l’augmentation de la complexité matérielle.
(a) (b)
(c) (d)
Figure 5.9 : Démodulation d’un signal RF possédant différents niveaux de bruit avec une
configuration N=32 et p=12: a) SNR=22 dB, b) SNR=12.5 dB, c) SNR=6.5 dB, d) SNR=0.5 dB
Grâce à la zone de transition entre la bande passante et la bande de coupure qui peut être plus
large pour la méthode adaptée, il est possible d’obtenir des oscillations de plus faible amplitude
dans la bande passante comparativement à un filtre RIF de même ordre pour les autres solutions
présentées. Cette caractéristique explique le meilleur résultat de la somme des résidus au carré
normalisée obtenu par cette méthode (Figure 5.5). De plus, la méthode adaptée est plus robuste au
bruit, puisqu’elle possède exactement le même support de fréquence que l’émetteur-récepteur
101
piézoélectrique; ce qui lui permet de rejeter plus de bruit hors bande passante (Figure 5.11), sans
mentionner le niveau plus élevé de l’atténuation dans la bande de coupure. Dans un autre ordre
d’idée, une erreur maximale de ±1 LSB est obtenue avec l’architecture de l’approximation
linéaire par morceau de la fonction racine carrée en utilisant seulement 16 zones pour une entrée
possédant une résolution de 19 bits et une sortie de 10 bits (Figure 5.12). L’erreur
d’approximation de ±1 LSB représente donc -57 dB par rapport à l’amplitude de la valeur crête
que peu prendre la sortie.
(a) (b)
(c) (d)
Figure 5.10 : Démodulation d’un signal RF possédant un SNR=6.5 dB avec différents paramètres
de configuration : a) N=4, p=6, b) N=16, p=14, c) N=64, p=10, d) N=128, p=16
102
Figure 5.11 : Analyse de la robustesse au bruit des différentes méthodes
(a) (b)
Figure 5.12 : Résultats de l’approximation linéaire par morceau de la fonction racine carrée : a)
Approximation, b) Erreur
5.4.2 Résultats de l’implémentation matérielle
Le Tableau 5.1 présente le sommaire de l’utilisation des ressources du FPGA pour l’architecture
du démodulateur en quadrature de type HT proposée ainsi que le système échographique complet.
Dû au nombre limité des multiplicateurs dédiés du FPGA à faible consommation et faible coût,
un ordre maximal des FIR de 16 a pu être atteint. Le démodulateur en quadrature proposé
nécessite 12 multiplicateurs dédiés et 1150 blocs logiques. Des filtres d’ordres N=32 et N=64
furent réalisés avec succès en utilisant des multiplicateurs à base de LUT. Ces deux
0 5 10 15 20 25
0
5
10
15
20
25
30
SNR du signal à l'entrée (dB)
SNR
du
signal
à
la
sortie
(dB)
Analyse du bruit pour N=32 and p=12
Ref. Matlab
Méthode conventionnelle
Méthode Reilly
Méthode adaptée
0 1 2 3 4 5 6
x 10
5
0
100
200
300
400
500
600
700
800
Approximation de la fonction racine carrée
Entrée (19 bits, val. max. 522 242)
Sortie
(10
bits,
val.max.
722)
0 1 2 3 4 5 6
x 10
5
-1
-0.5
0
0.5
1
Erreur d'approximation
Entrée (19 bits, val. max. 522 242)
Erreur
103
implémentations nécessitent, respectivement, 2571 et 2942 blocs logiques. La fréquence de
l’horloge d’échantillonnage est de 20 MHz et est la même pour l’horloge de traitement numérique
de l’ensemble du système. L’architecture propsée peut donc opérer à une fréquence supérieure,
allant jusqu’à 80 MHz pour un Spartan3 et 100 MHz pour un Spartan3A (outil de synthèse ISE
WebPack 9.2i), sans aucune modification de l’architecture.
Tableau 5.1 : Sommaire de l’utilisation des ressources du FPGA 3s1500lfg320-4 de XILINX
Architecture Ressources1
Racine carrée Démo.2
Système3
Méthode Adaptée
N=16, p=14
Racine carrée
Nb. Zones=16
Tranches
BRAM
MULT18x18
DCM
108
0
1
0
0,8 %
0 %
3 %
0 %
1150
0
12
0
8 %
0 %
37 %
0 %
3918
4
23
2
29 %
12 %
71 %
50 %
Méthode Adaptée
N=32, p=12
Racine carrée
Nb. Zones=16
Tranches
BRAM
MULT18x18
DCM
108
0
1
0
0,8 %
0 %
3 %
0 %
2571
0
3
0
19 %
0 %
9 %
0 %
5041
4
14
2
37 %
12 %
43 %
50 %
Méthode Adaptée
N=64, p=10
Racine carrée
Nb. Zones=16
Tranches
BRAM
MULT18x18
DCM
108
0
1
0
0,8 %
0 %
3 %
0 %
2942
0
3
0
22 %
0 %
9 %
0 %
5561
4
14
2
41 %
12 %
43 %
50 %
1 : Ressources disponibles du FPGA : 13 313 Tranches, 32 BRAM, 32 MULT18x18 et 4 DCM
2 : l’unité racine carrée est incluse dans l’unité démodulation
3 : Implémentation matériel du système échographique numérique complet
5.4.3 Résultats expérimentaux
Un fantôme de référence (Figure 5.13) (Model 040, CIRS) est utilisé afin de produire
expérimentalement des images échographiques en Mode-B avec un échographe miniaturisé qui
utilise l’architecture du démodulateur en quadrature de type HT proposée (Figure 5.14 et Figure
5.15). Pour fin de comparaison, les Figure 5.14 et Figure 5.15 présentent également une image
obtenue par un système échographique comparable basé sur logiciel (SV1, Scanview). Puisqu’il
n’y a pas d’accès aux données brutes sur l’échographe miniaturisé et sur le SV1, les profils
proviennent d’un post-traitement des photographies des images. Le traitement consiste à retirer le
pourtour des pixels qui forment l’image. Par conséquent, les mesures les plus précises des
résolutions axiale et latérale demeurent celles mesurées directement sur les systèmes. Le SV1
traite un maximum de 128 véritables lignes ultrasoniques et échantillonne les signaux RF à 16
Méch/s. L’unité analogique et mixte est très similaire à l’échographe miniature et le
104
démodulateur repose sur un processus d’hétérodynage conventionnel. Afin d’obtenir une
comparaison équitable, toutes les fonctions de post-traitement sont désactivées à l’exception de la
fonction d’interpolation basée sur un algorithme de plus-proche voisins. Le fantôme possède deux
zones présentant des coefficients d’atténuation différents : 0,50 dB/cm/MHz et 0,70 dB/cm/MHz.
Le matériel utilisé est fait de Zerdine™ et permet au son de se propager à une vitesse de 1540
m/s. Des fils de nylon monofilament d’un diamètre de 0,1 mm sont utilisés comme éléments
cibles. Il est à noter que, pour les images obtenues avec l’échographe miniaturisé, le motif moiré
est normal puisqu’il n’y a pas d’interpolation appliquée à l’image.
Figure 5.13 : Architecture du fantôme de référence Model 040 de CIRS
105
a) b)
c) d)
Figure 5.14 : Images échographiques en Mode-B : a) Système matériel avec N=64 et p=10; b)
Système matériel avec N=32 et p=12; c) Système matériel avec N=16 et p=14; d) Système
logiciel (post-traitement désactivé)
Selon les spécifications de la sonde GP200, les résolutions axiale et latérale ne peuvent pas être
sous 1mm. Les images obtenues montrent qu’il est possible d’obtenir avec l’architecture
matérielle du démodulateur en quadrature de type HT basé sur des filtres RIF d’ordre N=64 et des
coefficients possédant une précision de p=10 bits en utilisant la méthode adaptée proposée une
résolution latérale FWHM de 2 mm et une résolution axiale FWHM de 1 mm. Les résolutions
FWHM sont mesurées à une cible située à une profondeur de 8 cm. Pour effectuer ces mesures, le
niveau de réjection du bruit est fixé à 50 % de l’intensité maximale. Afin d’obtenir une précision
acceptable, la mesure est effectuée sur une image présentant un zoom de 5 cm à 10 cm; ce qui
permet d’obtenir une précision de 0,25 mm/pixel. D’un autre côté, le système logiciel SV1
présente une résolution latérale de 3 mm et une résolution axiale de 2 mm. Les résultats du
106
système SV1 (Figure 5.14d) sont comparables à ceux obtenus par le système matériel proposé
pour une configuration N=16 et p=14 (Figure 5.14c).
a) b) c) d)
Figure 5.15 : Profil de la ligne centrale passant par les cibles du fantôme des images
échographiques: a) Système matériel avec N=64 et p=10; b) Système matériel avec N=32 et
p=12; c) Système matériel avec N=16 et p=14; d) Système logiciel (post-traitement désactivé)
5.5 Conclusion
Ce chapitre a présenté un démodulateur en quadrature dédié au traitement en temps-réel des
signaux ultrasoniques RF. Le circuit complet de l’architecture proposée est implémenté dans un
seul FPGA à faible consommation. Une méthode d’évaluation a permis d’explorer et de comparer
la complexité et la performance de trois différentes méthodes d’implémentation de transformateur
de Hilbert. Les résultats montrent que, pour un même niveau de complexité, la HT à support
fréquentiel adapté est plus robuste au bruit. De plus, l’utilisation de multiplicateurs basés sur des
LUT a démontré qu’il était possible d’obtenir des filtres d’ordre élevé en contournant la limite
107
imposée par le nombre restreint de multiplicateurs dédiés des FPGA à faible consommation.
Également, cette implémentation préserve la flexibilité du logiciel en permettant de charger un
nouveau groupe de coefficients à la volée afin de supporter différents transducteurs.
D’un autre côté, lorsqu’implémenté comme il est proposé, l’architecture pipeline du
démodulateur et de son module d’approximation linaire par morceau de la fonction racine carrée
permet de traiter des signaux ultrasoniques haute-fréquence puisque la fréquence d’horloge est
égale à celle de l’échantillonnage. Finalement, l’architecture fut validée en produisant des images
échographiques (Mode-B) d’un fantôme ultrasonique de référence en utilisant une sonde à
balayage mécanique mono-élément de 5 MHz. La résolution axiale de 1 mm et la résolution
latérale de 2 mm démontrent la bonne précision du démodulateur.
108
CHAPITRE 6 CONCEPTION ET VALIDATION D’UN PROCESSEUR
DÉDIÉ AU PRÉTRAITEMENT DE SIGNAUX ULTRASONIQUES
Ce chapitre présente la conception et la validation d’un processeur dédié au prétraitement de
signaux ultrasoniques. Contrairement aux méthodes traditionnelles, qui sont basées sur des
solutions logicielles pour effectuer le traitement des signaux ultrasoniques, l’architecture
proposée repose sur une solution matérielle. Cette approche vise à améliorer le ratio
performance/consommation afin de présenter une solution qui permet une intégration plus
efficiente de l’unité de prétraitement à l’intérieur de la sonde.
La première section de ce chapitre décrit l’architecture de l’unité de prétraitement numérique
proposé. Ensuite, l’implémentation matérielle est présentée dans la deuxième section. Finalement,
la validation de la solution est effectuée dans la section des résultats expérimentaux.
6.1 Unité de prétraitement numérique
Faisant partie du transducteur de prétraitement ultrasonique (Figure 4.1), l’unité de prétraitement
numérique (Figure 6.1) traite les données provenant de l’unité de prétraitement analogique et
mixte pour générer en temps réel des images en Mode-B et transmettre ces nouvelles données
vers l’unité de transmission sans-fil analogique. Le cœur de traitement de l’unité de prétraitement
numérique génère les données nécessaires pour former des images brutes à partir des signaux
ultrasoniques provenant d’un formateur de faisceau ou directement du module de prétraitement
analogique lorsqu’un transducteur à un seul élément est utilisé. Dans un deuxième temps, l’unité
d’interpolation récupère les images brutes et effectue l’interpolation afin de rehausser la qualité
des images et ainsi créer les images finales. Le contrôleur de la mémoire partage celle-ci entre le
cœur de traitement, l’unité d’interpolation et le module RF numérique. Ce partage permet
d’utiliser un seul bus de données et un seul contrôleur de bus.
6.1.1 Cœur de traitement
Le schéma bloc de l’architecture du cœur de traitement est illustré à la Figure 6.2. Cette
architecture est composée de deux unités de traitement parallèle et d’une unité de compression de
pixels. Tel que présenté à la section 4.2.2, le convertisseur de balayage permet, pour chaque
109
image échographique, de calculer la position en coordonnées cartésiennes (x,y) de chaque
échantillon du signal ultrasonique RF. C’est également cette unité qui applique toutes les
calibrations requises par la sonde. Parallèlement, l’unité de prétraitement des données permet de
calculer la valeur de l’intensité (I) qui est utilisée pour représenter chaque échantillon du signal
ultrasonique RF. C’est d’ailleurs dans cette seconde unité que l’on retrouve la démodulation en
quadrature de type HT qui est présenté au chapitre 5. Finalement, l’intensité et la position
obtenues parallèlement avec les deux unités de traitement sont combinées par l’unité de
compression de pixels afin de générer un pixel : intensité (I) et position (x,y). Il est à noter qu’il
est possible d’utiliser une table de conversion à la sortie du module de compression pour ajuster
les tons de gris.
Figure 6.1 : Architecture proposée de l’unité de prétraitement numérique
6.1.1.1 Unités de traitements
La synchronisation avec la sonde, la calibration du balayage et l’identification de chaque ligne
(v*) constituent les premières opérations effectuées par l’unité de conversion de balayage
numérique. Ensuite, l’unité de traitement des lignes calcule la profondeur (u*) tout en effectuant
la calibration du positionnement du transducteur dans la sonde. Parallèlement à ce dernier, une
110
gâchette est générée à chaque début de nouvelle ligne afin de produire l’impulsion haute-tension.
Par la suite, les données de positionnement v* et u* sont mises à l’échelle en fonction de la
profondeur affichée afin de former les coordonnées polaires (u,v). Des LUTs sont ensuite
utilisées pour effectuer la conversion de coordonnées polaires en coordonnées cartésiennes (x,y).
Finalement, une unité de synchronisation permet d’agencer la profondeur des deux unités de
traitement.
Figure 6.2 : Architecture proposée du cœur de traitement de l’unité de prétraitement numérique
D’un autre côté, l’unité de calibration de l’intensité constitue le premier étage de l’unité de
prétraitement des données [93]. L’usager peut sélectionner l’une des quatre fonctions de
111
calibration qui sont enregistrées dans des LUTs (Figure 6.3). Ensuite, vient le cœur de cette unité
qui est composé de l’unité matérielle de démodulation en quadrature (chapitre 5). Finalement, les
derniers étages sont les unités de réjection du bruit et d’amplificateur numérique. L’unité de
réjection du bruit permet à l’usager de fixer le seuil de l’intensité qui est considéré comme le
niveau de bruit à rejeter. Au-dessus de la valeur du seuil, la valeur de l’intensité reste inchangée;
en dessous, cette dernière est considérée comme nulle.
Figure 6.3 : Exemple de fonction de calibration de l’intensité
6.1.1.2 Compression des données basée sur une décimation adaptative
L’unité de compression de pixels est utilisée pour réduire le débit du flot de données. Cette unité
permet de décimer le nombre de données en combinant celles qui représentent le même pixel. Le
sous-échantillonnage effectué s’adapte à la vitesse de propagation du son dans les tissus mous, à
la résolution de l’image et à la profondeur affichée à l’écran. En effectuant une moyenne
arithmétique de l’intensité d’un pixel pour une même coordonnée, cette unité peut être considérée
comme un filtre passe-bas. Pour le bruit blanc Gaussien, l’atténuation du bruit est proportionnelle
à la racine carrée du nombre de données sur-échantillonnées qui représentent l’intensité d’un
pixel à une même position [94]. Dans le meilleur des cas, cet algorithme permet également
d’éliminer les hautes fréquences de plusieurs autres sources de bruit. De plus, cette architecture
permet d’effectuer des zooms en utilisant un maximum de données véritables sur chaque ligne
0 100 200 300 400 500 600
0
100
200
300
400
500
600
Intensité à l'entrée (Résolution sur 9 bits)
Intensité
à
la
sortie
(Résolution
sur
9
bits)
Calibration A
Calibration B
Calibration C
Calibration D
112
balayée. Finalement, basée sur des LUT, une unité de calibration des tons de gris [27] est utilisée
pour fixer la résolution de l’intensité et obtenir le bon contraste (Figure 6.4).
Intensité
à
la
sortie
(Résolution
de
6
bits)
Figure 6.4 : Exemple de fonction de compression de tons de gris
L’application de l’algorithme de moyenne arithmétique sur tous les pixels résulte en une
complexité matérielle considérable puisque, avec le balayage sectoriel, plusieurs lignes
produisent une valeur de l’intensité pour le même pixel dans le champ proche. Par conséquent,
l’algorithme de pseudo-moyenne arithmétique qui est proposé calcule la valeur moyenne
arithmétique de l’intensité d’un pixel à une position (x,y) pour chaque ligne balayée
individuellement. Si la valeur existe déjà, la nouvelle valeur de l’intensité d’un pixel de la ligne
courante remplace celle de ce même pixel calculée à la ligne précédente.
L’équation de la pseudo-moyenne arithmétique de l’intensité proposée est :
    
1
1
1
, ,
N
N k
k
I x y I x y
N 
  (6.1)
113
où N est le nombre de données sur-échantillonnées qui représentent l’intensité d’un pixel à une
même position (x,y). Puisque le terme 1/N de l’équation (6.1) introduit une division qui augmente
la complexité matérielle, une évaluation du ratio complexité-performance s’avère pertinente.
Trois équations récursives de pseudo-moyenne arithmétique qui ne requièrent pas de division
sont donc proposées en plus de l’algorithme introduit par [95]. Il est à noter que ces équations
sont pour le traitement en temps réel et permettent d’effectuer une bonne couverture de la
complexité.
La première variation de l’algorithme de pseudo-moyenne de la valeur de l’intensité est
  
    
2 1
2
, ,
,
2
k k
k
I x y I x y
I x y 

 (6.2)
où k=2,3,4…N et     
2 1 1
, ,
I x y I x y

.
La deuxième variation est
  
  
   
  
1
3 1
3
3 1
, ,
,
2 , pour k pair
,
2
, , pour k impair
k k
k
k
k
I x y I x y
I x y
I x y
I x y



 



 



(6.3)
où k=2,3,4…N et     
3 1 1
, ,
I x y I x y

.
Et, la troisième variation
  
  
       
  
3 2 1
4 1
4
4 1
, , , ,
2 ,
2 2 , k mod 4=0
,
4
, , k mod 4 0
k k k
k k
k
k
k
I x y I x y I x y I x y
I x y
I x y
I x y
  


  
 


 




(6.4)
où k=2,3,4,…N et     
4 1 1
, ,
I x y I x y

.
114
Finalement, l’algorithme introduit par [95] est
 
  
 
      
  
 
 
1 1
95
1
1
, , ,
, si puissance de 2
2
,
, si = puissance de 2
1
,
ref ref
p
k k k
k
k
n
n
I x y I x y I x y
k
I x y
k
I x y
k
 


 
 


 





(6.5)
où k=2,3,4,…N,  
    
1 1
, ,
ref
I x y I x y
 , p et  
2
log 1
2 2
k p
k

 
 
  .
6.1.2 Gestionnaire de la mémoire partagée
Tel que présenté à la Figure 6.1, l’accès à la mémoire est partagé entre le cœur de traitement,
l’unité d’interpolation et le module RF numérique. Afin d’améliorer l’utilisation de cette
ressource et obtenir une consommation de puissance plus efficace que celle requise par
l’utilisation de mémoire possédant un débit plus élevé, le contrôleur de la mémoire est basé sur
une méthode d’assignation dynamique de priorité. Les signaux d’état des tampons de type « first-
in first-out » (FIFO) permettent d’utiliser une stratégie de planification de type EDF (earliest
deadline first) [96]. De plus, l’utilisation de ces FIFOs permet également de franchir les frontières
asynchrones entre les régions du système qui possèdent des domaines d’horloge différents.
Le Tableau 6.1 présente le débit minimal utile requis du bus de la mémoire afin que l’architecture
proposée puisse traiter les 200 pixels de 8 bits de résolution de chacune des 256 véritables lignes
ultrasoniques afin d’afficher une image de résolution 320x240x8 bits à un taux de
rafraichissement de 15 images par seconde (FPS - frame per second). Il est à noter que le débit de
transfert de la mémoire vers le module RF numérique de 8.8 Mb/s est actuellement supporté par
les technologies de transmission sans fil telles que IEEE 802.11a/g/n (Wi-Fi) ou IEEE 802.15.3
(High Rate WPAN). Également, les technologies de communication sans fil émergentes telles
que l’intégration des technologies radio à très large bande (Ultra WideBand (UWB) radio),
comme la UWB WiMedia, avec la technologie Bluetooth (IEEE 802.15.1) supporte le débit
requis en plus de posséder une faible consommation. De plus, afin de réduire davantage le débit
nécessaire pour le transfert RF, une unité de compression de données pourrait être incorporée à
l’architecture de façon similaire à l’unité d’interpolation. À noter également que le débit total du
115
transfert mémoire de 32.3 Mb/s peut être atteint par les technologies de mémoire à faible
consommation telle que les PSRAM [97], [98].
6.1.3 Unité d’interpolation
Le rôle de l’unité d’interpolation est d’estimer les valeurs intermédiaires entre les valeurs
connues. Il est à noter que, grâce au module de compression de données, les valeurs
intermédiaires se trouvent entre deux lignes balayées et aucune valeur n’est manquante sur ces
lignes. Également, puisque la résolution de l’intensité du pixel est de 6 bits, un des deux bits
supplémentaires du bus de données de la mémoire est utilisé pour inscrire, en même temps que la
valeur de l’intensité, la validité du pixel. Cette méthode permet de différencier les valeurs
connues (valides) et celle à interpoler (à déterminer). Ainsi, il est possible d’interpoler seulement
les données manquantes et de préserver la netteté du contour de la zone image. De plus, différents
algorithmes d’interpolation peuvent être utilisés : plus proche voisin, linéaire, polynomiale, B-
Spline ou autres.
Tableau 6.1 : Débit minimal utile requis du bus de la mémoire
ID Description du transfert Débit utile (Mb/s)1
A1 Du cœur de traitement vers la mémoire
256 lignes x
200 pixels/ligne x
8 bits/pixels x 15 fps
5.9
B1 De la mémoire vers l’unité d’interpolation2
320x240x8 bits x 15 fps 8.8
B2 De l’unité d’interpolation vers la mémoire 320x240x8 bits x 15 fps 8.8
A2 De la mémoire vers le module RF numérique3
320x240x8 bits x 15 fps 8.8
Total 32.3
1 : 1 Mb = 1024 kb = 1 048 576 bits
2 : Basé sur un algorithme d’interpolation en 2D.
3 : Débit minimal utile requis pour un transfert sans fil sans compression de données.
6.2 Implémentation matérielle de l’architecture proposée
Le système échographique miniaturisé présenté au chapitre 4 est utilisé pour l’implémentation de
l’architecture proposée. Toutes les fonctions du système numérique sont implémentées avec un
seul FPGA (SPARTAN3L1500, Xilinx) et une mémoire PSRAM externe de 32 Mb
(MT45W2MW16BCGB, Micron) utilisée comme tampons circulaires qui permettent
116
d’enregistrer 32 images de 600 kb (320x240x8 bits et 1 kb = 1024 bits). Tel qu’illustré par la
Figure 6.5, le module numérique RF est remplacé par le module de contrôle d’affichage. Ce
module de contrôle permet d’afficher 15 FPS et consiste en un contrôleur graphique vidéo et un
module d’affichage sur image (OSD – On-Screen Display). Il est important de mentionner que le
débit de transfert du module de contrôle d’affichage est équivalent au module numérique RF. À
noter également que la consommation de l’afficheur à cristaux liquide (ACL) est similaire à celle
d’un module Wi-Fi conventionnel, soit d’environ 500 mW [99].
Figure 6.5 : Schéma bloc de l’implémentation du système
6.2.1 Implémentation du cœur de traitement
L’implémentation des unités de traitement parallèle de l’unité de prétraitement numérique repose
principalement, d’une part, sur le démodulateur en quadrature basé sur une transformée de Hilbert
et d’une approximation linéaire par morceau de la fonction racine carrée (chapitre 5); et, d’autre
part, sur le convertisseur de balayage basé sur des tables de conversion qui est présenté à la
117
section 4.2.2. Finalement, l’architecture de l’unité de compression de pixels est basée sur
l’équation (6.1) et est illustrée par la Figure 6.6.
Afin de justifier le choix de l’architecture utilisée pour effectuer la compression de données, le
Tableau 6.2 présente la complexité matérielle requise pour l’implémentation des différentes
équations de pseudo-moyenne arithmétique appliquées sur chaque ligne ultrasonique balayée.
Conjointement, obtenu par simulation, la somme normalisée des résidus au carré de chaque
équation est présentée à la Figure 6.7. Chaque équation est comparée à la véritable moyenne
arithmétique appliquée à un même pixel auquel un bruit blanc Gaussien est superposé à différents
nombres de valeurs sur-échantillonnées. Le nombre de sur-échantillonnage de la valeur de
l’intensité d’un même pixel varie entre 1 et 24 afin d’afficher, sur une résolution de 200 pixels et
une fréquence d’échantillonnage de 20 MHz, une profondeur entre 1 et 18 cm. Il est à noter que
l’algorithme sélectionné doit présenter une bonne performance dans cette région d’opération. Par
conséquent, aucune des équations (6.3) et (6.4) ne doivent être utilisées. Toutefois, un algorithme
amélioré (équation (6.6)), reposant sur une combinaison des algorithmes (6.2), (6.3) et (6.4), offre
de bonnes performances tout en nécessitant moins de matériel que l’équation (6.1). Malgré tout,
de par sa performance et de la faible complexité de la LUT requise pour effectuer la division
(seulement 32 éléments), l’algorithme basé sur l’équation (6.1) est sélectionné pour cette
implémentation. Toutefois, lorsqu’il n’est pas possible de construire la division basée sur une
LUT, l’implémentation matérielle de l’équation (6.5) découlant de l’algorithme introduit par [95]
s’avère pertinente.
    
     
     
     
5 1 1
5 2
2 2
5 3
3 3
5 4
, ,
, ,
, ,
, , , où k=4,5,6...N
k k
I x y I x y
I x y I x y
I x y I x y
I x y I x y




(6.6)
118
Figure 6.6 : Implémentation de l’unité de compression de pixels basée sur l’équation (6.1)
Tableau 6.2 : Complexité matérielle des différentes équations de pseudo-moyenne arithmétique
Équation Additionneur Division Autre
  
1 ,
I x y 1
1 compteur (N),
1 LUT (1/N),
1 multiplicateur
1 tampon
  
2 ,
I x y 1 0 1 tampon
  
3 ,
I x y 2 0
1 comparateur,
1 MUX,
2 tampons
  
4 ,
I x y 3 0
2 comparateurs,
1 MUX,
3 tampons
  
5 ,
I x y 3 0
3 comparateurs,
3 MUX,
4 tampons
 
  
95
,
I x y 3
1 compteur (N),
1 multiplicateur
(décaleur barillet)
1 comparateur,
2 MUX,
2 tampons
119
6.2.2 Implémentation de l’unité de contrôle de la mémoire
La mémoire partagée est utilisée pour réaliser deux tâches principales. La première tâche
(Transfert-A) concerne le transfert des données provenant du cœur de traitement vers la mémoire
(A1) et le transfert des données provenant de la mémoire vers l’unité de contrôle de l’affichage
(A2). La deuxième tâche (Transfert-B) regroupe le transfert des données provenant de la mémoire
vers l’unité d’interpolation de l’image (B1) et le transfert des données provenant de cette unité
vers la mémoire (B2). Le Tableau 6.3 présente le taux d’utilisation projeté du bus de la PSRAM
en mode asynchrone pour tous les types de transferts. De plus, il est à noter que le contrôleur
divise la mémoire en deux zones : Zone-1 et Zone-2. La première zone est accessible par les
transferts A1 et B1 et est utilisée pour enregistrer jusqu’à 16 images brutes. La Zone-2 permet de
contenir 16 images interpolées et est accessible par les transferts A2 et B2.
Figure 6.7 : Simulation de la somme des résidus au carré normalisée des différents algorithmes de
pseudo-moyenne proposés
L’unité de contrôle de la mémoire (Figure 6.8) gère les quatre transferts en utilisant huit niveaux
de priorité qui découlent de l’implémentation d’une priorisation à deux niveaux attribuée
dynamiquement selon l’état de remplissage des tampons de type FIFO. Le FIFO-A2 possède les
priorités P1 et P4; le FIFO-A1, les priorités P2 et P5; le FIFO-B1, les priorités P7 et P8; et le
10
0
10
1
10
2
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
1.1
Nombre de valeurs sur-échantillonnées
Somme
des
résidus
au
carré
normalisée
Zone pour 1 à 24 valeurs sur-échantillonnées
Eq. (6.1)
Eq. (6.2)
Eq. (6.3)
Eq. (6.4)
Eq. (6.5)
Eq. (6.6)
120
FIFO-B2, les priorités P3 et P6. Il est à noter que la priorité P1 est la plus prioritaire et que la
priorité P8 est la moins prioritaire. En ordre décroissant de priorité, les huit états sont :
 P1 : le FIFO-A2 est presque vide, échec imminent;
 P2 : le FIFO-A1 est presque plein, échec imminent;
 P3 : le FIFO-B2 est presque plein, échec imminent;
 P4 : le FIFO-A2 contient seulement quelques données;
 P5 : le FIFO-A1 possède seulement quelques espaces libres;
 P6 : le FIFO-B2 possède seulement quelques espaces libres;
 P7 : le FIFO-B1 est presque vide, échec imminent;
 P8 : le FIFO-B1 contient seulement quelques données.
Tableau 6.3 : Taux d’utilisation projeté du bus de la mémoire en mode asynchrone
Identification du
transfert
Débit utile
(Mb/s)
Largeur du
bus (bits)
Longueur
de la rafale
Nombre
de cycles4
Utilisation
du bus5
(%)
Transfert-A1 A1 5.9 8 1 13 824 000 17.28
A23
8.8 16 16 6 048 000 7.56
Total pour le Transfert-A 19 872 000 24.84
Transfert-B2 B1 8.8 16 16 6 048 000 7.56
B2 8.8 16 1 10 036 800 12.55
Total pour le Transfert-B 10 972 800 20.11
Total: Transfert-A + Transfert-B 31 968 000 44.95
1 : Transfert de données du cœur de traitement vers la mémoire (A1) et ensuite, de la mémoire vers le module
numérique RF (A2).
2 : Transfert de données de la mémoire vers l’unité d’interpolation (B1) et ensuite, de ce dernier vers la mémoire
(B2).
3 : Le débit utile du transfert de données de la mémoire vers le module numérique RF (Figure 6.1) est équivalent
au transfert de données de la mémoire vers le module de contrôle de l’affichage (Figure 6.6).
4 : Nombre de cycles en mode asynchrone: 10 cycles par donnée et 8 cycles par rafale.
5 : Par rapport à 80 000 000 cycles par seconde (fréquence d’horloge à 80 MHz).
La priorité P1 est accordée à un échec imminent du FIFO-A2 puisque le module de contrôle de
l’affichage ne peut supporter aucune perte de données. En effet, si le FIFO-A2 était vide, pour
une raison ou une autre, l’image affichée serait corrompue puisque l’unité affichage ne traite pas
les coordonnées du pixel et s’attend à obtenir les valeurs de chaque pixel à afficher en continu.
D’un autre côté, si le FIFO-A1 déborde, seuls les pixels qui n’ont pu être enregistrés dans le
121
FIFO seront manquants à l’écran; la dégradation de l’image ne sera donc pas significative. Il est à
noter qu’une synchronisation entre le module de contrôle de l’affichage et le contrôleur de la
mémoire est effectuée à la même fréquence que celle du taux de rafraichissement, soit 15 fois par
seconde, afin de pallier un échec à répondre correctement à P1. Par conséquent, l’image
corrompue ne sera affichée à l’écran qu’un quinzième de seconde.
Finalement, les deux dernières priorités (P7 et P8) sont assignées au FIFO-B1 puisque les accès
mémoire requis par le module d’interpolation d’image (Transfert-B, B1 et B2) sont initiés par B1
et peuvent être interrompus à tout moment et ainsi permettre au contrôleur de mémoire de
compléter les autres priorités. À noter que les seuils de remplissage des tampons pour les priorités
P4 et P5 doivent être ajustés afin de permettre à P7 de devenir prioritaire. D’un autre côté, le
FIFO-B2 se videra lorsque le module d’interpolation d’image n’aura plus de données à traiter et
permettra à P7 ou P8 de devenir prioritaire. De plus, la profondeur de chaque FIFO est fixée
suite aux résultats de simulations afin de permettre qu’il n’y ait pas de dépassement de la capacité
des FIFO tout en tâchant de restreindre l’utilisation des ressources matérielles.
Figure 6.8 : unité de contrôle de la mémoire
122
6.2.3 Implémentation de l’unité d’interpolation
Puisque la majeure partie des pixels qui sont à interpoler forment des lignes verticales, la
méthode utilisée pour effectuer l’interpolation utilise une fenêtre de recherche à une dimension
selon l’axe des X. La Figure 6.9 représente la partie inférieure d’une image Mode-B de 0 à 16 cm
et une fenêtre de recherche de neuf pixels. Pour chaque nouvelle image, la fenêtre de recherche
est positionnée de sorte que la position 0 corresponde à la coordonnée (1,1). Par la suite, la
fenêtre est décalée vers la droite d’un pixel tant qu’il n’y a pas de valeur valide à la position 0.
Lorsqu’il y a une valeur valide à la position 0, deux cas sont à considérer. Le premier cas est la
détection de la fin de la zone image si aucune autre valeur n’est valide à l’intérieur de la fenêtre.
Dans ce cas, la fenêtre de recherche est repositionnée au début de la ligne suivante. Il est à noter
que la taille de la fenêtre de recherche à prévoir doit être suffisamment grande pour contenir le
plus grand nombre de valeurs manquantes. Le deuxième cas est la détection de valeur à
déterminer. Ce scénario se produit lorsqu’une valeur valide se trouve à la position 0 et qu’au
moins une autre valeur valide se trouve dans la fenêtre de recherche. Les valeurs à déterminer qui
se trouvent entre la valeur valide à la position 0 et la valeur valide suivante sont donc interpolées.
Par la suite, la fenêtre de recherche est déplacée vers la droite de manière à positionner la
deuxième valeur valide à la position 0.
La fenêtre de recherche implémentée possède une longueur de 33 pixels; ce qui permet d’afficher
le zoom d’une image Mode-B de 15cm à 16 cm sur une résolution de 220x300 pixels (pire cas).
En effet, seulement 10 lignes balayées sont utilisées pour construire l’image. De plus,
l’algorithme d’interpolation actuellement implémenté utilise la moyenne arithmétique des deux
valeurs connues pour déterminer la valeur de l’intensité des pixels qui se trouvent entre les deux
valeurs connues.
123
Figure 6.9 : Exemple de la méthode utilisée pour effectuer l’interpolation
6.3 Résultats expérimentaux
Dans un premier temps, des images Mode-B d’un fantôme de référence (Modèle 040, CIRS) sont
produites pour valider l’architecture proposée ainsi que son implémentation. De plus, ces images
permettent d’apprécier et de comparer les résultats expérimentaux. Ensuite, une analyse du taux
d’utilisation du bus de la mémoire partagée est présentée. Finalement, l’efficacité de
l’architecture proposée est évaluée et comparée avec différentes architectures de processeur.
6.3.1 Résultats de l’implémentation et validation du système
La plateforme de développement présentée au chapitre 4 est utilisée pour implémenter et valider
expérimentalement le processeur dédié au prétraitement des signaux ultrasoniques. Le Tableau
124
6.4 expose l’utilisation des ressources du FPGA (XC3S1500L-FG320, Xilinx) pour
l’implémentation de l’ensemble du système proposé en utilisant le logiciel de synthèse ISE
WebPACK 9.2.01i de Xilinx. Il est à noter que le convertisseur de balayage sectoriel présenté au
chapitre 4 est utilisé par le cœur de traitement. Également, le démodulateur en quadrature basé
sur la méthode adaptée (chapitre 5) est implémenté à l’intérieur du cœur de traitement avec les
paramètres de configuration N=32, p=12 et 16 zones pour l’approximation linéaire par morceau
de la fonction racine carrée.
Tableau 6.4 : Sommaire de l’utilisation des ressources du FPGA 3s1500lfg320-4 de XILINX par
l’ensemble du système proposé
Unité LUT FF
Total
(tranches)
BRAM MULT18x18
Cœur de traitement1
7951 2509 4473 0 12
Contrôleur de la mémoire 682 308 354 0 0
Contrôle de l’affichage 562 57 302 0 3
Unité d’interpolation 616 302 334 0 0
Contrôleur du système 1307 677 716 0 0
4 FIFOs 469 222 265 8 0
Total2
11587 4075 6444 8 15
Synthèse du système3
11536 4118 6303 8 15
1 : Inclut l’unité de compression basée sur l’équation (6.1).
2 : Utilisation totale des ressources de toutes les unités (synthèse indépendante de chaque unité).
3 : Utilisation totale des ressources du système (synthèse en tant que système).
De plus, tel que présenté au Tableau 6.5, l’implémentation de l’équation (6.1) ne requiert qu’un
multiplicateur et seulement 65 tranches. Afin de bien comparer les résultats obtenus, toutes les
versions de pseudo-moyenne arithmétique furent implémentées en plus d’une architecture de base
qui n’effectue pas de moyenne. Cette dernière architecture effectue la compression de données en
conservant la dernière valeur de l’intensité pour un même pixel sur une même ligne. Finalement,
comparativement à l’implémentation de l’algorithme proposé par [95] (équation (6.5)),
l’implémentation de l’équation (6.1) requièrt 46 % moins de tranches.
125
Tableau 6.5 : Sommaire de l’utilisation des ressources du FPGA 3s1500lfg320-4 de XILINX par
l’unité de compression de données
Pseudo-moyenne
arithmétique
LUT FF
Total
(tranches)
MULT18x18
Aucune1
57 35 33 0
  
1 ,
I x y 116 74 65 1
  
2 ,
I x y 79 55 45 0
  
3 ,
I x y 105 66 59 0
  
4 ,
I x y 179 81 100 0
  
5 ,
I x y 236 82 127 0
  
[90] ,
I x y 218 98 121 1
1 : Compression seulement; seule la dernière valeur de l’intensité est conservée.
Conformément à nos prévisions, la Figure 6.10 illustre que l’équation (6.1) ainsi que l’algorithme
proposé par [95] (équation (6.5)) permettent d’obtenir une image qui contient moins de bruit
comparativement aux images obtenues en utilisant les équations (6.2) ou (6.6). En fait, l’unité de
compression proposée basée sur les équations (6.1) et (6.5) filtrent suffisamment les hautes
fréquences des différentes sources de bruit afin d’effectuer une opération de lissage, opération
équivalente à l’application d’un filtre passe-bas sur l’image. Le bruit filtré correspond aux
interférences haute-fréquence hors-bande produites par le bruit électronique, le bruit de
quantification, le bruit acoustique, les oscillations présentes dans la bande passante des filtres à
réponses impulsionnelles finies (RIF) utilisés pour la démodulation (chapitre 5), etc. Avec une
telle réduction du niveau de bruit, les résolutions axiales et latérales sont améliorées de 0.5mm
(Figure 6.10) en utilisant les mêmes configurations et paramètres pour le reste du système. Cette
amélioration représente une augmentation de la résolution axiale et latérale de 33% et de 25%
respectivement.
La sonde (GP2000 5 MHz, Interson) à balayage mécanique qui est utilisée possède un élément
piézoélectrique de 12 mm, une fréquence de résonnance de 5 MHz, une bande passante de 85% et
une distance focale de 8 cm. Selon les spécifications de cette sonde, les meilleurs résolutions qu’il
est possible d’atteindre sont de 1 mm pour les résolutions axiale et latérale. La résolution latérale
126
FWHM est mesurée à une cible de résolution du fantôme de référence à une profondeur de 8 cm
(distance focale) en utilisant la même méthode que celle décrite à la section 5.4.3. La résolution
axiale est également mesurée avec la même cible de résolution. Les résolutions axiale et latérale
obtenues sont respectivement 1 mm et 1,5 mm.
a) b)
c) d)
Figure 6.10 : Images expérimentales Mode-B de 0 à 10 cm obtenues par l’architecture proposée
en utilisant l’algorithme de compression basé sur l’équation : a) (6.1), b) (6.5), c) (6.2) et d) (6.6)
D’un autre côté, la Figure 6.11 présente des exemples de zoom en temps réel sur une image en
Mode-B obtenu grâce à la décimation adaptative de l’unité de compression. De plus, il est à noter
que le pattern moiré présent à la Figure 6.10 et à la Figure 6.11 est normal puisqu’il n’y a pas
d’interpolation appliquée pour compléter les images afin d’évaluer correctement l’impact des
différents algorithmes de pseudo-moyenne arithmétique. Toutefois, il n’y a aucun pixel manquant
sur les lignes balayées puisque l’unité de compression adapte correctement la décimation en
127
fonction de la résolution de l’écran, la profondeur affichée et la fréquence d’échantillonnage.
a) b)
Figure 6.11 : Images expérimentales Mode-B obtenues par l’architecture proposée en utilisant
l’algorithme de compression basé sur l’équation (6.1) : a) de 1 à 4 cm et b) de 2 à 10 cm
a) b)
Figure 6.12 : Images expérimentales Mode-B avec interpolation obtenues par l’architecture
proposée en utilisant l’algorithme de compression basé sur l’équation (6.1) : a) de 0 à 10 cm et b)
de 2 à 10 cm
Finalement, pour compléter la validation du système, la Figure 6.12 présente des exemples
d’images en Mode-B avec interpolation et la Figure 6.13 présente le profil des images obtenues
par l’architecture proposée en utilisant différentes variations de l’algorithme de compression de
pixel. À la Figure 6.13, il est possible de percevoir l’amélioration de la résolution latérale ainsi
128
que la légère réduction du niveau de bruit en a) et en d) comparativement à b) et c). Il est
important de noter que les profils des différentes images ne proviennent pas directement des
données brutes du système échographique miniaturisé puisqu’il n’y à pas d’accès aux données sur
ce prototype. Le traitement appliqué sur les photographies des images consiste seulement à retirer
le pourtour des pixels. Par conséquent, les mesures les plus précises des résolutions axiale et
latérale demeurent celles mesurées directement sur le système.
a) b) c) d)
Figure 6.13 : Profil de la ligne centrale passant par les cibles du fantôme des images
échographiques de 0 à 10 cm obtenues par l’architecture proposée en utilisant l’algorithme de
compression basé sur l’équation : a) (6.1), b) (6.5), c) (6.2) et d) (6.6)
6.3.2 Validation du transfert de données sans fil
Le taux d’utilisation moyen du bus de la mémoire partagée concorde avec le taux d’utilisation
total prévu. Le taux d’utilisation moyen est de 42 % sur une période d’une image (1/15 seconde)
et la pointe d’utilisation atteint 58 % durant la période d’affichage de ligne. Cette pointe
d’utilisation est attribuée au module de contrôle de l’affichage qui émule le module de
transmission RF et qui nécessite une pointe d’utilisation de 24 % durant l’affichage de chaque
129
ligne de l’ACL et descend à 0 % entre chacune d’elles. Puisque les 240 périodes attribuées à
l’affichage des lignes à l’écran sont dispersées et utilise seulement 33 % de la période de temps
disponible, la moyenne d’utilisation du bus mémoire par ce module est de 8 % sur une période
d’une image. De plus, puisque la communication sans-fil peut s’éfectuer avec une distribution
dans le temps plus uniforme, la pointe d’utilisation pourrait être plus basse que celle obtenue par
le module de contrôle de l’affichage. Également, puisque seules les données interpolées de la
zone de l’image sont transférées vers la mémoire partagée par l’unité d’interpolation, l’utilisation
du bus par le transfert-B2 est, dépendamment de la forme de l’image, réduit d’environ 20% par
rapport à l’utilisation prévue initialement.
D’un autre côté, en utilisant une communication synchrone plutôt qu’asynchrone, il est possible
de réduire de 10 à 1 le nombre de cycles requis pour le transfert d’une donnée (en faisant
abstraction de la latence du premier transfert, aux collisions entre les opérations de
rafraichissement et le passage des frontières des rangées) puisque le mode synchrone permet
d’effectuer les transferts en rafales. Cette réduction permettrait d’utiliser une technologie de
transmission sans fil à très faible consommation puisqu’une unité de compression d’images ou de
vidéo pourrait être ajoutée à l’architecture pour réduire davantage la quantité de données à
transmettre.
6.3.3 Ratio performance/consommation
Le Tableau 6.6 présente la puissance consommée par les sections du système, qui, dans son
ensemble, est mesurée à 1,9 W, en incluant 500 mW pour le moteur de la sonde et 600 mW pour
l’ACL. Lorsque cadencé à 20 MHz, le cœur de traitement, FPGA et mémoire, utilise 102 mW, ce
qui représente 5,2 % de la puissance totale consommée par le système. De plus, seulement 20,1 %
de la puissance est consommée par le module numérique matériel de prétraitement ultrasonique.
Cette consommation pourrait être réduite par une implémentation avec un ASIC, puisque la
puissance statique du FPGA est très élevée et correspond, pour cette architecture, à 40 % de la
consommation du FPGA.
130
Tableau 6.6 : Puissance consommée par l’ensemble du système échographique miniaturisé
Unité Consommation (mW) % Système
Affichage (ACL) 600 31,6
Sonde (mécanique) 500 26,4
Haute-tension 15 0,8
Analogique 385 20,3
Numérique 397 20,1
Total 1897 100
Subdivision de l’unité
numérique
Dynamique
(mW)
Statique
(mW)
Total
(mW)
% Unité
numérique
% Système
Cœur FPGA : 1.2V 40 55 95 23.9 4,8
Cœur PSRAM : 1.8V 6.85 0.15 7 1.8 0,4
I/O numériques : 3.3V 120 10 130 32.7 6,6
DCM du FPGA : 2.5V 75 90 165 41.6 8,3
Comparativement à un système échographique similaire basé sur logiciel tel que le système SV1
de Scanview qui utilise un processeur Intel Pentium MMX 200MHz, l’architecture proposée
consomme neuf fois moins de puissance. Pour un total de 20W, le système SV1 requiert, pour le
processeur uniquement, une consommation typique de 7,3W; ce qui représente 36,5 % de la
consommation totale du système. À lui seul, le processeur générique consomme trois fois plus
d’énergie que le système échographique miniaturisé.
D’autre part, puisqu’il serait irréaliste de concevoir l’architecture proposée en version logicielle
pour toutes les plateformes afin de pouvoir comparer le ratio performance/consommation, une
équivalence doit être déterminée. Les étalons de tests de performance constituent un point de
référence pour les mesures et procurent une méthode de comparaison de performance pour les
processeurs génériques (CPU) [100], [101]. Étant donnée la complexité de comparer les
architectures qui présentent d’importantes différences [102], [103], une référence commune de
base est utilisée. Cette référence de base est le Dhrystones 2.1 MIPS (DMIPS). Exécutant plus de
500 k instructions par seconde (IPS), le VAX-11/780 obtient 1757 Dhrystones par seconde et est
défini, sous Dhrystone 2.1, comme la référence de 1 MIPS. Par exemple, un processeur réalisant
400 DMIPS pourrait exécuter le même programme 400 fois plus rapidement que le VAX-11/780.
À noter que les tests de performances Dhrystones ne sont pas parfaits, mais, pour une raison
131
historique, les résultats sont presque toujours disponibles (banc de tests, spécification, littérature,
etc) pour chaque CPU et peuvent donc être utilisés comme première évaluation approximative de
la performance.
Une équivalence approximative d’un résultat Dhrystones 2.1 pour le cœur de traitement est
proposée et repose sur une comparaison avec le système échographique SVI de Scanview. À
noter que le processeur Pentium II 200MMX d’Intel sur lequel est basé le système réalise environ
170 DMIPS [104]. De plus, il est important de mentionner que les deux systèmes utilisent le
même type de sonde et, selon la configuration du démodulateur en quadrature, produisent une
image en Mode-B similaire (chapitre 5). En considérant les deux systèmes comme des boîtes
noires, trois différences majeures entre les deux implémentations sont utilisées pour déterminer
un ratio de conversion entre le résultat du Pentium II 200MMX et celui recherché du cœur de
traitement. L’architecture matérielle proposée traite 256 véritables lignes ultrasoniques avec une
fréquence d’échantillonnage de 20 MHz tandis que le SVI traite 120 lignes à 16 MHz. De plus, le
taux de rafraichissement de l’architecture proposée peut atteindre, pour une profondeur de 10 cm,
30 FPS (limité par la vitesse de l’ultrason) tandis que le SVI présente seulement 12,8 FPS pour la
même profondeur lorsque les fonctions de post-traitement sont désactivées. Conséquemment,
avec un ratio de conversion de 6,25; le cœur de traitement proposé obtient virtuellement un
résultat de 53,15 DMIPS/MHz; ce qui donne 1063 DMIPS à 20 MHz (6,25 × 170 DMIPS) et
5315 DMIPS à 100 MHz (1063 × 100 ÷ 20). De plus, le système de référence nécessite 25 % de
ses ressources pour l’interpolation lorsque cette fonction de post-traitement est activée. Puisque
l’interpolation matérielle implémentée effectue un algorithme de complexité similaire au système
de référence, il est possible d’accorder un pointage de 42,5 DMIPS à cette unité.
D’un autre côté, les processeurs de type x86 dont l’Intel 486DX2/66, l’Intel Pentium Pro, l’AMD
Athlon XP et l’Intel Pentium III possèdent, respectivement, un facteur de conversion MIPS-
DMIPS de 0,648; 0,578; 0.600 et 0,589. Par conséquent, avec un facteur de conversion
approximatif de 0,6; le cœur de traitement proposé performe 89 MIPS/MHz (x86 équivalent).
Cette approximation concorde bien avec notre approximation puisque le cœur de traitement
proposé effectue une centaine d’opérations parallèles par cycle.
132
Tableau 6.7 : Performances et consommation des DSP
Architecture MIPS Fréq. (MHz) Consommation totale (mW)
Architecture matérielle proposée
Cœur de traitement (à 20 MHz) 17801
20 72,252
Cœur de traitement (à 100 MHz) 89001
100 1632
Unité d’interpolation 701
20 3,752
Processeur spécialisé en traitement de données (DSP)
TMS320DM647 8800 1100 36153
TMS320C6211B 1200 150 8823
TMS320VC5502 6004
300 3013
MSC7116 10004
266 2933
ADSP-BF592 8004
400 1273
ADSP-21990 160 160 6253
1 : Estimé; 2 : Xpower Estimator (XPE) 10.1.03; 3 : Cœur du processeur DSP seulement; 4 : MMACS
Finalement, afin d’illustrer le bon ratio performance/consommation obtenu par le cœur de
traitement matériel proposé, le Tableau 6.7 permet de comparer l’architecture matérielle proposée
avec des DSP. La performance des DSP peut être comparée en utilisant l’unité MIPS ou
MFLOPS dépendamment si l’architecture du DSP effectue les opérations en point flottant. De
plus, il arrive que l’unité de performance disponible soit les MMACS. Selon l’information
fournie par le manufacturier et pour fins de comparaison, les performances DMIPS estimés du
cœur de traitement et de l’unité d’interpolation sont converties en MIPS en utilisant le facteur de
conversion de 0,6 établi précédemment. De plus, le Tableau 6.8 présente les performances et la
consommation d’architectures logicielles implémentées avec des processeurs pour système
embarqué, des processeurs logiciel (VHDL) et matériel (ASIC). Avec sa consommation de 3,75
mW, le ratio consommation-performance de l’unité d’interpolation est de 11,3 DMIPS/mW. Un
tel ratio démontre bien que l’interpolation peut être effectuée efficacement par l’UPP numérique
matériel. D’un autre côté, les ratios consommation-performance du cœur de traitement proposé
sont de 14,7 DMIPS/mW à 20 MHz et de 32,6 DMIPS/mW à 100 MHz; résultats qui pourraient
être améliorés avec une implémentation avec ASIC.
Lorsque cadencé à 20 MHz, le ratio performance/consommation obtenu est comparable à celui
des cœurs de processeur RISC ultra-haute performance cadencé à 380 MHz. Toutefois, lorsque le
cœur de traitement opère à 100 MHz, son ratio performance/consommation ne peut pas être égalé
133
par une architecture logicielle. Il est à noter que ces valeurs représentent des ordres de grandeur et
ne doivent être utilisées qu’en tant que ligne directrice. Par exemple, deux cœurs CPU RISC à
ultra-haute performance sont nécessaires pour bâtir une architecture logicielle similaire à celle
proposée qui serait cadencée à 20 MHz. Toutefois, ces deux cœurs requièrent 36 % plus de
puissance que le cœur de traitement proposé. De plus, pour une cadence à 100 MHz, neuf cœurs
seraient nécessaires et une augmentation de 297 % de la consommation serait à prévoir.
6.4 Conclusion
Nous avons présenté dans ce chapitre l’architecture du processeur de prétraitement numérique
matériel dédié aux traitements de signaux ultrasoniques. De plus, il a été démontré qu’avec
l’architecture proposée, il est possible de remplacer le câble d’un système échographique qui relie
la sonde au processeur d’image par un lien sans-fil qui repose sur une technologie actuellement
disponible.
L’architecture numérique est entièrement implémentée avec un seul FPGA d’entrée de gamme et
une mémoire à faible consommation de type PSRAM. Les résultats obtenus du module matériel
de décimation adaptative et du contrôleur d’assignation dynamique de priorisation de l’accès
mémoire ont démontré la faisabilité d’utiliser cette architecture. De plus, avec 53,15
DMIPS/MHz, la solution proposée présente un bon ratio performance/consommation
comparativement aux solutions basées sur logiciel. En effet, le cœur de traitement proposé et
l’unité d’interpolation présente un ratio de 26 DMIPS/mW et de 43,9 DMIPS/mW lorsque la
fréquence d’échantillonnage est respectivement de 20 MHz et de 100 MHz. De plus, lorsque
implémentée telle que décrite, l’architecture proposée peut également être utilisée pour traiter les
signaux ultrasoniques haute-fréquence (20 MHz) puisque son architecture pipeline traite le signal
ultrasonique RF au même débit, jusqu’à 100 Méch/s (limité par le FPGA), que l’échantillonnage.
Finalement, l’architecture fut validée par l’acquisition de signaux expérimentaux en utilisant une
sonde possédant un élément piézoélectrique de 5 MHz et un fantôme de référence. Les images
obtenues ont permis de faire ressortir les avantages de l’architecture proposée. En effet, une
amélioration de 25 % et 33 % des résolutions latérale et axiale a pu être observé
expérimentalement.
134
Tableau 6.8 : Performances et consommation de différentes architectures
Architecture
DMIPS
Dhrystone
2.1
Fréq.
(MHz)
Consommation (mW)
Statique Dynamique Total
Architecture matérielle proposée
Cœur de traitement (à 20 MHz) 10631
20 41,252
313
72,253
Cœur de traitement (à 100 MHz) 53151
100 422
1213
1633
Unité d’interpolation 42,51
20 2,754
13
3,753
Processeur pour système embarqué
Power PC 405exr5
400 400 -- -- 3000
Intel Atom Z5XX6
3889 1600 -- -- 6000
Freescale MPC85407
1850 800 -- -- 12 000
PowerPC 405EP8
404 266 -- -- 4000
Processeur logiciel implémenté avec un FPGA
Xilinx Microblaze v.7.009
3-étages, XC3S1600E
5-étages, XC3S1600E
5-étages, XC5VLX5010
97
132
240
100
100
240
202
203
424
97
132
37
299
336
461
Altera NIOS II (v6.1 /f)11
Cyclone II
Cyclone III
Startix III
145
165
300
110
135
200
66
65
339
108
64
121
175
129
459
Processeur matériel implémenté avec un ASIC
IBM PPC405F612
289
589
1000
190
388
658
--
--
--
--
--
--
14
39
109
ARM946E-S13 253
484
230
440
--
--
--
--
25,3
74,8
Tensilica Diamond 570T12
617 380 -- -- 58,4
1 : Estimé
2 : Incluant 75 % de la consommation statique du FPGA (55 mW à 20 MHz et 56 mW à 100 MHz)
3 : Xpower Estimator (XPE) 10.1.03
4 : Incluant 5 % de la consommation statique du FPGA (55 mW)
5 : AMCC
6 : Kontron nanoETXexpress-SP
7 : Kontron EB8540
8 : Kontron EB405
9 : CPU, UART, Timer, taux de commutation à 50 %, XPE 9.1.03; 10 : Sans MMU
11 : CPU, UART, Timer, contrôleur SDRAM, taux de commutation à 50 %, Altera PowerPlay Early
Power Estimator V7.2 SP1
12 : CPU seulement; 13 : CPU et cache
135
CHAPITRE 7 CONCLUSION
Dans l’ensemble, nous avons proposé dans cette thèse une nouvelle architecture d’imagerie
médicale par ultrasons qui permet de remplacer le câble qui relie la sonde au système
échographique par un lien sans fil. Nous avons présenté un nouveau processeur dédié aux
traitements de signaux ultrasoniques en temps réel qui facilite l’intégration du système à
l’intérieur de la sonde dû à ses dimensions, sa consommation et sa performance. L’avancement
des technologies des circuits logiques programmables et des mémoires à faible consommation
nous a permis d’effectuer l’intégration de l’ensemble des circuits numériques d’un échographe
miniaturisé. En plus d’appuyer nos résultats à l’aide d’un prototype fonctionnel du système, les
algorithmes de traitement furent analysés et comparés par simulations et expérimentalement. De
plus, les choix architecturaux de l’implémentation matérielle de chaque module de traitement ont
été évalués en fonction des ressources matérielles, des performances d’exécution, de la flexibilité
et de la précision. La Figure 7.1 présente l’évolution de ces choix architecturaux et des
implémentations qui furent réalisées au cours de ce travail. D’autre part, une discussion portant
sur le ratio performance/consommation a comparé l’implémentation matérielle proposée avec des
implémentations logicielles reposant sur différentes architectures de processeur conventionnel.
Finalement, il est à noter que le temps de démarrage, le coût, la taille ainsi que la consommation
de puissance du prototype de l’échographe miniaturisé sont grandement améliorés par rapport aux
autres systèmes existants.
7.1 Retour sur les objectifs
À la lumière des résultats obtenus, il s’avère que chacun des objectifs de cette thèse fut rencontré
tel qu’illustré par le Tableau 7.1.
 Portabilité
Malgré l’espace requis par la section analogique et mixte ainsi que les nombreuses
sources d’alimentation, les dimensions du prototype rencontrent les critères de portabilité.
En effet, l’échographe miniaturé mesure 10 cm x 16 cm et peut opérer avec deux piles
Lithium-Ion (CGA103450A, Panasonic) (2 x 3,7 V @ 1950 mAh). Le système complet,
136
incluant la batterie, l’afficheur et le clavier, peut être intégré à l’intérieur d’un boitier
mesurant 16 cm x 10 cm x 3 cm (480 cm3
).
a) b)
c) d)
e)
Figure 7.1 : Évolution du système : a) première image obtenue, b) premier fantôme artisanal, c)
image de 0 à 10 cm avec interpolation, d) fantôme de référence et e) composants du système
échographique miniaturisé.
137
D’un autre côté, il est possible d’intégrer l’architecture numérique à l’intérieur de la
sonde. Seulement cinq composants sont requis : le FPGA et sa mémoire de configuration,
la mémoire partagée, la mémoire contenant les paramètres de configuration de
l’application et un oscillateur. L’intégration est facilitée grâce à la mémoire partagée qui
permet de réduire le nombre d’interconnexions entre le processeur et les ressources
mémoires. Pour l’implémentation proposée, seulement 45 signaux sont requis pour
permettre l’échange des données. De plus, il serait facile d’éliminer la mémoire de
configuration du FPGA en implémentant, par exemple, l’architecture proposée avec un
ASIC; en utilisant un FPGA qui possède une mémoire de configuration interne ou qui
utilise une technologie de programmation fusible ou anti-fusible ; ou en utilisant une
configuration permanente (hard-copy) du FPGA.
 Consommation
La consommation énergétique du prototype, inférieure à 2 W, illustre bien l’efficacité de
l’architecture proposée. La consommation du système associée au prétraitement par
rapport à l’ensemble du système échographique est maintenant de 20 % comparativement
à environ 60 % pour une implémentation logicielle. Avec les 102 mW utilisés par la
mémoire et par le cœur du FPGA, les 130 mW consommés par les IOs numériques et les
165 mW requis par les DCMs du FPGA, la consommation de la section numérique
totalise 397 mW. Cette consommation est inférieure de plus de 20 % comparativement à
l’objectif fixé qui était de 500 mW. L’implémentation sur ASIC contribuerait grandement
à réduire cette consommation en diminuant la consommation statique. En effet, le FPGA
utilisé présente une consommation statique importante (155 mW) qui représente près de
40 % de la consommation du FPGA.
 Débit pour un transfert sans fil
L’architecture permet d’effectuer tout le prétraitement, ce qui offre la possibilité de
transférer seulement les images en Mode-B. Un débit utile de 8,8 Mb/s est donc requis
pour transmettre 15 images de 320×240×8 bits par seconde sans avoir recours à aucune
138
compression. Il est à noter que ce débit est supporté par les technologies actuelles de
communication sans fil.
 Flexibilité de configuration
Les paramètres de configuration ainsi que l’utilisation de LUT pour l’implémentation des
coefficients des filtres RIF, des fonctions sinus et cosinus, de la compression des données,
de la calibration des tons de gris et du type d’impulsion offrent la flexibilité demandée
pour adapter le système afin de générer des images échographique en Mode-B selon
toutes les caractéristiques requises par l’imagerie médicale par ultrasons.
Il est possible d’adapter les filtres en modifiant les coefficients des filtres FIR qui sont
contenus dans des LUT. Lorsqu’une fréquence d’échantillonnage de 20 MHz est utilisée,
ces nouveaux coefficients permettent en effet de synthétiser de nouveaux filtres RIF
complexes qui possèdent une bande passante à l’intérieur d’une plage de fréquence allant
de 1 MHz à 9 MHz. Dans le cas d’une fréquence d’échantillonnage de 100 MHz, la plage
de fréquence serait plus large, soit de 1 MHz à 50 MHz. Il est important de rappeler que
c’est le FPGA qui limite la fréquence d’échantillonnage; une implémentation sur ASIC
pourrait améliorer les performances et permettre d’élargir davantage la plage de fréquence
supportée.
Grâce aux LUT, il est également possible de modifier aisément la variation de l’angle
entre les lignes balayées. Ceci permet d’effectuer, par exemple, des balayages à 60o
, 90o
ou 180o
. Il serait même possible d’effectuer un balayage linéaire au lieu de sectoriel. En
effet, la fonction de conversion entre les coordonnées polaires et cartésiennes est
entièrement configurable. Il ne faut pas oublier que les paramètres de positionnement de
la tête de la sonde sont également modifiables. De plus, l’architecture de l’unité
d’interpolation s’adapte déjà à toutes ces configurations.
139
Dans le même ordre d’idées, les configurations de la compression des données, de la
calibration des tons de gris et du type d’impulsion sont possibles. Pour ce faire, il suffit de
modifier le contenu des LUT qui sont associées à ces fonctions. Le système propose à
l’usager quatre variantes de compression de données et également quatre choix pour la
calibration de tons de gris. De plus, il y a huit choix pour le type d’impulsion pour
chacune des sept sondes présentement détectables.
 Précision du traitement
Les résolutions axiale et latérale maximales de la sonde utilisée furent atteintes. Selon les
spécifications de la sonde utilisée (GP2000 5 MHz, Interson), les meilleurs résolutions
qu’il est possible d’atteindre sont de 1 mm pour les résolutions axiale et latérale. Les
meilleures résolutions mesurées sont de 1 mm pour la résolution axiale et de 1,5 mm pour
la résolution latérale. De plus, la résolution temporelle maximale de 18 FPS pour un
balayage de 256 lignes et une profondeur de 16 cm (équation (2.26)) est limitée par la
vitesse de propagation du son dans les tissus. En considérant la bande passante de la
mémoire partagée en mode asynchrone, il serait possible de doubler la résolution
temporelle pour produire 36 FPS pour une profondeur de 8 cm. Il est à noter que le
contrôleur de l’afficheur est réglé pour offrir 15 FPS. Ces résultats ainsi que les images
obtenues sont comparables, voire de qualité supérieure, comparativement à celles
obtenues avec un système échographique commercial qui utilise la même sonde.
L’architecture proposée permet de réduire le bruit hors bande grâce au démodulateur qui
possède une bande passante adaptée à la sonde utilisée. Selon les simulations, il est
possible d’obtenir une amélioration du SNR d’au moins 3 dB par rapport aux solutions
conventionnelles de même complexité (Figure 5.11). De plus, l’unité de compression des
pixels réduit légèrement (proportionnellement à la racine carrée du nombre de données
sur-échantillonnées) le bruit dans la bande passante lorsqu’il y a plusieurs données sur-
échantillonnées. Également, l’unité réjection du bruit permet de fixer le niveau plancher
de l’amplitude de l’intensité; ce qui permet d’éliminer le bruit de faible amplitude dans la
bande passante. Malheureusement, l’unité réjection du bruit élimine également les
140
signaux qui présentent une amplitude inférieure au seuil fixé par l’usager. Il est aussi
possible, grâce aux unités de calibration de l’intensité et de calibration de tons de gris,
d’adapter le contraste selon les besoins de l’usager.
Finalement, il est important de mentionner que la section analogique influence
grandement la précision et la qualité des images. En effet, les résolutions, le niveau de
bruit et le contraste obtenus dépendent de la qualité du signal analogique numérisé par le
CAN. L’optimisation des performances de la section analogique dépasse le cadre de cette
thèse. Toutefois, il s’avère, grâce aux images expérimentales obtenues avec l’échographe
miniaturisé, que la section analogique est adéquate par rapport au type de sonde utilisée
puisque les résultats du système se comparent avec celui de référence. Par contre, de par
son architecture rudimentaire, il est évident qu’il serait possible, et même souhaitable,
d’améliorer cette section afin d’obtenir une meilleure précision et qualité d’image.
Tableau 7.1 : Atteinte des objectifs
Objectifs À atteindre Système Processeur Rencontré
Portabilité
20 cm x 10 cm
x 5 cm
16 cm x 10 cm
x 3 cm
1 FPGA
1 PSRAM
1 FRAM
OUI
Consommation
Système : 3 W
Processeur : 500 mW
< 2W < 400 mW OUI
Débit sans fil < 10 Mb/s 8,8 Mb/s OUI
Flexibilité 1 MHz à 9 MHz 1 à 9 MHz 1 à 50 MHz OUI
Précision
Résolutions :
axiale : 1 mm FWHM
latérale : 1 mm FWHM
temporelle : 10 FPS
Résolutions :
axiale : 1 mm FWHM
latérale : 1,5 mm FWHM
temporelle : 151
FPS
Presque1
1: Limitée par la vitesse de propagation du son pour un balayage de 256 lignes et une profondeur de 16 cm.
2 : Il serait possible d’améliorer la section analogique afin d’obtenir une meilleure précision et qualité d’image.
7.2 Discussion
Le Tableau 7.2 permet de comparer le système échographique miniaturisé avec d’autres systèmes
équivalents afin de faire ressortir les points forts et les points faibles du système et du processeur
dédié au prétraitement de signaux ultrasoniques en temps réel. Les points forts du système
141
échographique miniaturisé sont son temps de démarrage (< 1 s); sa taille (10 cm x 16 cm), sa
consommation inférieure à 2 W, sa flexibilité de configuration et la possibilité d’effectuer des
zooms sans interpoler entre les échantillons sur une même ligne. Toutefois, le système possède
également des points faibles. Effectivement, il aurait été judicieux d’inclure un port de
communication standard afin de permettre l’envoi de données brutes vers un ordinateur. Ceci
aurait permis de rehausser l’analyse des résultats et les comparaisons des performances des
diverses variations d’algorithmes. De plus, la sonde à balayage mécanique possédant un seul
élément piézoélectrique ainsi que l’unité analogique limitent l’analyse de résultats. En effet, la
précision du traitement semble être limitée par ces composants du système. L’algorithme
d’interpolation est également un élément qui pourrait être amélioré pour rehausser la qualité de
l’image. Également, lorsqu’une mémoire externe est utilisée, le bit d’identification de la validité
de l’information généré au moment de la construction de l’image et utilisé par l’unité
d’interpolation limite la précision de la représentation de la valeur de l’intensité à 7 bits (mémoire
possédant un bus de données de 8 bits).
Grâce à l’efficacité de son cœur de traitement (14,7 DMIPS/mW à 20 MHz) et de l’unité
d’interpolation (11,3 DMIPS/mW), l’architecture du processeur dédié au prétraitement de
signaux ultrasoniques en temps réel surpasse les implémentations basées sur logiciel. De plus,
l’utilisation d’une mémoire à faible consommation et d’un module d’assignation de priorités pour
partager cette ressource permet de faciliter l’intégration et de maintenir une faible consommation
(7 mW pour le cœur de la PSRAM). Les ressources matérielles utilisées pour l’implémentation de
l’ensemble du système sont très faibles. En effet, seulement 12 multiplicateurs dédiés et 4473
tranches du FPGA Spartan3 sont requis pour réaliser le cœur de traitement. Pour le système
complet, c’est 6303 tranches, 8 BRAM et 15 multiplicateurs dédiés qui sont requis.
Comparativement, le système présenté par Chang et collaborateurs [58] requiert 1,85 Mb de
mémoire pour implémenter les principaux algorithmes de traitement et 1 Mb pour la mémoire
d’image. Il est à noter que la mémoire de 1 Mb est considérée comme étant équivalente à la
PSRAM externe. En effet, les ressources mémoire du XC3S1500L sont de 784 kb, ce qui n’offre
pas la possibilité d’implémenter la mémoire d’image à l’intérieur du FPGA. Comparativement au
XC3S1500L, le EP1S60 possède au moins deux fois plus de ressources (29 952 vs 57 120). Par
conséquent, puisque le pourcentage d’utilisation des ressources est similaire, l’implémentation
142
matérielle du cœur de traitement du système échographique miniaturisé requiert deux fois moins
de ressources que celui du système présenté par Chang et collaborateurs [58].
Tableau 7.2 : Comparaison du système échographique miniaturisé
Caractéristiques
Système
échographique
miniaturisé
[58] [38] [105]
Type de sonde
1 à 9 MHz
1 élément
40 MHz
1 élément
64 éléments 64 éléments1
Ressource :
système
FPGA2
< 50 %
FPGA3
60 %
PC
Deux Virtex-4
ARM11
SDRAM
FPGA4
97,3 %
DSP4
51,8 %
Ressource :
cœur de traitement
FPGA2
< 35 % FPGA3
< 39 % ND10
ND10
Temps d’allumage < 1 s
FPGA : < 1 s
PC : > 30 s
FPGA : < 1 s
DSP : > 30 s
FPGA : < 1 s
DSP : > 30 s
Consommation 2 W ND10
ND10
ND10
Flexibilité Grande5
Faible6
Moyenne7
Moyenne7
Zoom sans
interpolation
Jusqu’à 1 cm Non non ND10
Qualité de l’image Bonne Bonne Mauvaise ND10
Interpolation Moyenne PPV9
Bilinéaire ND11
ND10
Dimensions 10 cm x 16 cm ND10
32,5 cm x 10 cm ND10
1 : 120 lignes par image
2 : FPGA = XC3S1500L
3 : FPGA = EP1S60, ressource mémoire seulement
4 : FPGA = EP2C70, DSP = TMS320C6416
5 : Les coefficients des filtres RIF, le convertisseur de balayage, le type d’impulsion, la compression
logarithmique et la calibration des tons de gris sont configurables
6 : Flexibilité au niveau de la compression logarithmique
7 : Le post-traitement est implémenté en logiciel
9 : Valeur moyenne des deux plus proches voisins
10 : Information non disponible
Finalement, quelques variations d’implémentation des algorithmes de traitements furent
présentées. Pour la démodulation, les impacts attribués à l’ordre des filtres RIF et à la précision
des coefficients furent évalués et comparés. Cette exploration permet de recommander des filtres
RIF d’ordre 32 ou 64 et une précision des coefficients respectivement de 12 ou 10 bits pour
remplacer le filtre de Hilbert d’ordre 128. Par ailleurs, une seule implémentation de la racine
carrée fut présentée. Celle-ci permettait d’obtenir une erreur de ±1 LSB sur une résolution de 10
143
bits en sortie en utilisant seulement 16 zones; il n’a donc pas été jugé avantageux d’utiliser plus
de zones afin de réduire l’erreur sous le seuil de l’erreur de troncature. En effet, l’erreur
d’approximation représente -57 dB par rapport à l’amplitude de la valeur crête que peut prendre
la sortie. Toutefois, il est possible de doubler le nombre de zones (de 16 à 32) afin d’atteindre le
seuil de l’erreur de troncature (< ±0,5 LSB). Finalement, quelques algorithmes pour la
compression de pixels furent présentés. L’implémentation de l’algorithme proposé requiert 65
tranches du FPGA et un seul multiplicateur dédié. L’algorithme de référence présentant les
mêmes performances nécessite 86 % plus de tranches du FPGA en plus d’un multiplicateur dédié.
7.3 Contributions
Le travail relatif à cette thèse représente une contribution importante dans les efforts visant à
l’intégration complète d’un système de prétraitement de signaux ultrasoniques à l’intérieur de la
sonde ainsi que l’avancement du nouveau type de système échographique sans fil. Plus
précisément, nous avons proposé :
 Une méthode pour adapter la bande passante et la translation fréquentielle du filtre RIF
passe-bas pour générer un filtre RIF à coefficients complexes en vue de l’utiliser pour la
démodulation en quadrature d’un signal ultrasonique. Cette méthode permet de réduire
significativement, jusqu’à huit fois, les ressources matérielles habituellement requises
pour obtenir des performances similaires. En effet, il fut démontré qu’il est possible
d’obtenir un filtre RIF d’ordre 16 qui se compare à un filtre RIF de Hilbert d’ordre 128
(Figure 5.10).
 Une architecture matérielle et son implémentation pour réaliser la fonction racine-carrée
qui repose sur une approximation linéaire par morceaux. Cette architecture permet
d’obtenir un débit égal à la fréquence d’horloge maximale du composant programmable
(environ 100 MHz pour le FPGA choisi) et seulement deux périodes de latence. Les
ressources nécessaires pour atteindre la précision souhaitée sont négligeables : un
multiplicateur, un additionneur et deux mémoires possédant une profondeur égale au
nombre de zones requises pour effectuer l’approximation. Pour l’implémentation
présentée à la section 5.4.2, la quantité de mémoire utilisée était de 896 bits (16 x 12 bits
144
et 16 x 16 bits). Comparativement, une implémentation basée entièrement sur des
ressources mémoires nécessiterait 5 Mb (219
x 10 bits).
 Une méthode de décimation adaptative qui permet de réduire le niveau de bruit en
effectuant la moyenne arithmétique des échantillons en sur-échantillonnage tout en
permettant d’adapter la décimation en fonction non seulement du nombre d’échantillons
requis (selon la résolution de l’image), mais également en fonction de la zone d’image à
présenter. Il est à noter que cette adaptation permet d’effectuer des zooms en temps réel
tout en minimisant les interpolations. En effet, l’architecture permet de présenter une
section de 1 cm d’une image de 0 cm à 16 cm sur une résolution de 200 pixels sans
effectuer d’interpolation. De par leur décimation, les architectures conventionnelles
doivent effectuer des interpolations afin d’obtenir un tel zoom.
 Une architecture matérielle du cœur de traitement flexible et configurable pouvant opérer
à la fréquence d’horloge maximale du composant programmable. Contrairement aux
implémentations logicielles, toutes les ressources matérielles sont continuellement
utilisées et opèrent à la fréquence minimale requise pour échantillonner le signal. C’est
d’ailleurs ce qui explique l’excellent ratio performance/consommation obtenu par rapport
aux autres architectures (Tableau 6.7 et Tableau 6.8).
 Une architecture matérielle d’un processeur dédié au prétraitement de signaux
ultrasoniques en temps réel qui intègre un cœur de traitement, une mémoire à faible
consommation, un module d’interpolation et un module d’assignation de priorités qui
permet de partager le bus de données de la mémoire à faible consommation. Il est à noter
que l’utilisation d’un seul bus de mémoire facilite l’intégration par la réduction du nombre
de signaux d’entrées-sorties requis. Le processeur tel que présenté ou une version
implémentée sur ASIC peut être intégré directement dans la sonde afin de concevoir le
système échographique sans fil.
145
 Un prototype fonctionnel du système qui a permis d’enrichir la validation en apportant des
résultats expérimentaux. De plus, plusieurs discussions et recommandations découlent des
nombreuses leçons qui furent apprises lors de sa réalisation et de l’intégration du système.
7.4 Travaux futurs et recommandations
Les recommandations visant à encadrer les efforts de recherche en vue de poursuivre les travaux
effectués au cours de cette thèse sont divisées en deux catégories : amélioration du processeur de
prétraitement numérique et avancement du système échographique sans fil.
7.4.1 Amélioration du processeur de prétraitement numérique
Deux principales améliorations du processeur de prétraitement numérique sont à considérer. La
première concerne l’ajout d’un module de compression des données en vue de réduire le débit
utile nécessaire pour transmettre les images résultantes du prétraitement des signaux
ultrasoniques. La deuxième amélioration importante concerne l’unité d’interpolation. En effet, il
serait souhaitable d’allonger la fenêtre de recherche afin d’inclure plus d’une valeur valide de
chaque côté des valeurs à déterminer. De plus, il serait recommandé d’utiliser une fenêtre de
recherche à deux dimensions en incorporant les valeurs valides des pixels voisins selon l’axe des
Y (section 6.2.3). De plus, une analyse des performances de différents algorithmes d’interpolation
serait pertinente. Cette analyse doit tenir compte de la distribution des données valides (non
interpolées) qui est différente d’un type d’image à l’autre, dépendamment de la zone d’image à
afficher (Figure 4.16 et Figure 4.17); et de la diminution de la densité des données valides
(équation (7.1)) qui est directement proportionnelle à la profondeur (u) où se trouvent les
données, à l’angle (θ) entre la première des deux lignes par rapport au centre, et au pas angulaire
(Δθ) entre les deux lignes. Présentement, l’erreur maximale est estimée à 50 % selon l’algorithme
utilisé (moyenne arithmétique entre les valeurs des deux plus proches voisins). Une
approximation linéaire contribuerait grandement à améliorer cette erreur.
   
Distance entre 2 valeurs valides = tan tan
u   
  
 
 
 (7.1)
Des améliorations secondaires seraient également à prévoir. L’architecture offre une grande
flexibilité de configuration mais n’en tire pas entièrement avantage en ce qui concerne le type de
balayage ainsi que le support fréquentiel du piézoélectrique utilisé. Par conséquent, l’ajout, pour
146
le convertisseur de balayage, d’un support pour d’autres types de balayage (exemple : balayage à
180 degrés) en permettant de modifier les LUT pour les fonctions sinus et cosinus serait
judicieux. Dans le même ordre d’idées, il serait également pertinent d’ajouter différents jeux de
coefficients des filtres RIF ainsi que la possibilité de les modifier en temps-réel; ce qui
permettrait d’ajuster la bande passante des filtres RIF afin d’améliorer la réjection du bruit hors
bande passante.
7.4.2 Avancement du système échographique sans fil
Afin d’obtenir un système échographique sans fil complet, plusieurs travaux doivent être
complétés. Dans un premier temps, il serait essentiel de poursuivre les travaux de recherche
concernant l’intégration complète des circuits analogiques et mixtes par un ASIC. Ceci
permettrait de revoir les circuits d’alimentation afin d’en réduire le nombre et du même coup
d’améliorer leur efficacité. Parallèlement, il serait pertinent d’inclure un formateur de faisceau au
processeur de prétraitement numérique en ciblant les mêmes objectifs de cette thèse. De plus, il
serait souhaitable de réaliser le module de communication RF. Finalement, il serait intéressant
d’entreprendre des travaux d’intégration sur une ou quelques puces du réseau piézoélectrique, du
ASIC de prétraitement analogique et mixte, du processeur de prétraitement numérique et du
module de communication sans fil.
D’un autre côté, l’implémentation du logiciel d’interface usager, du pilote qui gère la
communication entre le transducteur de prétraitement ultrasonique (TPU) et l’afficheur
d’imagerie médicale (AIM) (Figure 4.1) ainsi que de l’unité logicielle de post-traitement (si
nécessaire selon l’application) complèterait les différents éléments nécessaires pour bâtir le
système dans son ensemble. À titre d’exemple, un ordinateur de bureau, un portable, un Ultra-
Mobile PC ou un système fait sur mesure constituent quelques solutions d’AIM qui pourraient
réaliser le post-traitement dépendamment de la puissance de calcul requise par l’application.
147
BIBLIOGRAPHIE
[1] K. Najarian, et R. Splinter, Biomedical Signal and Image Processing, Boca Raton: CRC-
aylor & Francis, p. 448, 2005.
[2] K. Iniewski, Medical Imaging: Principles, detectors, and electronics, New Jersey: Wiley,
p. 305, 2009.
[3] W. R. Hendee, et E. R. Ritenour, Medical Imaging Physics, 4e ed., New York: Wiley-Liss
Inc, p. 512, 2002.
[4] J. S. Suri, S. K. Setarehdan, et S. Singh, Advanced Algorithmic Approaches to Medical
Image Segmentation: State-of-the-Art Applications in Cardiology, Neurology,
Mammography and Pathology, Londres: Springer, p. 660, 2002.
[5] S. Webb, The Physics of Medical Imaging, Londres: Taylor & Francis, réimpression avec
correction 1992, p. 633, 1988.
[6] W. R. Hedrick, D. L. Hykes, et D. E. Starchman, Ultrasound Physics and Instrumentation,
4e ed., Missouri: Elsevier Mosby, p. 512, 2002.
[7] C. R. Hill, J. C. Bamber, et G. R. ter Haar, Physical Principles of Medical Ultrasonics, 2e
ed., New Jersey: Wiley, p. 511, 2004.
[8] J. P. Woodcock, Ultrasonics, Bristol: Adam Hilger Ltd, p. 166, 1979.
[9] P. N. T. Wells, Biomedical Ultrasonics, New York: Academic Press Inc, p. 635, 1977.
[10] H. Azhari, Basics of Biomedical Ultrasound for Engineers, New Jersey: Wiley-IEEE
Press, p. 371, 2010.
[11] B. A. J. Angelsen, Ultrasound Imaging: Waves, Signals, and Signal Processing, Norway:
Emantec, Vol. 1, p. 697, 2000.
[12] B. A. J. Angelsen, Ultrasound Imaging: Waves, Signals, and Signal Processing, Norway:
Emantec, Vol. 2, p. 719, 2000.
[13] J. M. Baran, et J. G. Webster, “Design of low-cost portable ultrasound systems: review,”
Présenté à IEEE EMBS 31st Annual Inter. Conf., pp. 792-795, 2009.
148
[14] B. P. Nelson, and K. Chason, “Use of ultrasound by emergency medical services: a
review,” Int. J. Emerg. Med., Vol. 1, N0. 4., pp. 253-259, 2008.
[15] D. Adler, K. Mgalula, D. Price, and O. Taylor, “Introduction of a portable ultrasound unit
into the health services of the Lugufu refugee camp, Kigoma District, Tanzania,” Int. J.
Emerg. Med., Vol. 1, N0. 4., pp. 261-266, 2008.
[16] J. M. Schmitt, “Optical coherence tomography (OC): a review,” IEEE Journal of Selected
topics in quantum electronics, Vol.4, pp. 1205-1215, 1999.
[17] C. H. Jones, “Medical thermography,” IEE Proc. A Science, Meas. & Tech., Vol. 134,
No. 2, pp. 225-236, 1987.
[18] APC International Ltd., Piezoelectric Ceramics: principles and applications, Mackeyville:
APC International Ltd., p. 112, 2002.
[19] A. Roy Williams, Ultrasound: Biological Effects and Potential Hazards, New York:
Academic Press Inc, p. 321, 1983.
[20] NEMA/AIUM, Acoustic Output Measurement standard For Diagnostic Ultrasound
Equipment, NEMA Standards Publication UD 2-2004, révision 3, pp.140, 2009.
[21] NEMA/AIUM, Standard for Real-Time Display of Thermal and Mechanical Acoustic
Output Indices on Diagnostic Ultrasound Equipment, NEMA Standards Publication UD
3-2004, révision 2, pp. 55, 2010.
[22] P. Levesque, et M. Sawan, “New digital quadrature demodulator for real-time hand-held
ultrasound medical imaging device,” Présenté à IEEE Symposium on Circuits and
Systems, May, pp. 2949-2952, 2008.
[23] P. Levesque, et M. Sawan, “Real-time hand-held ultrasound medical-imaging device
based on a new digital quadrature demodulation processor,” IEEE Trans. on Ultrasonics,
Ferro. and Freq. Control, Vol. 56, pp. 1654-1665, 2009.
[24] P. Levesque, et M. Sawan, “Novel low-power ultrasound digital preprocessing
architecture for wireless display,” IEEE Trans. on Ultrasonics, Ferro. and Freq. Control,
Vol. 57, pp. 757-767, 2010.
149
[25] J. F. Greenleaf, Tissue Characterization with Ultrasound, Boca Raton: CRC Press, Vol. 1,
p. 255, 1986.
[26] J. F. Greenleaf, Tissue Characterization with Ultrasound, Boca Raton: CRC Press, Vol. 2,
p. 261, 1986.
[27] ---, Digital Imaging and Communications in Medicine (DICOM) – Part 14: Grayscale
standard display function, Virginia: Nat. Elect. Manuf. Ass., p.55, 2007.
[28] T. Sielhorst, M. Feuerstein, et N. Navab, “Advanced medical display: a literature review
of augmented reality,” Journal of display technology, Vol. 4, No. 4, pp. 451-467, 2008.
[29] I. Ladabaum, X. Jin, H. T. Soh, Adbullah, et B. T. Khuri-Yakub, ”Surface micromachines
capacitive ultrasonic transducers,” IEEE Trans. Ultrason., Ferro. and Freq. Contr., Vol.
45, No. 3, pp. 678-690, 1998.
[30] O. Oralkan, A. S. Ergun, J. A. Johnson, M. Karaman, U. Demirci, K. Kaviani, T. H. Lee,
et B. T. Khuri-Yakub, “Capacitive micromachined ultrasonic transducers: next-generation
arrays for acoustic imaging ?,” IEEE Trans. Ultrason., Ferro. and Freq. Contr., Vol. 49,
No. 11, pp. 1596-1610, 2002.
[31] E. J. Gottlieb, J. M. Cannata, C.-H. Hu, et K. K. Shung, “Development of a high-
frequency (>50 MHz) copolymer annular-array, ultrasound transducer,” IEEE Trans.
Ultrason., Ferro. and Freq. Contr., Vol. 53, No. 5, pp. 1037-1045, 2006.
[32] I. O. Wygant, D. T. Yeh, X. Zhuang, S. Vaithikingam, A. Nikoozadeh, O. Oralkan, A. S.
Ergun, G. G. Yaralioglu, et B. T. Khuri-Yakub, “Integrated ultrasound imaging systems
based on capacitive micromachined ultrasonic transducer arrays,” Présenté à IEEE
Sensors Conf., pp. 704-707, 2005.
[33] I. O. Wygant, N. S. Jamal, H. J. Lee, A. Nikoozadeh, O. Oralkan, M. Karaman, et B. T.
Khuri-Yakub, “An integrated circuit with transmit beamforming flip-chip bonded to a 2-D
CMUT array for 3-D ultrasound imaging,” IEEE Trans. Ultrason., Ferro. and Freq. Contr.,
vol. 56, No. 10, pp. 2145-2156, 2009.
[34] E. D. Light, J. F. Angle, et S. W. Smith, “Real-time 3-D ultrasound guidance of
interventional devices,” IEEE Trans. Ultrason., Ferro. and Freq. Contr., Vol. 55, No. 9,
pp. 2066-2078, 2008.
150
[35] D.-W. Wu, Q. Zhou, X. Geng, C.-G. Liu, F. Djuth, et K. K. Shung, “Very high frequency
(beyond 100 MHz) PZT kerfless linear arrays,” IEEE Trans. Ultrason., Ferro. and Freq.
Contr., Vol. 25, No. 10, pp. 2304-2310, 2009.
[36] S. J. Carey, C. Brox-Nilsen, H. M. Lewis, C. M. Gregory, et J. V. Hatfield, “Scanning
head with 128-element 20-MHz PVDF linear array transducer,” IEEE Trans. Ultrason.,
Ferro. and Freq. Contr., Vol. 56, No. 8, pp. 1769-1777, 2009.
[37] H. S. Han, J. Cho, J. H. Song, G. D. Kim, T.K. Song, et K. S. Kim, “A hand-held
ultrasound imaging system for point-of-care applications,” IEEE ultrasonics symposium,
pp.1099–1102, 2-6 Oct., 2006.
[38] S.-W. Yang, H.-C. Yoon, J. Cho, S.-B. Kye, et T.-K. Song, “A mobile medical device for
point-of-care applications,” Présenté à IEEE Ultrasonics Symposium, pp. 1346-1349, 2-3
Nov., 2008.
[39] M. I. Fuller, T. N. Blalock, J. A. Hossack, et W. F. Walker, “A portable, low-cost, highly
integrated, 3d medical ultrasound system,” Présenté à IEEE Ultrasonics Symposium, pp.
38-41, 2003.
[40] M. I. Fuller, K. Ranganathan, S. Zhou, T. N. Blalock, J. A. Hossack, et W. F. Walker,
“Portable, low-cost medical ultrasound device prototype,” Présenté à IEEE Ultrasonics
Symposium, pp. 106-109, 2004.
[41] M. I. Fuller, K. Ranganathan, S. Zhou, T. N. Blalock, J. A. Hossack, et W. F. Walker,
“Experimental system prototype of a portable low-cost, C-scan ultrasound imaging
device,” IEEE Trans. Biomedical Eng., Vol. 55, No. 2, pp. 519-530, 2008.
[42] N. Dutt, et K. Choi, “Configurable processors for embedded computing,” Computer, Vol.
36, pp. 120-123, 2003.
[43] M. Schlett, “Trends in embedded-microprocessor design,” Computer, Vol. 31, No. 8, pp.
44-49, 1998.
[44] H.-C. Kim, J.-H. Sim, H.-Y. Sohn, et T.-K. Song, “An Optimized software-based echo-
processing algorithm for small scale ultrasound systems,” Présenté à IEEE Ultrasonics
Symposium, Vol. 3, pp. 2053-2056, 2004.
151
[45] L. Bassi, E. Boni, F. Guidi, S. Ricci, et P. Tortoli, “ULA-OP: a novel ultrasound advanced
open platform for experimental research,” Présenté à IEEE Ultrasonics Symposium, pp.
632-635, 2007.
[46] P. Tortoli, L. Bassi, E. Boni, A. Dallai, F. Guidi, et S. Ricci, “ULA-OP: an advanced open
platform for ultrasound research,” IEEE Trans. Ultrason., Ferro. and Freq. Contr., Vol. 56,
No. 10, pp. 2207-2216, 2009.
[47] S. I. Nikolov, “Synthetic aperture tissue and flow ultrasound imaging,” Technical
University of Denmark, Ph.D., Lyngby, Danmark, 2001.
[48] J. A. Jensen, M. Hansen, B. G. Tomov, S. I. Nikolov, et H. Holten-Lund, “System
architecture of an experimental synthetic aperture real-time ultrasound system,” Présenté à
IEEE Ultrasonics Symposium, pp. 636-740, 2007.
[49] S. I. Nikolov, B. G. Tomov, et J. A. Jensen, “Real-time synthetic aperture imaging:
opportunities and challenges,” Présenté à Fortieth Asilomar Conf. on Signals, Systems &
Computers, pp. 1548-1552, 2006.
[50] S. I. Nikolov, J. A. Jensen, et B. G. Tomov, “Fast parametric beamformer for synthetic
aperture imaging,” IEEE Trans. Ultrason., Ferro. and Freq. Contr., Vol. 55, No. 8, pp.
1755-1767 , 2008.
[51] J. A. Jensen, J. A., S. I. Nikolov, K. L. Gammelmark, et M. H. Pedersen, “Synthetic
aperture ultrasound imaging,” Ultrasonics , Vol. 44, pp e5-e15, 2006.
[52] J. A. Jensen, O. Holm, L. J. Jensen, H. Bendsen, S. I. Nikolov, B. G. Tomov, P. Munk, M.
Hansen, K. Salomonsen, J. Hansen, K. Gormsen, H. M. Pedersen, et K. L. Gammelmark,
“Ultrasound research scanner for real-time synthetic aperture data acquisition,” IEEE
Trans. Ultrason., Ferro. And Freq. Contr., Vol. 52, No. 5, pp. 881-891, 2005
[53] H. Lay, et G. Lockwood, “A 64-channel beamformer for 50 MHz linear arrays,” Présenté
à IEEE Ultrasonics Symposium, pp. 29-32, 2007.
[54] B. G. Tomov, et J. A. Jensen, “A new architecture for a single-chip multi-channel
beamformer based on a standard FPGA,” Présenté à IEEE Ultrasonics Symposium, pp.
1529-1533, 2001.
152
[55] B. G. Tomov, et J. A. Jensen, “Compact FPGA-based beamformer using oversampled 1-
bit A/D converters,” IEEE Trans. Ultrason., Ferro. and Freq. Contr., Vol. 52, No. 5, pp.
870-880, 2005.
[56] J. M. P. Langlois, D. Al-Khalili, et R. J. Inkol, “A high performance, wide badwidth, low-
cost fpga-based quadrature demodulator,” Présenté à IEEE Canadian Conf. Electrical and
Computer Engineering, pp. 497-502, 1999.
[57] J. H. Chang, J. T. Yen, et K. K. Shung, “A novel envelope detector for high-frame rate,
high frequency ultrasound imaging,” IEEE Trans. Ultrason., Ferro. and Freq. Contr., Vol.
54, No. 9, pp. 1792-1801, 2007.
[58] J. H. Chang, L. Sun, J. T. Yen, et K. K. Shung, “Low-cost, high speed back-end
processing system for high-frequency ultrasound B-Mode imaging,” IEEE Trans.
Ultrason., Ferro. and Freq. Contr., Vol. 56, No. 7, pp. 1792-1801, 2009.
[59] A. Beauchamp-Parent, “Alarme de conditionnement ultrasonore programmable pour le
traitement de l’énurésie,” École Polytechnique de Montréal, M.Sc.A., Qc, Canada, 1999.
[60] M. Hajj Hassan, “Balayeur microélectromécanique dédié aux systèmes échographiques,”
École Polytechnique de Montréal, M.Sc.A., Qc, Canada, 2006.
[61] K. El-Sankary, A. Kassem, R. Chebli, et M. Sawan, “Low power, low voltage, 10bit-
50MSPS pipeline ADC dedicated for front-end ultrasonic receivers,” Présenté à IEEE
14th Inter. Conf. on Microelectronics, pp. 219-222, 2002.
[62] R. Chebli, “Étage de réception intégré d’un échographe portable,” École Polytechnique de
Montréal, M.Sc.A., Qc, Canada, 2002.
[63] X. Zhao, R. Chebli, et M. Sawan, “A wide tuning range voltage-controlled ring oscillator
dedicated to ultrasound transmitter,” IEEE Proc. 16th Inter. Conf. on Microelectronics,
pp. 313-316, 2004.
[64] R. Chebli, et M. Sawan, “Fully Integrated High-Voltage Front-End Interface for
Ultrasonic Sensing Applications,” IEEE Trans. Cir. Syst., Vol. 54, pp. 179-190, 2007.
[65] R. Chebli, “Techniques de conception des circuits intégrés haute tension CMOS dédiés
aux émetteurs ultrasoniques,” École Polytechnique de Montréal, Ph.D., Qc, Canada, 2007.
153
[66] A. Kassem, “Contribution à la faisabilité d’un système sur puce dédié à l’imagerie par
ultrasons,” École Polytechnique de Montréal, Ph.D., Qc, Canada, 2004.
[67] N.-J. Vaillancourt-Veilleux, “Modélisation et caractérisation d’une architecture générique
de systèmes ultrasonores portables,” École Polytechnique de Montréal, M.Sc.A., Qc,
Canada, 2006.
[68] C.-H. H. Hu, X.-C. Xu, J. M. Cannata, J. T. Yen, et K. K. Shung, “Development of a real-
time, high-frequency ultrasound digital beamformer for high-frequency linear array
transducers,” IEEE Trans. Ultrason., Ferroelect., Freq. Contr., Vol. 53, pp. 317-323, 2006.
[69] C.-H. Hu, K. A. Snook, X.-C. Xu, J. T. Yen, et K. K. Shung, “FPGA based digital high
frequency beamformers for arrays,” Présenté à IEEE Ultrasonics Symposium, pp. 1347-
1350, Vol. 2, 2004.
[70] C.-H. Hu, A. Snook, P.-J. Cao, et K. K. Shung, “High-frequency ultrasound annular array
imaging. Part II: Digital beamformer design and imaging,” IEEE Trans. on Ultrasonics,
Ferroelectrics, and Frequency control, Vol. 53, No. 2, pp. 309-316, 2006.
[71] C. Fritsch, A. Ibanez, et M. Parrilla, “A digital envelope detection filter for real-time
operation,” IEEE Trans. on Instrumentation and Measurement, Vol. 48, No. 6, 1999.
[72] C.-H. Tseng, et H.-F. Chien, “Digital quadrature demodulation of multiple RF signals,”
Présenté à IEEE 6th Workshop on Signal processing advances in wireless
communications, pp. 37-41, 2005.
[73] H. Liu, A. Ghafoor, et P. H. Stockmann, “A new quadrature sampling and processing
approach,” IEEE Trans. on Aerospace and electronic sys., Vol. 25, No. 5, pp. 733-748,
1989.
[74] L. Angrisani, et R. S. Lo Moriello, “Estimating ultrasonic time-of-flight through
quadrature demodulation,” IEEE Trans, on Instrumentation and measurement, Vol. 55,
No. 1, pp. 54-62, 2006.
[75] J. Ophir, et N. F. Maklad, “Digital scan converters in diagnostic ultrasound imaging,”
Proceedings of the IEEE, Vol. 67, pp654-664, 1979.
154
[76] J. D. Owen, “A comparison of wide bandwidth quadrature demodulators using computer
modeling,” Radar 97, pp. 506-511, 1997.
[77] N. E. Huang, et S. S. P. Shen, Eds., Hilbert-Huang transform and its applications, New
Jersey: World Scientific, pp. 12-24, et pp.86-87, 2005.
[78] R. N. Bracewell. The Fourier transform and its applications, 2e ed., New York: McGraw-
Hill, pp. 267-272, 1978.
[79] E. Bedrosian, “A product theorem for Hilbert transforms,” Proc. IEEE, Vol. 51, pp. 868-
869, 1963.
[80] K. H. Powers, “The compatibility problem in single-sideband transmission,” Proc. IRE,
Vol. 48, pp. 1431-1435, 1960.
[81] I. Kollar, R. Pintelon, et J. Schoukens, “Optimal FIR and IIR Hilbert transformer design
via LS and minimax fitting,” IEEE Trans. On instrumentation and measurement, Vol. 39,
No. 6, pp.847-852, 1990.
[82] G. Molnar, et M. Vucic, “IIR Hilbert transformers based on symmetry of time-domain
response,” Electronics letters, Vol. 40, No. 20, pp., 2004.
[83] A. Reilly, G. Frazer, et B. Boashash, “Analytic signal generation – tips and traps,” IEEE
Trans. Sig. Proc., Vol. 42, pp. 3241-3245, 1994.
[84] L. D. Milie, et M. D. Lutovac, “Approximate linear phase Hilbert transformer,” Présenté à
4th International Conference on Telecommunications in Modern Satellite, Cable and
Broadcasting Services, pp.129-132, 1999.
[85] M. A. Soderstrand, L. G. Johnson, H. Arichanthiran, M. D. Hoque, et R. Elangovan,
“Reducing hardware requirement in FIR filter design,” IEEE Conf. Acoust, Speech, and
Sig. Proc., Vol. 6, pp. 3275-3278, 2000.
[86] V. S. Rosa, E. Costa, J. C. Monteiro, et S. Bampi, “Performance evaluation of parallel
FIR filter optimizations in ASICs and FPGA,” Présenté à 48th Midwest Symposium on
Circuits and Systems, Vol. 2, pp 1481-1484, 2005.
155
[87] H. H. Dam, S. Nordebo, K. L. Teo, et A. Cantoni, “FIR filter design over discrete
coefficients and least square error,” IEE Proc.-Vis. Image Signal Process., Vol. 147, No.6,
pp.543-548, 2000.
[88] K.-H. Tan, W. F. Leong, S. Kadam, M. A. Soderstrand, et L. G. Johnson, “Public-domain
Matlab program to generate highly optimized VHDL for FPGA implementation,”
Présenté à IEEE Symposium on Circuits and Systems, Vol. 4, pp. 514-517, 2001.
[89] J. H. McClellan, T. W. Parks, et L. R. Rabiner, “A computer program for designing
optimum FIR linear phase digital filters,” IEEE Trans. Audio Electroacoust., Vol. AU-21,
pp. 506-526, 1973.
[90] M. Z. Komodromos, S. F. Russell, et P. T. P. Tang, “Design of FIR Hilbert transformers
and differentiators in the complex domain,” IEEE Trans. on Circuits and systems, Vol. 45,
No. 1, pp. 64-67, 1998.
[91] L. S. DeBrunner, et Y. Wang, “Optimizing filter order and coefficient length in the design
of high performance FIR filter for high throughput FPGA implementations,” Présenté à
Digital Sig. Proc. Workshop, 12th – Sig. Proc. Educ. Workshop, 4th, pp. 608-612, 2006.
[92] P. Soderquist, et M. Leeser, “Division and square root: choosing the right
implementation,” IEEE Micro., Vol. 17, No. 4, pp. 56-66, 1997.
[93] I. Furukawa, J. Suzuki, et S. Ono, “Required Quantizing Resolution for Perceptually
Linearized Medical X-Ray Images on Display Monitor,” Systems and Computers in
Japan, Vol. 34, No. 5, pp. 14-24, 2003.
[94] D. A. Johns, et K. Martin, “Analog integrated circuit design,” New York: John Wiley &
Sons, p. 706, 1997.
[95] J. C. Majithia, “Fast algorithms for continuous estimation of mean value of a random
variable,” Electronics Letters, Vol. 7, No. 20, pp. 626-628, 1971.
[96] A. A. Jerraya, et W. Wolf, Multiprocessor systems-on-chips, Ed. San Francisco: Elsevier,
p. 581, 2005.
156
[97] T. Janik, E. Liau, H. Lorenz, M. Menke, E. Plaettner, J. Schweden, H. Seitz, et E. Vega-
Ordonez, “A 1.8V p(seudo)SRAM using standard 140nm DRAM technology with self
adapting clocked standby operation,” in Proc. of ISCAS 2006, pp. 4143-4146, May, 2006.
[98] CellularRAM workgroup, “CellularRAM 1.5 datasheet – 128Mb/64Mb Async/Page/Burst
CellularRAM 1.5 Memory,” http://www.cellularram.com/datasheets/index.html, Juin
2005 [3 décembre 2010].
[99] S.-P. Liu, C.-T. Wang, C.-H. Lee, et W. Wang, “Miniaturized WiFi System Module Using
SiP/IPD for Handheld Device Applications,” Proceeding of IMPACT 2007, Oct., pp. 146-
148, 2007.
[100] W. J. Price, “ A benchmark tutorial,” IEEE Micro, Vol. 9, No. 10, pp. 28-43, 1989.
[101] A. R. Weiss, “Dhrystone Benchmark : History, Analysis, "Scores" and Recommendations
White Paper,“ p. 14, Nov. 2002.
[102] P. Lapsley, et G. Blalock, “How to estimate DSP processor performance,” IEEE
Spectrum, Vol. 33, No. 7, pp. 74-78, 1996.
[103] A. Ray, T. Srikanthan, et W. Jigang, “Practical Techniques for Performance Estimation of
Processors,” in Proc. of Sys.-on-Chip for Real-Time App. 2005, July, pp. 308- 311, 2005.
[104] ----, “Intel Pentium MMX 200 - CPU Information and Benchmarks,” http://www.cpu-
world.com/CPUs/Pentium/Intel-Pentium%20MMX%20200%20-%20FV80503200.html,
Juillet 2009 [3 décembre 2009].
[105] F. K. Schneider, A. Agarwal, Y. Mo Yoo T. Fukuoka, et Y. Kim, “A fully programmable
computing architecture for medical ultrasound machines,” IEEE Trans. on Information
Technology In Biomedicine, Vol. 14, No. 10, pp. 538-540, 2010.
